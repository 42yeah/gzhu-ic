(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7561d098"],{"00b1":function(e,t,n){"use strict";n("e6b4")},"0991":function(e,t,n){"use strict";n("6d69")},"0be4":function(e,t,n){},"0c15":function(e,t,n){},"20f5":function(e,t,n){"use strict";n("a507")},"2cff":function(e,t,n){"use strict";n("4f5f")},"37e9":function(e,t,n){},3835:function(e,t,n){"use strict";function a(e){if(Array.isArray(e))return e}function r(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,o=[],s=!0,i=!1;try{for(n=n.call(e);!(s=(a=n.next()).done);s=!0)if(o.push(a.value),t&&o.length===t)break}catch(l){i=!0,r=l}finally{try{s||null==n["return"]||n["return"]()}finally{if(i)throw r}}return o}}n.d(t,"a",(function(){return i}));var o=n("06c5");function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){return a(e)||r(e,t)||Object(o["a"])(e,t)||s()}},4851:function(e,t,n){"use strict";n("8072")},"4f5f":function(e,t,n){},5063:function(e,t,n){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"researchInfo"},[t("h3",{staticClass:"title cl"},[e._v(e._s(e.$t("index_main_resvInfo_title")))]),e.isWeek?t("main",{staticClass:"main"},[e.roomInfo.resvRule&&e.roomInfo.resvRule.cancelTime?t("p",{staticClass:"main-line"},[e._m(0),e._v("\r\n        "+e._s(e.$t("index_main_resvInfo_cancelTime_label1"))+"\r\n        "),t("span",{staticClass:"content cl"},[e.isZju?t("span",[e._v(e._s(e.roomInfo.resvRule?e.roomInfo.resvRule.cancelTime-2:0)+e._s(e.$t("common_unit_m")))]):t("span",[e._v(e._s(e.roomInfo.resvRule?e.roomInfo.resvRule.cancelTime:0)+e._s(e.$t("common_unit_m")))])]),e._v("\r\n        "+e._s(e.$t("index_main_resvInfo_cancelTime_label2"))+"\r\n      ")]):e._e()]):t("main",{staticClass:"main"},[t("p",{staticClass:"main-line"},[e._m(1),e._v("\r\n        "+e._s(e.$t("index_main_resvInfo_openLabel"))+":\r\n        "),t("span",{staticClass:"content cl"},e._l(e.roomInfo.openTimes,(function(n,a){return t("span",{key:a},[e._v(e._s(n.openStartTime)+"--"+e._s(n.openEndTime)+"  ")])})),0)]),t("p",{staticClass:"main-line"},[e._m(2),e._v("\r\n        "+e._s(e.$t("index_main_resvInfo_advanceResvLabel"))+":\r\n        "),t("span",{staticClass:"content cl"},[0==e.roomInfo.resvRule.latestResvTime&&0==e.roomInfo.resvRule.earliestResvTime?t("span",[e._v("当天")]):e.roomInfo.resvRule&&0!==e.roomInfo.resvRule.latestResvTime?t("span",[e.latestResvTime.d?t("span",[e._v(e._s(e.latestResvTime.d)+e._s(e.$t("common_unit_d"))+"\r\n            ")]):e._e(),e.latestResvTime.h?t("span",[e._v(e._s(e.latestResvTime.h)+e._s(e.$t("common_unit_h"))+"\r\n            ")]):e._e(),e.latestResvTime.m?t("span",[e._v(e._s(e.latestResvTime.m)+e._s(e.$t("common_unit_m")))]):e._e()]):t("span",[e._v("0-")]),e.earliestResvTime.d?t("span",[e._v(e._s(e.earliestResvTime.d)+e._s(e.$t("common_unit_d"))+"\r\n          ")]):e._e(),e.earliestResvTime.h?t("span",[e._v(e._s(e.earliestResvTime.h)+e._s(e.$t("common_unit_h"))+"\r\n          ")]):e._e(),e.earliestResvTime.m?t("span",[e._v(e._s(e.earliestResvTime.m)+e._s(e.$t("common_unit_m")))]):e._e()])]),t("p",{staticClass:"main-line"},[e._m(3),e._v("\r\n        "+e._s(e.$t("index_main_resvInfo_duration"))+":\r\n        "),t("span",{staticClass:"content cl"},[t("span",[e._v(e._s(e.roomInfo.resvRule&&e.roomInfo.resvRule.minResvTime||0)+e._s(e.$t("common_unit_m"))+"-"+e._s(e.roomInfo.resvRule&&e.roomInfo.resvRule.maxResvTime||0)+e._s(e.$t("common_unit_m")))])])]),e.roomInfo.resvRule&&e.roomInfo.resvRule.cancelTime?t("p",{staticClass:"main-line"},[e._m(4),e._v("\r\n        "+e._s(e.$t("index_main_resvInfo_cancelTime_label1"))+"\r\n        "),t("span",{staticClass:"content cl"},[e.isZju?t("span",[e._v(e._s(e.roomInfo.resvRule?e.roomInfo.resvRule.cancelTime-2:0)+e._s(e.$t("common_unit_m")))]):t("span",[e._v(e._s(e.roomInfo.resvRule?e.roomInfo.resvRule.cancelTime:0)+e._s(e.$t("common_unit_m")))])]),e._v("\r\n        "+e._s(e.$t("index_main_resvInfo_cancelTime_label2"))+"\r\n      ")]):e._e(),t("p",{directives:[{name:"show",rawName:"v-show",value:e.showPerLimit,expression:"showPerLimit"}],staticClass:"main-line"},[e._m(5),e._v("\r\n        "+e._s(e.$t("index_main_resvInfo_numberLimit"))+":\r\n        "),t("span",{staticClass:"content cl"},[t("span",[e._v(e._s(e.roomInfo.minUser)+"-"+e._s(e.roomInfo.maxUser))])])]),e.limit?t("p",{staticClass:"main-line"},[t("span",{staticClass:"seq cl"},[t("span",{staticClass:"seqtxt"},[e._v(e._s(e.showPerLimit?"6":"5"))])]),e._v("\r\n        "+e._s(e.$t("index_main_resvInfo_resvAttrs"))+":\r\n        "),t("span",[e._v(e._s(e.limit))]),2&e.openLimit?t("span",[e._v(e._s(e.$t("index_main_resvInfo_noFreeTimes")))]):e._e()]):e._e()])])},r=[function(){var e=this,t=e._self._c;return t("span",{staticClass:"seq cl"},[t("span",{staticClass:"seqtxt"},[e._v("1")])])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"seq cl"},[t("span",{staticClass:"seqtxt"},[e._v("1")])])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"seq cl"},[t("span",{staticClass:"seqtxt"},[e._v("2")])])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"seq cl"},[t("span",{staticClass:"seqtxt"},[e._v("3")])])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"seq cl"},[t("span",{staticClass:"seqtxt"},[e._v("4")])])},function(){var e=this,t=e._self._c;return t("span",{staticClass:"seq cl"},[t("span",{staticClass:"seqtxt"},[e._v("5")])])}],o=(n("ac6a"),{props:{roomInfo:{type:Object,required:!0},showPerLimit:{type:Boolean,default:!0},isWeek:{type:Boolean,default:!1}},computed:{openLimit:function(){return this.roomInfo.openTimes.length>0?this.roomInfo.openTimes[0].openLimit:1},limit:function(){if(!this.roomInfo.resvRule)return"";var e=this.roomInfo.resvRule.limit,t=[{value:0,label:this.$t("index_main_resvInfo_limit_label1")},{value:1,label:this.$t("index_main_resvInfo_limit_label2")},{value:2,label:this.$t("index_main_resvInfo_limit_label3")},{value:8,label:this.$t("index_main_resvInfo_limit_label5")},{label:this.$t("index_main_resvInfo_limit_label6"),value:16},{label:this.$t("index_main_resvInfo_limit_label9"),value:32},{label:this.$t("index_main_resvInfo_limit_label7"),value:64},{label:this.$t("index_main_resvInfo_limit_label8"),value:128}];if(0!=e){var n=t.filter((function(t){return(t.value&e)>0})),a="";return n.forEach((function(e){a+="".concat(e.label,"; ")})),a}return this.$t("index_main_resvInfo_limit_label1")},earliestResvTime:function(){var e={d:"",h:"",m:""};return this.roomInfo.resvRule&&(e.d=Math.floor(this.roomInfo.resvRule.earliestResvTime/1440),e.h=Math.floor(this.roomInfo.resvRule.earliestResvTime%1440/60),e.m=Math.floor(this.roomInfo.resvRule.earliestResvTime%1440%60)),e},latestResvTime:function(){var e={d:"",h:"",m:""};return this.roomInfo.resvRule&&(e.d=Math.floor(this.roomInfo.resvRule.latestResvTime/1440),e.h=Math.floor(this.roomInfo.resvRule.latestResvTime%1440/60),e.m=Math.floor(this.roomInfo.resvRule.latestResvTime%1440%60)),e}}}),s=o,i=(n("4851"),n("2877")),l=Object(i["a"])(s,a,r,!1,null,"6a15c76b",null);t["a"]=l.exports},5814:function(e,t,n){"use strict";n("0be4")},"581a":function(e,t,n){"use strict";n.d(t,"p",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"i",(function(){return c})),n.d(t,"j",(function(){return m})),n.d(t,"e",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return _})),n.d(t,"l",(function(){return g})),n.d(t,"u",(function(){return y})),n.d(t,"s",(function(){return $})),n.d(t,"d",(function(){return x})),n.d(t,"z",(function(){return k})),n.d(t,"k",(function(){return C})),n.d(t,"y",(function(){return T})),n.d(t,"g",(function(){return E})),n.d(t,"o",(function(){return Y})),n.d(t,"w",(function(){return P})),n.d(t,"n",(function(){return B})),n.d(t,"m",(function(){return z})),n.d(t,"x",(function(){return U})),n.d(t,"t",(function(){return K})),n.d(t,"f",(function(){return V})),n.d(t,"r",(function(){return W})),n.d(t,"q",(function(){return Z})),n.d(t,"h",(function(){return G})),n.d(t,"v",(function(){return J}));n("96cf");var a=n("1da1"),r=n("b480");n("4be7");function o(e){return s.apply(this,arguments)}function s(){return s=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({method:"get",url:"reserve/resvInfo",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function i(e){return l.apply(this,arguments)}function l(){return l=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({method:"post",url:"reserve/delete",params:t.params});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function c(e){return u.apply(this,arguments)}function u(){return u=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({method:"get",url:"creditRec/getOwn",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function m(e){return d.apply(this,arguments)}function d(){return d=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({method:"get",url:"creditPunishRec/surPlus",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function f(e){return p.apply(this,arguments)}function p(){return p=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({method:"get",url:"activity/resvInfo",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function h(e){return v.apply(this,arguments)}function v(){return v=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({method:"post",url:"activity/custom/delete",params:t.params});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function _(e){return b.apply(this,arguments)}function b(){return b=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({method:"post",url:"account/update",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function g(e){return w.apply(this,arguments)}function w(){return w=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({method:"get",url:"account/info",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function y(e){return D.apply(this,arguments)}function D(){return D=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({method:"post",url:"/reserve/endAhaed",params:t.params});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function $(e){return S.apply(this,arguments)}function S(){return S=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({url:"/reserve",method:"get",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function x(e){return R.apply(this,arguments)}function R(){return R=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({url:"/reserve/update",method:"post",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}function k(e){return O.apply(this,arguments)}function O(){return O=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({url:"/seatOperation/tempLeave",method:"post",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function C(e){return I.apply(this,arguments)}function I(){return I=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({url:"/activity/custom/resvInfo",method:"get",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function T(e){return M.apply(this,arguments)}function M(){return M=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({url:"/activityReview/saveOrUpdate",method:"post",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}function E(e){return j.apply(this,arguments)}function j(){return j=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({url:"/activityReview",method:"get",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}function Y(e){return N.apply(this,arguments)}function N(){return N=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({url:"/psgSeat/resvInfo",method:"get",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function P(e){return A.apply(this,arguments)}function A(){return A=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({url:"/psgLeaveRec/leave",method:"post",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function B(e){return L.apply(this,arguments)}function L(){return L=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({url:"/psgLeaveRec/rec",method:"get",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}function z(e){return H.apply(this,arguments)}function H(){return H=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({url:"/psgLeaveRec/reserves",method:"get",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}function U(e){return F.apply(this,arguments)}function F(){return F=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({url:"/psgLeaveRec/cancel",method:"post",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}function K(e){return q.apply(this,arguments)}function q(){return q=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({url:"/reserve/getSignRec",method:"get",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),q.apply(this,arguments)}function V(e){return Object(r["a"])({url:"/borrow/reserve/own",method:"get",params:e})}function W(e){return Object(r["a"])({url:"/reserve/endList",method:"get",params:e})}function Z(e){return Object(r["a"])({url:"/borrow/device/resvDevInfo",method:"get",params:e})}function G(e){return Object(r["a"])({url:"/checkLog/checkInfo",method:"get",params:e})}function J(e){return Object(r["a"])({url:"/reserve/endReserve",method:"post",params:e})}},5883:function(e,t,n){},"59b5":function(e,t,n){},"5ce8":function(e,t,n){"use strict";n("dceb")},"6ccc":function(e,t,n){"use strict";n("ffe4")},"6d69":function(e,t,n){},7514:function(e,t,n){"use strict";var a=n("5ca1"),r=n("0a49")(5),o="find",s=!0;o in[]&&Array(1)[o]((function(){s=!1})),a(a.P+a.F*s,"Array",{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(o)},"7d13":function(e,t,n){"use strict";n.d(t,"h",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"k",(function(){return c})),n.d(t,"l",(function(){return m})),n.d(t,"j",(function(){return f})),n.d(t,"d",(function(){return h})),n.d(t,"g",(function(){return _})),n.d(t,"f",(function(){return g})),n.d(t,"e",(function(){return y})),n.d(t,"a",(function(){return $})),n.d(t,"b",(function(){return x})),n.d(t,"i",(function(){return k}));n("96cf");var a=n("1da1"),r=n("b480");n("4be7");function o(e){return s.apply(this,arguments)}function s(){return s=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({method:"get",url:"reserve",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function i(e){return l.apply(this,arguments)}function l(){return l=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({method:"get",url:"reserve/areaInfo",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function c(e){return u.apply(this,arguments)}function u(){return u=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({method:"post",url:"seatDevice/coordinate",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function m(e){return d.apply(this,arguments)}function d(){return d=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({method:"post",url:"digitalReadingPcRoom/coordinate",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function f(e){return p.apply(this,arguments)}function p(){return p=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({method:"post",url:"reserve",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function h(e){return v.apply(this,arguments)}function v(){return v=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({method:"get",url:"sysInfo",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function _(e){return b.apply(this,arguments)}function b(){return b=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({method:"get",url:"seatRoom/openScope",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function g(e){return w.apply(this,arguments)}function w(){return w=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({method:"get",url:"seatRoom/open",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function y(e){return D.apply(this,arguments)}function D(){return D=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({method:"get",url:"psgSeat/open",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function $(e){return S.apply(this,arguments)}function S(){return S=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({method:"get",url:"codingTable/getAll",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function x(e){return R.apply(this,arguments)}function R(){return R=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({method:"get",url:"device/tips",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}function k(e){return O.apply(this,arguments)}function O(){return O=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({method:"get",url:"/seatDevice/tempLeave",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}},"7d51":function(e,t,n){"use strict";n("59b5")},8072:function(e,t,n){},"8c97":function(e,t,n){"use strict";n("37e9")},"90aca":function(e,t,n){},"9d94":function(e,t,n){"use strict";n("bb4a")},"9ffe":function(e,t,n){"use strict";n("90aca")},a507:function(e,t,n){},aa03:function(e,t,n){},ac52:function(e,t,n){},bb4a:function(e,t,n){},bbbb:function(e,t,n){"use strict";n("0c15")},bf46:function(e,t,n){e.exports=n.p+"static/2.2.20220601/img/wecharts.7e0b2577.png"},c357:function(e,t,n){"use strict";n("ccbd")},c8d9:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return m}));n("96cf");var a=n("1da1"),r=n("b480");function o(e){return s.apply(this,arguments)}function s(){return s=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({method:"get",url:"reserve",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function i(e){return l.apply(this,arguments)}function l(){return l=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({method:"post",url:"reserve",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function c(e){return u.apply(this,arguments)}function u(){return u=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({method:"get",url:"account/getMembers",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function m(e){return d.apply(this,arguments)}function d(){return d=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])({method:"post",url:"reserve/bulkAdd",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}},ccbd:function(e,t,n){},ccde:function(e,t,n){"use strict";n("aa03")},dceb:function(e,t,n){},dd6b:function(e,t,n){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"my-tabs"},[t("div",{staticClass:"tabs-nav"},e._l(e.tabList,(function(n,a){return t("div",{key:a,staticClass:"nav-item",class:[e.currentIndex==n.index?"actived":""],on:{click:function(t){return t.stopPropagation(),e.changeTab(n)}}},[e._v("\r\n        "+e._s(n.title)+"\r\n      ")])})),0),t("div",{staticClass:"tabs-content"},[e._t("default")],2)])},r=[],o=(n("c5f6"),{name:"MyTabs",props:{tabList:Array,currentIndex:Number},data:function(){return{}},methods:{changeTab:function(e){this.$emit("changeTab",e)}}}),s=o,i=(n("ccde"),n("2877")),l=Object(i["a"])(s,a,r,!1,null,"526ebe44",null);t["a"]=l.exports},e6b4:function(e,t,n){},e9ab:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"innerwrapp"},[t("div",{staticClass:"title"},[t("h3",[e._v(e._s(e.$t("index_main_profile_title")))])]),t("my-tabs",{attrs:{tabList:e.tabList,currentIndex:e.currentIndex},on:{changeTab:e.changeTab}},[e.currentIndex==e.valEnum.USERORDER?t("UserOrder"):e.currentIndex==e.valEnum.ACTIVITY?t("ActivityCustomOrder"):e.currentIndex==e.valEnum.CREDIT?t("CreditDetails"):e.currentIndex==e.valEnum.USERINFO?t("UserInfo"):e.currentIndex==e.valEnum.EXAMSEAT?t("ExamSeat"):e.currentIndex==e.valEnum.BORROWDEVICE?t("BorrowDevice"):e._e()],1)],1)},r=[],o=(n("ac6a"),n("456d"),n("6762"),n("dd6b")),s=(n("386d"),function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"search"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.search,"label-width":"auto"}},[t("el-form-item",{attrs:{label:e.$t("index_main_profile_common_dateRange")}},[t("el-date-picker",{attrs:{type:"daterange","range-separator":e.$t("index_main_profile_common_sep"),"start-placeholder":e.$t("index_main_profile_common_start"),"end-placeholder":e.$t("index_main_profile_common_end"),size:"small",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.search.date,callback:function(t){e.$set(e.search,"date",t)},expression:"search.date"}})],1),t("el-form-item",[t("el-checkbox-group",{attrs:{disabled:e.isStatusCkDisabled},model:{value:e.search.check,callback:function(t){e.$set(e.search,"check",t)},expression:"search.check"}},e._l(e.checkOption,(function(n){return t("el-checkbox",{key:n.value,attrs:{label:n.value}},[e._v(e._s(n.label))])})),1)],1),t("el-form-item",[t("el-checkbox-group",{model:{value:e.search.otherCheck,callback:function(t){e.$set(e.search,"otherCheck",t)},expression:"search.otherCheck"}},e._l(e.otherCheckOption,(function(n){return t("el-checkbox",{key:n.key,attrs:{label:n.value}},[e._v(e._s(n.label))])})),1)],1),t("el-form-item",{staticStyle:{float:"right","margin-right":"20px"}},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleSearch}},[e._v(e._s(e.$t("common_button_search")))])],1)],1)],1),t("div",{staticClass:"table-con"},[t("el-table",{ref:"tableRef",staticClass:"tableStyle",staticStyle:{width:"100"},attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{type:"expand",width:"30"},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return[t("el-card",[t("el-descriptions",{attrs:{size:"small",column:2,labelClassName:"description-label"}},[1==a.classKind?t("el-descriptions-item",{attrs:{label:e.$t("index_main_profile_PerAppoint_tableCol2")}},[e._v(e._s(a.testName))]):e._e(),t("el-descriptions-item",{attrs:{label:e.$t("index_main_profile_PerAppoint_tableCol4")}},[e._v(e._s(a.resvName))]),t("el-descriptions-item",{attrs:{label:e.$t("index_main_profile_PerAppoint_tableCol8")}},[e._v(e._s(e.$moment(a.gmtCreate).format("YYYY-MM-DD HH:mm")))]),1==a.classKind?t("el-descriptions-item",{attrs:{label:e.$t("index_main_profile_PerAppoint_tableCol6")}},[e._v(e._s(e._f("filterMember")(a.resvMemberInfoList)))]):e._e(),a.addValueNum>0?t("el-descriptions-item",{attrs:{label:e.$t("index_main_profile_PerAppoint_addServices")}},e._l(a.addServices,(function(n){return t("el-tag",{key:n,attrs:{size:"mini",type:"success"}},[e._v(e._s(n))])})),1):e._e()],1)],1)]}}])}),t("el-table-column",{attrs:{prop:"resvId",label:e.$t("index_main_profile_PerAppoint_tableCol1"),align:"center",width:"90px"}}),t("el-table-column",{attrs:{label:e.$t("index_main_profile_PerAppoint_tableCol3"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[n.row.resvDevInfoList&&Array.isArray(n.row.resvDevInfoList)&&n.row.resvDevInfoList.length>0?[t("p",[e._v(e._s(n.row.resvDevInfoList[0].labName))]),t("p",[e._v(e._s(n.row.resvDevInfoList[0].roomName))]),8==n.row.classKind?t("p",[e._v(e._s(n.row.resvDevInfoList[0].devName))]):e._e(),2==n.row.classKind?t("p",[e._v(e._s(n.row.resvDevInfoList[0].devName))]):e._e()]:e._e()]}}])}),t("el-table-column",{attrs:{label:e.$t("index_main_profile_PerAppoint_tableCol5"),align:"left"},scopedSlots:e._u([{key:"default",fn:function(n){return[32&n.row.resvProperty?[t("p",[e._v(e._s("".concat(e.$t("index_main_profile_common_tableStart"),": ").concat(e.$moment(n.row.resvBeginTime).format("YYYY-MM-DD"))))]),t("p",[e._v(e._s("".concat(e.$t("index_main_profile_common_tableEnd"),": ").concat(e.$moment(n.row.resvEndTime).format("YYYY-MM-DD"))))]),n.row.resvEndRealTime?t("p",[e._v(e._s(e.$t("common_actual_end"))+": "+e._s(n.row.resvEndRealTime?"".concat(e.$moment(n.row.resvEndRealTime).format("YYYY-MM-DD")):"未结束"))]):e._e()]:[t("p",[e._v(e._s(e.$t("index_main_profile_common_tableStart"))+": "+e._s(e.$moment(n.row.resvBeginTime).format("YYYY-MM-DD HH:mm")))]),t("p",[e._v(e._s(e.$t("index_main_profile_common_tableEnd"))+": "+e._s(e.$moment(n.row.resvEndTime).format("YYYY-MM-DD HH:mm")))]),n.row.resvEndRealTime?t("p",[e._v(e._s(e.$t("common_actual_end"))+": "+e._s(n.row.resvEndRealTime?"".concat(e.$moment(n.row.resvEndRealTime).format("YYYY-MM-DD HH:mm")):"未结束"))]):e._e()]]}}])}),t("el-table-column",{attrs:{prop:"resvStatus",label:e.$t("index_main_profile_PerAppoint_tableCol7"),align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row;return e._l(e.getTableStatus(a),(function(n){return t("p",{key:n.value},[t("span",{class:["cl--".concat(e.getColor(n))]},[e._v(e._s(n.label))])])}))}}])}),t("el-table-column",{attrs:{label:e.$t("index_main_profile_PerAppoint_tableCol9"),width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[e.isStatusCkDisabled&&e.hasSeatMdu()?[(4096&n.row.resvStatus)<=0?t("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.handleSignOff(n.row)}}},[e._v("签离")]):e._e()]:[n.row.latestCheckInTime?[t("div",[t("p",{staticStyle:{"font-size":"12px"}},[e._v("最晚签到时间")]),t("p",{staticStyle:{"font-size":"12px"}},[e._v(e._s(e.$moment(n.row.latestCheckInTime).format("YYYY-MM-DD HH:mm")))])])]:e._e(),8==n.row.classKind&&n.row.tempLeaveEndTime?[t("div",{staticStyle:{"font-size":"12px"}},[e._v("暂离剩余:"+e._s(n.row.tempLeaveEndTime?n.row.tempLeaveEndTime:" ")+"分钟")])]:e._e(),t("div",{staticClass:"col-container"},[e.isShowCancel(n.row)?[e.isShowCancel(n.row)?t("el-button",{staticStyle:{color:"red"},attrs:{type:"text"},on:{click:function(t){return e.handleDelete(n.row)}}},[e._v(e._s(e.$t("common_button_reserveCancel")))]):e._e(),e._v("\r\n                  |\r\n                ")]:e._e(),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleDetail(n.row)}}},[e._v(e._s(e.$t("common_btn_detail")))])],2),e.isShowDropdown(n.row)?t("el-dropdown",[t("el-button",{attrs:{type:"primary",size:"mini"}},[e._v(e._s(e.$t("commont_button_moreFun"))),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",[e.showDelResv(n.row)?t("el-button",{attrs:{type:"text",icon:"el-icon-time"},on:{click:function(t){return e.handleover(n.row)}}},[e._v(e._s(e.$t("common_button_endEarly")))]):e._e()],1),t("el-dropdown-item",[e.showEditResv(n.row)?t("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.handleEdit(n.row)}}},[e._v(e._s(e.$t("common_button_editReserve")))]):e._e()],1),t("el-dropdown-item",[e.showBreakRea(n.row)?t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleWhyBreak(n.row)}}},[e._v(e._s(e.$t("common_button_unpassReason")))]):e._e()],1),t("el-dropdown-item",[e.showStatus(n.row)?t("el-button",{staticStyle:{color:"red"},attrs:{type:"text",icon:"el-icon-position"},on:{click:function(t){return e.handleStatus(n.row)}}},[e._v("暂时离开")]):e._e()],1),t("el-dropdown-item",[e.isShowCopyReserveBtn?t("el-button",{staticStyle:{width:"100%"},attrs:{type:"text"},on:{click:function(t){return e.handleCopy(n.row)}}},[e._v("复制预约")]):e._e()],1),8===n.row.classKind?t("el-dropdown-item",[t("el-button",{attrs:{type:"text",icon:"el-icon-time"},on:{click:function(t){return e.handleSignInRec(n.row)}}},[e._v(e._s(e.$t("common_operation_record")))])],1):e._e()],1)],1):e._e()]]}}])})],1)],1),e.isStatusCkDisabled?e._e():t("div",{staticClass:"page"},[t("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[5,10,20,25,100],"current-page":e.pageDate.page,"page-size":e.pageDate.pageNum,total:e.pageDate.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{title:e.$t("index_main_profile_dialogTitle_failureReason"),width:"30%",visible:e.showBreakReason},on:{"update:visible":function(t){e.showBreakReason=t}}},[t("span",[e._v(e._s(e.breakReason))]),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.showBreakReason=!1}}},[e._v(e._s(e.$t("common_dialogButton_close")))])],1)]),t("el-dialog",{attrs:{title:e.$t("common_operation_record"),width:"70%",visible:e.showSignInRec,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(t){e.showSignInRec=t}}},[t("div",{staticClass:"search"},[t("el-form",{attrs:{model:e.recFormModel,"label-width":"80px"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{xs:12,sm:12,md:12,lg:8,xl:6}},[t("el-form-item",{attrs:{label:"操作类型",prop:"kind"}},[t("el-select",{attrs:{size:"small",clearable:""},model:{value:e.recFormModel.kind,callback:function(t){e.$set(e.recFormModel,"kind",t)},expression:"recFormModel.kind"}},e._l(e.SignstatusOption,(function(e){return t("el-option",{key:e.key,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{xs:12,sm:12,md:12,lg:8,xl:6}},[t("el-form-item",[t("el-button",{staticClass:"sear_btn",attrs:{plain:"",size:"small",icon:"el-icon-search"},on:{click:e.handleRecSearch}},[e._v(e._s(e.$t("com_btn_search")))])],1)],1)],1)],1)],1),t("el-table",{attrs:{data:e.signInRec,border:"","default-sort":e.defaultRecSort}},[t("el-table-column",{attrs:{type:"index",width:"65px",label:e.$t("com_txt_tbIndex")}}),t("el-table-column",{attrs:{label:"座位名",prop:"devName","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"座位类型",prop:"kindName","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"所属区域",prop:"roomName","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{label:"所属楼层",prop:"labName","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"createTime",label:"操作时间",sortable:"",width:"140","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.$moment(t.row.createTime).format("YYYY-MM-DD HH:mm")))]}}])}),t("el-table-column",{attrs:{prop:"consoleKind",label:"操作端",formatter:e.tableconsolekind,align:"center","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"kind",label:"操作类型",formatter:e.tableSignStatus,align:"center","show-overflow-tooltip":""}}),t("el-table-column",{attrs:{prop:"trueName",label:"学工号/姓名","show-overflow-tooltip":"",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n              "+e._s(t.row.logonName)+" / "+e._s(t.row.trueName)+"\r\n          ")]}}])})],1),t("div",{staticClass:"paging"},[t("Paging",{attrs:{pageCount:e.recPageInfo.count},on:{haha:e.changeRecPage}})],1),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:function(t){e.showSignInRec=!1}}},[e._v("关 闭")])],1)],1),e.transResvInfo?t("edit-reserve",{ref:"editResvDialog",attrs:{roomInfo:e.transResvInfo,updateAfter:e.handleUpdateAfter}}):e._e(),e.reserveInfo?t("CopyResvDialog",{attrs:{visible:e.isShowCopyDialog,reserveInfo:e.reserveInfo},on:{"update:visible":function(t){e.isShowCopyDialog=t},reset:e.initTable}}):e._e()],1)}),i=[],l=(n("8e6e"),n("ade3")),c=n("3835"),u=(n("2fdb"),n("581a")),m=n("fa7d"),d=n("2f62"),f=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{staticClass:"dia-style",attrs:{title:e.$t("index_main_profile_EditReserve_dialogTitle"),top:"5vh",visible:e.dialogVisible,width:"750px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[e.roomInfo?t("ResearchInfo",{attrs:{roomInfo:e.roomInfo}}):e._e(),t("div",{staticClass:"data-box"},[t("div",{staticClass:"info-title"},[t("div",{staticClass:"title"},[t("span",{staticClass:"title-label"},[e._v(e._s(e.$t("index_main_profile_ReserveDia_targetName")))]),e._v(": \r\n                        "),t("span",{staticClass:"title-txt"},[e._v(e._s(e.roomInfo.resvDevInfoList[0].devName))])]),t("div",{staticClass:"title"},[t("span",{staticClass:"title-label"},[e._v(e._s(e.$t("index_main_profile_ReserveDia_userInfo")))]),e._v(": \r\n                        "),t("span",{staticClass:"title-txt"},[e._v(e._s("".concat(e.userInfo.trueName," (").concat(e.userInfo.logonName,")")))])]),t("div",{staticClass:"title"},[t("span",{staticClass:"title-label"},[e._v(e._s(e.$t("index_main_profile_ReserveDia_reserveDate")))]),e._v(": \r\n                        "),t("span",{staticClass:"title-txt"},[e._v(e._s(e.reseDate))])])]),t("el-form",{ref:"formRef",staticStyle:{width:"80%"},attrs:{model:e.formData,rules:e.formRules,"label-width":"100px"}},[(1&e.sysConfig.resvTheme)>0?t("el-form-item",{attrs:{label:e.$t("index_main_profile_ReserveDia_theme"),prop:"testName"}},[(1&parseInt(e.sysConfig.resvthemefix))>0?t("el-input",{attrs:{size:"small"},model:{value:e.formData.testName,callback:function(t){e.$set(e.formData,"testName",t)},expression:"formData.testName"}}):t("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:e.$t("common_select_placeholder")},model:{value:e.formData.testName,callback:function(t){e.$set(e.formData,"testName",t)},expression:"formData.testName"}},e._l(e.titleArr,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),t("el-form-item",{attrs:{label:e.$t("index_main_profile_ReserveDia_members")}},[t("el-select",{ref:"sltAccNoRef",staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"",remote:"","reserve-keyword":!1,placeholder:e.$t("common_input_placeholder"),size:"small","remote-method":e.remoteMethod,loading:e.accLoading,"popper-append-to-body":!1},on:{change:e.changeSelect},model:{value:e.selectAccNoList,callback:function(t){e.selectAccNoList=t},expression:"selectAccNoList"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disable}})})),1),t("div",{staticStyle:{"line-height":"12px","font-size":"12px",color:"#cccccc"}},[e._v(e._s("".concat(e.$t("common_confirm_title"),".").concat(e.$t("index_main_profile_ReserveDia_membersTips"))))])],1),t("el-form-item",{attrs:{label:e.$t("index_main_profile_ReserveDia_timeRange")}},[t("el-select",{attrs:{size:"small",placeholder:e.$t("common_select_placeholder")},model:{value:e.formData.start,callback:function(t){e.$set(e.formData,"start",t)},expression:"formData.start"}},e._l(e.checkStartTime,(function(e,n){return t("el-option",{key:n,attrs:{label:e.value,value:e.value}})})),1),e._v(" \r\n                        ~\r\n                        "),t("el-select",{attrs:{size:"small",placeholder:e.$t("common_select_placeholder")},model:{value:e.formData.end,callback:function(t){e.$set(e.formData,"end",t)},expression:"formData.end"}},e._l(e.checkEndTime,(function(e,n){return t("el-option",{key:n,attrs:{label:e.value,value:e.value}})})),1)],1),e.services&&e.services.length>0?t("el-form-item",{attrs:{label:e.$t("index_main_spaceReserve_addService")}},[t("el-select",{staticStyle:{width:"50%"},attrs:{size:"mini",multiple:"",placeholder:e.$t("common_select_placeholder")},model:{value:e.selectedServices,callback:function(t){e.selectedServices=t},expression:"selectedServices"}},e._l(e.services,(function(e){return t("el-option",{key:e.codeValue,attrs:{label:e.codeName,value:e.codeValue}})})),1)],1):e._e()],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",loading:e.submitLoading,size:"small"},on:{click:e.submitBtn}},[e._v(e._s(e.$t("common_dialogButton_submit")))]),t("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("common_dialogButton_cancel")))])],1)],1)],1)},p=[],h=(n("55dd"),n("7f7f"),n("2909")),v=(n("7514"),n("9e17")),_=n("c8d9"),b=n("5063");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(l["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y={components:{ResearchInfo:b["a"]},props:{roomInfo:{type:Object},updateAfter:{type:Function}},data:function(){return{dialogVisible:!1,submitLoading:!1,formData:{resvId:"",testName:"",start:"",end:"",resvMember:[]},titleArr:[],selectAccNoList:[],options:null,accLoading:!1,formRules:{testName:[{required:!0,message:this.$t("index_main_profile_ReserveDia_errMsgTheme"),trigger:"blur"}]},selectedServices:[],services:[]}},created:function(){(1&parseInt(this.sysConfig.resvthemefix))<=0&&this.getTitle()},watch:{roomInfo:{handler:function(e,t){var n=this;e&&(this.formData.resvId=e.resvId,this.formData.testName=e.testName,this.formData.start=this.$moment(e.resvBeginTime).format("HH:mm"),this.formData.end=this.$moment(e.resvEndTime).format("HH:mm"),this.options=[],this.selectAccNoList=[],e.resvMemberInfoList.forEach((function(e){var t=e.accNo,a=e.logonName;e.trueName;n.options.push({value:t,label:a}),n.selectAccNoList.push(t)})),this.services=e.allAddServices,this.selectedServices=[],e.addServices&&Array.isArray(e.addServices)&&e.addServices.forEach((function(e){var t=n.services.find((function(t){return t.codeName===e}));t&&n.selectedServices.push(t.codeValue)})))},immediate:!0},selectAccNoList:{handler:function(e,t){Array.isArray(e)&&(this.formData.resvMember=Object(h["a"])(e))},immediate:!0}},methods:{show:function(){this.dialogVisible=!0},hide:function(){this.dialogVisible=!1},changeSelect:function(e){var t=this;e.some((function(e){return e===t.userInfo.accNo}))||(this.selectAccNoList.unshift(this.userInfo.accNo),this.$message.error(this.$t("index_main_profile_ReserveDia_errMsgDelSelf")))},remoteMethod:function(e){var t=this;""!==e&&(this.accLoading=!0,Object(_["c"])({params:{key:e,page:1,pageNum:10}}).then((function(e){0===e.code?(t.accLoading=!1,t.options=e.data.map((function(e){return e.disable=2===e.localstatus||2===e.status,{value:e.accNo,label:e.logonName,disable:e.disable}}))):t.$message.error(e.message)})))},submitBtn:function(){var e=this;this.formData.resvMember.length>this.roomInfo.maxUser?this.$message({type:"warning",message:this.$t("common_editReserve_tip1",{num:this.roomInfo.maxUser})}):this.formData.resvMember.length<this.roomInfo.minUser?this.$message({type:"warning",message:this.$t("common_editReserve_tip2",{num:this.roomInfo.minUser})}):this.$refs.formRef.validate((function(t){t&&e.editReserve()}))},getTitle:function(){var e=this;Object(v["h"])({params:{codeType:1005}}).then((function(t){0===t.code&&(e.titleArr=t.data.map((function(e){return{label:e.name,value:e.name}})))}))},getCls:function(e,t,n){var a=[],r=n;new Date("2019/07/23 ".concat(r[0].openStartTime))-new Date("2019/07/23 ".concat(e))>0&&a.push({start:this.$moment(new Date("2019/07/23 ".concat(e))).format("YYYY/MM/DD HH:mm"),end:this.$moment(new Date("2019/07/23 ".concat(r[0].openStartTime))).format("YYYY/MM/DD HH:mm")});for(var o=0;o<r.length-1;o++)this.$moment(new Date("2019/07/23 ".concat(r[o].openEndTime))).isBefore(this.$moment(new Date("2019/07/23 ".concat(r[o+1].openStartTime))))&&a.push({start:this.$moment(new Date("2019/07/23 ".concat(r[o].openEndTime))).format("YYYY/MM/DD HH:mm"),end:this.$moment(new Date("2019/07/23 ".concat(r[o+1].openStartTime))).format("YYYY/MM/DD HH:mm")});return new Date("2019/07/23 ".concat(r[r.length-1].openEndTime))-new Date("2019/07/23 ".concat(t))<0&&a.push({start:this.$moment(new Date("2019/07/23 ".concat(r[r.length-1].openEndTime))).format("YYYY/MM/DD HH:mm"),end:this.$moment(new Date("2019/07/23 ".concat(t))).format("YYYY/MM/DD HH:mm")}),a},editReserve:function(){var e=this,t=this.formData,n=t.resvId,a=t.end,r=t.start,o=t.testName,s=t.resvMember,i={resvId:n,resvMember:Object(h["a"])(s),resvBeginTime:this.$moment("".concat(this.reseDate," ").concat(r)).format("YYYY-MM-DD HH:mm:00"),resvEndTime:this.$moment("".concat(this.reseDate," ").concat(a)).format("YYYY-MM-DD HH:mm:00"),testName:o,addServices:this.selectedServices};this.submitLoading=!0,Object(u["d"])(i).then((function(t){0===t.code?(e.$message({type:"success",message:t.message}),e.hide(),e.updateAfter&&e.updateAfter()):e.$message({type:"error",message:t.message}),e.submitLoading=!1}))}},computed:w(w({},Object(d["e"])({userInfo:function(e){return e.userInfo}})),{},{reseDate:function(){return this.$moment(this.roomInfo.resvBeginTime).format("YYYY-MM-DD")},checkTimes:function(){var e=this,t=this.roomInfo,n=t.resvInfo,a=t.openStart,r=t.openEnd,o=t.openTimes,s=n.filter((function(t){return!((128&t.resvStatus)>0)&&t.resvId!==e.formData.resvId})),i=this.getCls(a,r,o),l=[].concat(Object(h["a"])(i),Object(h["a"])(s));if(0===l.length)return[{startTime:"2019/07/23 ".concat(a),endTime:"2019/07/23 ".concat(r)}];for(var c=0;c<l.length;c++){var u=l[c];u.startTime=u.startTime||u.start,u.endTime=u.endTime||u.end,u.startTime=this.$moment(u.startTime).format("2019/07/23 HH:mm"),u.endTime=this.$moment(u.endTime).format("2019/07/23 HH:mm")}l.sort((function(e,t){return new Date(e.startTime)-new Date(t.startTime)}));var m=[];l.length>0&&new Date("".concat(l[0].startTime))-new Date("2019/07/23 ".concat(a))>0&&m.push({startTime:"2019/07/23 ".concat(a),endTime:l[0].startTime});for(var d=0;d<l.length-1;d++)new Date(l[d].endTime)-new Date(l[d+1].startTime)!=0&&m.push({startTime:l[d].endTime,endTime:l[d+1].startTime});return l.length>=1&&new Date(l[l.length-1].endTime)-new Date("2019/07/23 ".concat(r))<0&&m.push({startTime:l[l.length-1].endTime,endTime:"2019/07/23 ".concat(r)}),m},checkStartTime:function(){var e=this;if(this.checkTimes.length>0){var t=this.roomInfo,n=this.reseDate,a=[],r=t.resvRule.timeInterval<=1?1:parseInt(t.resvRule.timeInterval);return this.checkTimes.forEach((function(o){var s=o.startTime,i=o.endTime,l=new Date(s),c=t.resvRule,u=c.latestResvTime,m=c.earliestResvTime,d=e.$moment().add(u,"minutes").format("YYYY/MM/DD HH:mm:ss"),f=e.$moment().add(m,"minutes").format("YYYY/MM/DD HH:mm:ss");while(l-new Date(i)<=0)e.$moment("".concat(n)).format("YYYY/MM/DD")===e.$moment().format("YYYY/MM/DD")||u%1440!==0&&e.$moment(d).format("YYYY/MM/DD")===e.$moment(n).format("YYYY/MM/DD")?e.$moment(d).isSameOrBefore("".concat(e.$moment(d).format("YYYY/MM/DD")," ").concat(e.$moment(l).format("HH:mm")))&&a.push({value:e.$moment(l).format("HH:mm"),max:e.$moment(new Date(i)).format("HH:mm")}):m%1440!==0&&e.$moment(f).format("YYYY/MM/DD")===e.$moment(n).format("YYYY/MM/DD")?e.$moment(f).isAfter("".concat(e.$moment(f).format("YYYY/MM/DD")," ").concat(e.$moment(l).format("HH:mm")))&&a.push({value:e.$moment(l).format("HH:mm"),max:e.$moment(f).format("HH:mm")}):a.push({value:e.$moment(l).format("HH:mm"),max:e.$moment(new Date(i)).format("HH:mm")}),l=+new Date(l)+60*r*1e3})),a}},checkEndTime:function(){var e=this.formData.start,t={};this.checkTimes.forEach((function(n){new Date("2019/07/23 ".concat(e))>=new Date(n.startTime)&&new Date("2019/07/23 ".concat(e))<new Date(n.endTime)&&(t=n)}));var n=this.roomInfo,a=this.reseDate,r=[],o=t.startTime,s=t.endTime,i=n.resvRule.timeInterval<=1?1:parseInt(n.resvRule.timeInterval),l=new Date(o),c=n.resvRule.minResvTime,u=n.resvRule.maxResvTime,m=this.$moment().add(n.resvRule.earliestResvTime,"minutes").format("YYYY-MM-DD HH:mm:ss");while(l-new Date(s)<=0){if(n.resvRule.earliestResvTime%1440!==0&&this.$moment(m).format("YYYY/MM/DD")===this.$moment(a).format("YYYY/MM/DD")&&this.$moment("".concat(this.$moment(m).format("YYYY/MM/DD")," ").concat(this.$moment(l).format("HH:mm"))).isAfter(this.$moment(m).add(u,"minutes")))break;l-new Date(+new Date("2019/07/23 ".concat(e))+60*c*1e3)<0?l=+new Date(l)+60*i*1e3:(l-new Date(+new Date("2019/07/23 ".concat(e))+60*u*1e3)>0||r.push({value:this.$moment(l).format("HH:mm")}),l=+new Date(l)+60*i*1e3)}return r}})},D=y,$=(n("ea1e"),n("2877")),S=Object($["a"])(D,f,p,!1,null,"035eec20",null),x=S.exports,R=function(){var e=this,t=e._self._c;return t("el-dialog",{staticClass:"copyresv-dialog",attrs:{title:e.$t("index_main_seatForm_title"),visible:e.dialogVisible,"close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"data-box"},[t("el-form",{ref:"formRef",attrs:{model:e.formData,"label-width":"80px"}},[t("el-form-item",{attrs:{label:e.$t("index_main_seatForm_targetName")}},[e._v("\r\n          "+e._s(e.reserveInfo.labName)),t("span",{staticClass:"info-tip"},[e._v("（楼）")]),1!==this.sysKind?[e._v("\r\n            "+e._s(e.reserveInfo.roomName)),t("span",{staticClass:"info-tip"},[e._v("（区）")])]:e._e(),e._v("\r\n          "+e._s(e.reserveInfo.devName)),t("span",{staticClass:"info-tip"},[e._v(e._s(1!==e.sysKind?"（座）":"（室）"))])],2),t("el-form-item",{attrs:{label:e.$t("index_main_seatForm_applicant")}},[e._v("\r\n          "+e._s(e.userInfo.trueName)+" ("),t("span",[e._v(e._s(e.userInfo.logonName))]),e._v(")\r\n        ")]),1===e.reserveInfo.classKind&&e.reserveInfo.resvMemberInfoList?t("el-form-item",{attrs:{label:"组成员"}},[e._v("\r\n          "+e._s(e._f("filterMemberInfo")(e.reserveInfo.resvMemberInfoList))+"\r\n        ")]):e._e(),e.isShowTheme?t("el-form-item",{attrs:{label:"主题",required:e.isThemeMust}},[t("el-input",{attrs:{size:"small",placeholder:"请输入预约主题"},model:{value:e.formData.title,callback:function(t){e.$set(e.formData,"title",t)},expression:"formData.title"}})],1):e._e(),"time"==e.type?t("el-form-item",{attrs:{label:"申请时间"}},[t("el-date-picker",{staticStyle:{width:"150px"},attrs:{type:"date",size:"small",placeholder:"选择日期","value-format":"yyyy-MM-dd",format:"yyyy-MM-dd","picker-options":e.pickerOptions},model:{value:e.formData.dateValue,callback:function(t){e.$set(e.formData,"dateValue",t)},expression:"formData.dateValue"}}),t("span",{staticStyle:{"font-weight":"400","font-size":"14px","margin-left":"10px"}},[e._v(e._s("".concat(e.formData.beginTime," - ").concat(e.formData.endTime)))])],1):e._e(),"date"==e.type?t("el-form-item",{attrs:{label:"申请时间"}},[t("el-date-picker",{staticStyle:{width:"150px"},attrs:{type:"date",size:"small",placeholder:"开始日期","value-format":"yyyy-MM-dd",format:"yyyy-MM-dd","picker-options":e.pickerOptions},model:{value:e.formData.startDate,callback:function(t){e.$set(e.formData,"startDate",t)},expression:"formData.startDate"}}),e._v("\r\n          ~\r\n          "),t("el-date-picker",{staticStyle:{width:"150px"},attrs:{type:"date",size:"small",placeholder:"结束日期","value-format":"yyyy-MM-dd",format:"yyyy-MM-dd","picker-options":{disabledDate:function(t){var n=new Date(e.formData.startDate);return t.getTime()<=n.getTime()-864e5}}},model:{value:e.formData.endDate,callback:function(t){e.$set(e.formData,"endDate",t)},expression:"formData.endDate"}})],1):e._e(),e.isShowMemo?t("el-form-item",{attrs:{label:e.$t("index_main_seatForm_description"),prop:"memo"}},[t("el-input",{staticClass:"mt10",attrs:{type:"textarea",placeholder:e.spaceDescription,maxlength:parseInt(e.sysConfig.resvmemolen),"show-word-limit":""},model:{value:e.formData.memo,callback:function(t){e.$set(e.formData,"memo",t)},expression:"formData.memo"}})],1):e._e()],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",size:"small",loading:e.submitLoading},on:{click:e.handleSubmit}},[e._v(e._s(e.$t("common_dialogButton_submit")))]),t("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("common_dialogButton_cancel")))])],1)])},k=[],O=(n("28a5"),n("7d13"));function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){Object(l["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T={name:"CopyResvDialog",props:{visible:{type:Boolean,default:!1},reserveInfo:{type:Object,default:function(){return{}}},type:{type:String,default:"time"}},data:function(){return{dialogVisible:!1,submitLoading:!1,formData:{title:"",dateValue:"",beginTime:"",endTime:"",startDate:"",endDate:""},spaceDescription:"",pickerOptions:{disabledDate:function(e){return e.getTime()<=Date.now()-864e5}}}},computed:I(I({},Object(d["e"])(["userInfo"])),{},{sysKind:function(){return this.reserveInfo.classKind},isShowTheme:function(){return(this.sysConfig.resvTheme&this.sysKind)>0},isThemeMust:function(){return(this.sysConfig.resvthememust&this.sysKind)>0},isShowMemo:function(){return(this.sysConfig.resvmemo&this.sysKind)>0}}),watch:{visible:{handler:function(e){this.dialogVisible=e||!1},immediate:!0},dialogVisible:function(e){e||this.$emit("update:visible",!1)},reserveInfo:{handler:function(e){e&&(this.formData.title=e.testName,"time"===this.type?(this.formData.beginTime=this.$moment(e.resvBeginTime).format("HH:mm"),this.formData.endTime=this.$moment(e.resvEndTime).format("HH:mm"),this.formData.dateValue=Object(m["k"])(this.$moment(e.resvBeginTime).format("YYYY/MM/DD"))):"date"===this.type&&(this.formData.startDate=e.resvBeginTime,this.formData.endDate=e.resvEndTime))},immediate:!0,deep:!0},"$i18n.locale":{handler:function(e,t){if(this.isShowMemo){var n=this.sysConfig.resvmemotip||"",a=n.split("^");a.length>1?this.spaceDescription="en"===e?a[1]:a[0]:this.spaceDescription=a[0]}},immediate:!0}},filters:{filterMemberInfo:function(e){if(!e||!Array.isArray(e))return"";var t=e.reduce((function(e,t){return e+", "+t.trueName}),"");return t.substr(1)}},methods:{handleSubmit:function(){var e=this,t="",n="";"time"===this.type?(t="".concat(this.formData.dateValue," ").concat(this.formData.beginTime,":00"),n="".concat(this.formData.dateValue," ").concat(this.formData.endTime,":00")):"date"===this.type&&(t=this.formData.startDate===this.$moment().format("YYYY-MM-DD")?"".concat(this.formData.startDate," ").concat(this.$moment().add(1,"minutes").format("HH:mm"),":00"):"".concat(this.formData.startDate," 00:00:00"),n="".concat(this.formData.endDate," 23:59:00"));var a=[this.userInfo.accNo];this.reserveInfo.resvMemberInfoList&&(a=this.reserveInfo.resvMemberInfoList.map((function(e){return e.accNo}))),Object(O["j"])({sysKind:this.reserveInfo.classKind,appAccNo:this.userInfo.accNo,memberKind:1,resvMember:a,resvBeginTime:t,resvEndTime:n,testName:this.formData.title,resvProperty:0,resvDev:[this.reserveInfo.devId],memo:this.formData.memo}).then((function(t){0===t.code?(e.$emit("reset",""),e.dialogVisible=!1,e.$message.success(t.message)):e.$message.error(t.message),e.submitLoading=!1}))}}},M=T,E=(n("9ffe"),Object($["a"])(M,R,k,!1,null,"44287c9d",null)),j=E.exports,Y=n("036a");function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){Object(l["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A={components:{EditReserve:x,CopyResvDialog:j,Paging:Y["a"]},data:function(){return this.SignstatusOption=[{label:this.$t("const_PcServe_text3"),value:1},{label:this.$t("const_PcServe_text5"),value:2},{label:this.$t("const_seatreserve_text1"),value:4},{label:this.$t("const_seatreserve_text2"),value:8},{label:this.$t("const_seatreserve_text3"),value:16},{label:this.$t("const_seatreserve_text4"),value:32},{label:this.$t("const_seatreserve_text5"),value:64},{label:this.$t("const_seatreserve_text6"),value:128}],this.consoleKindOption=[{label:"系统",value:1},{label:"二维码",value:2},{label:"手机端",value:4},{label:"闸机",value:8},{label:"电脑端",value:16},{label:"现场预约台",value:32},{label:"管理员",value:64}],this.statusOption=[{label:this.$t("common_reserveStatus_success"),value:1},{label:this.$t("common_reserveStatus_notEffect"),value:2},{label:this.$t("common_reserveStatus_effective"),value:4},{label:this.$t("common_reserveStatus_unPaid"),value:8},{label:this.$t("common_reserveStatus_paid"),value:32},{label:this.$t("common_reserveStatus_checking"),value:256},{label:this.$t("common_reserveStatus_auditFailed"),value:512},{label:this.$t("common_reserveStatus_auditPass"),value:1024},{label:this.$t("common_reserveStatus_signedIn"),value:64},{label:this.$t("common_reserveStatus_temporarily"),value:2048},{label:this.$t("common_reserveStatus_signOff"),value:4096},{label:this.$t("common_reserveStatus_finished"),value:128},{label:this.$t("common_reserveStatus_breakedPromise"),value:16}],this.otherCheckKey={notSignOff:1},{isStatusCkDisabled:!1,search:{date:[this.$moment().startOf("week").format("YYYY-MM-DD"),this.$moment().endOf("week").format("YYYY-MM-DD")],check:[2,4,256],otherCheck:[]},tableList:[],pageDate:{page:1,pageNum:10,count:null},tableData:[],handledelete:!1,userInfos:"",showBreakReason:!1,breakReason:"",transResvInfo:null,isShowCopyDialog:!1,reserveInfo:null,signInRec:[],showSignInRec:!1,recFormModel:{kind:""},currentRow:null,recLoading:!1,recPageInfo:{pageNum:1,pageSize:10,count:0},recOrderInfo:{orderKey:"createTime",orderModel:"desc"}}},watch:{"search.otherCheck":{handler:function(e){e.includes(this.otherCheckKey.notSignOff)?(this.search.check=[],this.isStatusCkDisabled=!0):(this.search.check=[2,4,256],this.isStatusCkDisabled=!1)}}},methods:{isShowDropdown:function(e){return this.showDelResv(e)||this.showBreakRea(e)||this.isShowCopyReserveBtn||8===e.classKind||this.showStatus(e)},showBreakRea:function(e){return(512&e.resvStatus)>0},showEditResv:function(e){return 1==e.classKind&&(256&e.resvStatus)>0&&e.appAccNo===this.userInfos.accNo},isShowCancel:function(e){return e&&(4&e.resvStatus)<=0&&(128&e.resvStatus)<=0&&this.userInfos.logonName==e.logonName},showDelResv:function(e){return!this.isCloseEndEarly&&(e&&e.endEarly&&this.userInfo.accNo===e.appAccNo)},showStatus:function(e){return!(this.isZju||Array.isArray(e.resvDevInfoList)&&e.resvDevInfoList.length>0&&8!==e.resvDevInfoList[0].classKind)&&(!this.isCloseTempleave&&!this.isSeatHideTempleave&&((4&e.resvStatus)>0&&(128&e.resvStatus)<=0&&(2048&e.resvStatus)<=0&&e.appAccNo===this.userInfo.accNo))},handleSearch:function(){this.isStatusCkDisabled?this.getResvEndList():this.initTable()},handleEdit:function(e){this.getResvRule(e)},handleDetail:function(e){this.$refs.tableRef.toggleRowExpansion(e)},handleover:function(e){var t=this;this.$confirm("提前结束后，座位将不能继续使用，确认提前结束么?",this.$t("common_confirm_title"),{confirmButtonText:this.$t("common_confirm_cfmBtnTxt"),cancelButtonText:this.$t("common_confirm_cancelBtnTxt"),type:"warning"}).then((function(){var n=e.uuid;Object(u["u"])({params:{uuid:n}}).then((function(e){0===e.code?t.$confirm("提前结束成功",t.$t("common_confirm_title"),{confirmButtonText:t.$t("common_confirm_cfmBtnTxt"),callback:function(e){t.initTable()}}):t.$message({type:"error",message:e.message})}))})).catch((function(){}))},handleStatus:function(e){var t=this;this.$confirm("确认暂时离开么?",this.$t("common_confirm_title"),{confirmButtonText:this.$t("common_confirm_cfmBtnTxt"),cancelButtonText:this.$t("common_confirm_cancelBtnTxt")}).then((function(){var n=e.resvId,a={resvId:n};Object(u["z"])(a).then((function(e){if(0===e.code){var n=e.data;t.$confirm("需要在".concat(n," 分钟内返回, 否则判为违约"),e.message,{}).then((function(e){t.initTable()}))}else t.$message({message:e.message,type:"error"})}))})).catch((function(){}))},initTable:function(){var e=this;Object(u["p"])({params:this.searchDate}).then((function(t){0===t.code?(e.tableData=t.data,e.pageDate.count=t.count,e.userInfos=e.userInfo):e.$message.error(t.message)}))},getResvEndList:function(){var e=this;Object(u["r"])().then((function(t){0===t.code?e.tableData=t.data:e.$message({type:"error",message:t.message})}))},handleSignOff:function(e){var t=this;this.$confirm("确认签离么?",this.$t("common_confirm_title"),{confirmButtonText:this.$t("common_confirm_cfmBtnTxt"),cancelButtonText:this.$t("common_confirm_cancelBtnTxt")}).then((function(){var n=e.resvId;t.postEndReserve(n)})).catch((function(){}))},postEndReserve:function(e){var t=this;Object(u["v"])({resvId:e}).then((function(e){0===e.code?(t.handleSearch(),t.$message({type:"success",message:e.message})):t.$message({type:"error",message:e.message})}))},getTableStatus:function(e){var t=Object(m["b"])(e.resvStatus,this.statusOption),n=this.statusOption.filter((function(e){return t.includes(e.value)}));return n},getColor:function(e){var t=e.value,n="";switch(t){case 2:n="primary";break;case 4:n="info";break;case 256:n="warning";break;case 128:n="finish";break;case 16:n="danger";break;case 4096:n="yellow";break}return n},tableKind:function(e,t){return 1===e.memberKind?"个人预约":2===e.memberKind?"团体预约":void 0},tableStatus:function(e,t){var n=Object(m["b"])(e.resvStatus,this.statusOption),a=this.statusOption.filter((function(e){return n.includes(e.value)})),r="";return a.forEach((function(e){r=r?r+"\n":r,r+=e.label})),r},handleSizeChange:function(e){this.pageDate.pageNum=e,this.initTable()},handleCurrentChange:function(e){this.pageDate.page=e,this.initTable()},handleDelete:function(e){var t=this;this.$confirm(this.$t("index_main_profile_confirmBox_text"),this.$t("common_confirm_title"),{confirmButtonText:this.$t("common_confirm_cfmBtnTxt"),cancelButtonText:this.$t("common_confirm_cancelBtnTxt"),type:"warning"}).then((function(){Object(u["a"])({params:{uuid:e.uuid}}).then((function(e){0===e.code?(t.$message.success(e.message),t.initTable()):t.$message.error(e.message)}))})).catch((function(){}))},handleWhyBreak:function(e){e.checkInfo?this.breakReason=e.checkInfo:this.breakReason=this.$t("index_main_profile_dialogTitle_noFailureReason"),this.showBreakReason=!0},handleCopy:function(e){if(!e.resvDevInfoList||!Array.isArray(e.resvDevInfoList)||e.resvDevInfoList.length<=0)this.$message({type:"info",message:"设备信息不存在, 不能复制"});else{var t=e.resvDevInfoList[0],n=t.labName,a=t.roomName,r=t.devName,o=t.devId;this.reserveInfo={testName:e.testName,resvBeginTime:e.resvBeginTime,resvEndTime:e.resvEndTime,labName:n,roomName:a,devName:r,devId:o,memo:e.memo,classKind:e.classKind,resvMemberInfoList:e.resvMemberInfoList,tempLeaveEndTime:e.tempLeaveEndTime},this.isShowCopyDialog=!0}},handleUpdateAfter:function(){this.initTable()},getResvRule:function(e){var t=this,n=e.classKind,a=e.resvDate,r=Object(c["a"])(e.resvDevInfoList,1),o=r[0].devId,s={devIds:o,resvDates:a,sysKind:n};Object(u["s"])({params:s}).then((function(n){if(0==n.code){var a=n.data.length>0?n.data[0]:{},r=a.maxUser,o=a.minUser,s=a.openTimes,i=a.openStart,l=a.openEnd,c=a.resvRule,u=a.resvInfo,m=a.addServices;t.transResvInfo=Object.assign(P({},e),{maxUser:r,minUser:o,openTimes:s,openStart:i,openEnd:l,resvRule:c,resvInfo:u},{allAddServices:m}),t.$nextTick((function(){t.$refs.editResvDialog.show()}))}else t.$message({type:"error",message:n.message})}))},changeRecPage:function(e){var t=e.page,n=e.pageNum;this.recPageInfo.pageNum=t,this.recPageInfo.pageSize=n,this.handleSignInRec(this.currentRow)},handleRecSearch:function(){this.handleSignInRec(this.currentRow)},handleSignInRec:function(e){var t=this;this.currentRow=e;var n=e.resvId,a=this.recPageInfo,r=a.pageNum,o=a.pageSize,s=this.recOrderInfo,i=s.orderKey,l=s.orderModel,c=this.recFormModel.kind;this.showSignInRec=!0;var m={resvId:n,pageNum:r,pageSize:o,orderKey:i,orderModel:l};c&&(m["kind"]=c),this.recLoading=!0,Object(u["t"])({params:m}).then((function(e){0===e.code?(t.signInRec=e.data,t.recPageInfo.count=e.count):t.$message({type:"error",message:e.message}),t.recLoading=!1}))},tableSignStatus:function(e,t){var n=Object(m["b"])(e.kind,this.SignstatusOption),a=this.SignstatusOption.filter((function(e){return n.includes(e.value)})),r="";return a.forEach((function(e){r=r+" "+e.label})),r},tableconsolekind:function(e,t){var n=Object(m["b"])(e.consoleKind,this.consoleKindOption),a=this.consoleKindOption.filter((function(e){return n.includes(e.value)})),r="";return a.forEach((function(e){r=r+" "+e.label})),r}},created:function(){this.initTable()},computed:P({isCloseTempleaveAndEndEarly:function(){return window.g.isCloseTempleaveAndEndEarly},isCloseTempleave:function(){return window.g.isCloseTempleave},isCloseEndEarly:function(){return window.g.isCloseEndEarly},isSeatHideTempleave:function(){return window.g.isSeatHideTempleave},checkOption:function(){return[{label:this.$t("common_reserveStatus_notEffect"),value:2},{label:this.$t("common_reserveStatus_effective"),value:4},{label:this.$t("common_reserveStatus_breakedPromise"),value:16},{label:this.$t("common_reserveStatus_finished"),value:128},{label:this.$t("common_reserveStatus_checking"),value:256},{label:this.$t("common_reserveStatus_auditFailed"),value:512},{label:this.$t("common_reserveStatus_auditPass"),value:1024},{label:this.$t("common_reserveStatus_temporarily"),value:2048}]},otherCheckOption:function(){return[{label:this.$t("common_reserveStatus_beSignOff"),value:this.otherCheckKey.notSignOff}]},searchDate:function(){var e=null;this.search.check.forEach((function(t){e+=t}));var t={beginDate:this.search.date[0],endDate:this.search.date[1],needStatus:e,page:this.pageDate.page,pageNum:this.pageDate.pageNum,orderKey:"gmt_create",orderModel:"desc"};return t},isShowCopyReserveBtn:function(){return window.g.isShowCopyReserveBtn},defaultRecSort:function(){return{prop:this.recOrderInfo.orderKey,order:"desc"==this.recOrderInfo.orderModel?"descending":"ascending"}}},Object(d["e"])({userInfo:function(e){return e.userInfo}})),filters:{filterEndRealTime:function(e,t){return e?t(e).format("YYYY-MM-DD HH:mm"):"未结束"},filterMember:function(e){if(!Array.isArray(e)||e.length<=0)return"";if(1===e.length)return e[0].trueName;var t=e.map((function(e){return e.trueName}));return t.join("，")}}},B=A,L=(n("5814"),Object($["a"])(B,s,i,!1,null,"632c9bd6",null)),z=L.exports,H=function(){var e=this,t=e._self._c;return t("div",[t("el-table",{staticClass:"tableStyle",staticStyle:{width:"100%"},attrs:{stripe:"",border:"",data:e.tableData}},[t("el-table-column",{attrs:{align:"center",label:e.$t("index_main_profile_CreditDetail_tableCol1"),prop:"gmtCreate",formatter:e.dataFormat}}),t("el-table-column",{attrs:{align:"center",label:e.$t("index_main_profile_CreditDetail_tableCol2"),prop:"devName"}}),t("el-table-column",{attrs:{align:"center",label:e.$t("index_main_profile_CreditDetail_tableCol3"),prop:"creditKindName"}}),t("el-table-column",{attrs:{align:"center",label:e.$t("index_main_profile_CreditDetail_tableCol4"),prop:"memo"}}),t("el-table-column",{attrs:{align:"center",label:e.$t("index_main_profile_CreditDetail_tableCol5"),prop:"status"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\r\n          "+e._s(1===t.row.status?e.$t("index_main_profile_CreditDetail_status1"):e.$t("index_main_profile_CreditDetail_status2"))+"\r\n        ")]}}])}),t("el-table-column",{attrs:{align:"center",label:e.$t("index_main_profile_CreditDetail_tableCol6"),prop:"thisUseScore"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(e._s(e.isZju?"".concat(Math.ceil(n.thisUseScore/100)):n.thisUseScore))]}}])})],1),t("div",{staticClass:"page"},[t("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[5,10,20,25,100],"current-page":e.pageDate.page,"page-size":e.pageDate.pageNum,total:e.pageDate.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},U=[],F={name:"CreditDetails",data:function(){return{tableData:[],pageDate:{page:1,pageNum:10,count:null},reason:!1}},methods:{getData:function(){var e=this;Object(u["i"])({params:{page:this.pageDate.page,pageNum:this.pageDate.pageNum}}).then((function(t){0===t.code&&t.data?(e.pageDate.count=t.count,t.data.map((function(e){e.memo||(e.memo="无")})),e.tableData=t.data):e.$message.error(t.message)}))},dataFormat:function(e){return this.$moment(e.gmtCreate).format("YYYY-MM-DD HH:mm:ss")},handleSizeChange:function(e){this.pageDate.pageNum=e,this.getData()},handleCurrentChange:function(e){this.pageDate.page=e,this.getData()}},created:function(){this.getData()}},K=F,q=(n("7d51"),Object($["a"])(K,H,U,!1,null,"53f4ef32",null)),V=q.exports,W=function(){var e=this,t=e._self._c;return t("div",[e.userInfo?t("div",{staticClass:"userCon"},[t("div",{staticClass:"title"},[e._v(e._s(e.$t("index_main_profile_UserInfo_title")))]),t("div",{staticClass:"formbox"},[t("el-form",{ref:"form",attrs:{model:e.formData,"label-width":"130px"}},[t("el-form-item",{attrs:{label:"".concat(e.$t("index_main_profile_UserInfo_name")," :")}},[e._v(e._s(e.userInfo.trueName))]),t("el-form-item",{attrs:{label:"".concat(e.$t("index_main_profile_UserInfo_account")," :")}},[e._v(e._s(e.userInfo.logonName))]),t("el-form-item",{attrs:{label:"".concat(e.$t("index_main_profile_UserInfo_department")," :")}},[e._v(e._s(e.userInfo.deptName))]),"1"===e.sysConfig.userCredit?t("el-form-item",{attrs:{label:e.isZju?"违约剩余次数 :":"".concat(e.$t("index_main_profile_UserInfo_creditScore")," :")}},[[e.isObject?t("div",[e.numberArr?e._l(e.numberArr,(function(n,a){return t("p",{key:a},[e._v(e._s(n))])})):t("span",[e._v("无")])],2):t("p",[e._v(e._s(e.$t("index_main_profile_UserInfo_shengyu"))+": "+e._s(e.isZju?"".concat(Math.floor(e.number/100)," 次"):"".concat(e.number," ").concat(e.$t("index_main_profile_UserInfo_fen"))))])]],2):e._e(),t("el-form-item",{staticStyle:{width:"40%"},attrs:{label:"".concat(e.$t("index_main_profile_UserInfo_telNumber")," :"),prop:"phone"}},[t("div",{staticClass:"edit-wrapper"},[t("div",[e.editPhone?t("el-input",{attrs:{placeholder:e.$t("index_main_profile_UserInfo_inputTelNumber"),size:"small"},model:{value:e.formData.phone,callback:function(t){e.$set(e.formData,"phone",t)},expression:"formData.phone"}}):t("span",[e._v(e._s(e.handPhone))])],1),t("div",{staticClass:"button-wrapper"},[e.editPhone?t("div",[t("span",{on:{click:function(t){e.editPhone=!1}}},[e._v(e._s(e.$t("common_button_cancel")))]),t("span",{on:{click:function(t){return e.handleSave("handPhone")}}},[e._v(e._s(e.$t("common_button_save")))])]):t("span",{on:{click:function(t){return e.handleEdit("handPhone")}}},[e._v(e._s(e.$t("common_button_edit")))])])])]),t("el-form-item",{staticStyle:{width:"40%"},attrs:{label:"".concat(e.$t("index_main_profile_UserInfo_email")," :"),prop:"email"}},[t("div",{staticClass:"edit-wrapper"},[t("div",[e.editEmail?t("el-input",{attrs:{placeholder:e.$t("index_main_profile_UserInfo_inputEmail"),size:"small"},model:{value:e.formData.email,callback:function(t){e.$set(e.formData,"email",t)},expression:"formData.email"}}):t("span",[e._v(e._s(e.email))])],1),t("div",{staticClass:"button-wrapper"},[e.editEmail?t("div",[t("span",{on:{click:function(t){e.editEmail=!1}}},[e._v(e._s(e.$t("common_button_cancel")))]),t("span",{on:{click:function(t){return e.handleSave("email")}}},[e._v(e._s(e.$t("common_button_save")))])]):t("span",{on:{click:function(t){return e.handleEdit("email")}}},[e._v(e._s(e.$t("common_button_edit")))])])])]),e.isUseCloudMessage?t("el-form-item",{staticStyle:{width:"40%"},attrs:{label:"".concat(e.$t("index_main_profile_UserInfo_bindAccount")," :")}},[t("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){e.isShowDialog=!0}}},[e._v(e._s(e.$t("index_main_profile_UserInfo_btn_bindAccount")))])],1):e._e()],1)],1)]):e._e(),t("BindAccountDialog",{model:{value:e.isShowDialog,callback:function(t){e.isShowDialog=t},expression:"isShowDialog"}})],1)},Z=[],G=n("53ca"),J=(n("96cf"),n("1da1")),Q=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{visible:e.isVisible,"append-to-body":"","modal-append-to-body":"","close-on-click-modal":!1,width:e.width,center:"","custom-class":"inline-dialog"},on:{"update:visible":function(t){e.isVisible=t}}},[t("div",{staticClass:"code-container",staticStyle:{display:"flex","justify-content":"center","align-items":"center","flex-direction":"column","user-select":"none"}},[t("p",{staticStyle:{"margin-bottom":"20px"}},[e._v("请使用微信手机端扫描")]),t("div",{ref:"qrcodeRef",staticStyle:{"text-align":"center"}}),t("p",{staticStyle:{"margin-top":"20px",color:"#f00","font-size":"12px","line-height":"1.2","text-align":"center"}},[e._v("* 公众号内点击【"),t("img",{attrs:{src:n("bf46"),width:"40%"}}),e._v("】关注才能成功接受消息")])])])},X=[],ee=n("d044"),te=n.n(ee);function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){Object(l["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var re={name:"BindAccountDialog",data:function(){return{isVisible:!1,qrcode:null}},computed:ae({},Object(d["e"])(["userInfo"])),props:{isShowDialog:{type:Boolean,default:!1},width:{type:String,default:"240px"}},model:{prop:"isShowDialog",event:"update:isShowDialog"},watch:{isShowDialog:{handler:function(e){this.isVisible!==e&&(this.isVisible=e)},immediate:!0},isVisible:{handler:function(e){if(e!==this.isShowDialog&&this.$emit("update:isShowDialog",e),e)if(this.qrcode){var t=this.getQrText();this.qrcode.clear(),this.qrcode.makeCode(t)}else this.generateQrcode()},immediate:!0}},methods:{generateQrcode:function(){var e=this;this.$nextTick((function(){var t=e.getQrText();e.qrcode=new te.a(e.$refs.qrcodeRef,{width:140,height:140,text:t,correctLevel:te.a.CorrectLevel.L})}))},getQrText:function(){var e=location.protocol+"//"+location.hostname+(location.port?":"+location.port:"");return"".concat(e,"/mobile.html#/bindAccount/").concat(this.userInfo.logonName)}}},oe=re,se=(n("c357"),Object($["a"])(oe,Q,X,!1,null,"270a18ae",null)),ie=se.exports,le={components:{BindAccountDialog:ie},data:function(){var e=this;return this.localeSysKind=[{label:this.$t("index_main_sidebar_spaceReserve"),value:1},{label:this.$t("index_main_profile_readroom"),value:2},{label:"外借设备 ",value:4},{label:this.$t("index_main_sidebar_seatReserve"),value:8},{label:this.$t("index_main_sidebar_activity"),value:16},{label:this.$t("index_main_profile_examOrder"),value:32}],{formData:{phone:"",email:""},handPhone:"",email:"",editPhone:!1,editEmail:!1,number:"",rules:{phone:[{validator:function(t,n,a){""==n?a(new Error(e.$t("index_main_profile_UserInfo_inputTelNumber"))):/^(?:(?:\+|00)86)?1[3-9]\d{9}$/.test(n)?a():a(new Error(e.$t("index_main_profile_UserInfo_inputRightTelNumber")))},trigger:"blur"}],email:[{validator:function(t,n,a){""==n?a(new Error(e.$t("index_main_profile_UserInfo_inputEmail"))):/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(n)?a():a(new Error(e.$t("index_main_profile_UserInfo_inputRightEmail")))},trigger:"blur"}]},isShowDialog:!1}},methods:{handleEdit:function(e){"handPhone"===e?(this.editPhone=!0,this.formData.phone=this.handPhone):(this.editEmail=!0,this.formData.email=this.email)},patchInfo:function(e){var t=this;return new Promise((function(n,a){Object(u["c"])(e).then((function(e){0===e.code?(t.$message.success(e.message),n(e)):(t.$message.error(e.message),a(e))}))}))},setInfo:function(){var e=this;return new Promise((function(t){Object(u["l"])().then((function(n){if(0===n.code){var a=n.data,r=a.handPhone,o=a.email;e.$store.commit("setUserInfo",Object.assign({},e.userInfo,{handPhone:r,email:o})),e.handPhone=e.userInfo.handPhone,e.email=e.userInfo.email}else e.$message.error(n.message);t(n)}))}))},handleSave:function(){var e=Object(J["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("handPhone"!==t){e.next=8;break}return e.next=3,this.patchInfo({handPhone:this.formData.phone});case 3:return e.next=5,this.setInfo();case 5:this.editPhone=!1,e.next=13;break;case 8:return e.next=10,this.patchInfo({email:this.formData.email});case 10:return e.next=12,this.setInfo();case 12:this.editEmail=!1;case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},computed:{userInfo:function(){return this.$store.state.userInfo},isObject:function(){return!!this.number&&"object"==Object(G["a"])(this.number)},isUseCloudMessage:function(){return 1==this.sysConfig.useCloudMessage},numberArr:function(){var e=this;if(!this.isObject)return"";var t=this.localeSysKind.filter((function(t){return e.hasModule(t.value)}));if(!t)return"";var n={},a=Object(h["a"])(t),r=function(t){if(!Object.prototype.hasOwnProperty.call(e.number,t))return"continue";a.forEach((function(a){a.value&t&&(e.isZju?n[a.value]="".concat(a.label," ").concat(e.$t("index_main_profile_UserInfo_shengyu")," ").concat(Math.floor(e.number[t]/100)," 次"):n[a.value]="".concat(a.label," ").concat(e.$t("index_main_profile_UserInfo_shengyu")," ").concat(e.number[t]," ").concat(e.$t("index_main_profile_UserInfo_fen")))}))};for(var o in this.number)r(o);return n}},created:function(){var e=this;Object(u["j"])().then((function(t){0===t.code?e.number=t.data:e.$message.error(t.message)})),this.handPhone=this.userInfo.handPhone,this.email=this.userInfo.email}},ce=le,ue=(n("0991"),Object($["a"])(ce,W,Z,!1,null,"2636e394",null)),me=ue.exports,de=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"search"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.search,"label-width":"auto"}},[t("el-form-item",{attrs:{label:e.$t("index_main_profile_common_dateRange")}},[t("el-date-picker",{attrs:{type:"daterange","range-separator":e.$t("index_main_profile_common_sep"),"start-placeholder":e.$t("index_main_profile_common_start"),"end-placeholder":e.$t("index_main_profile_common_end"),size:"small",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.search.date,callback:function(t){e.$set(e.search,"date",t)},expression:"search.date"}})],1),t("el-form-item",[t("el-checkbox-group",{model:{value:e.search.check,callback:function(t){e.$set(e.search,"check",t)},expression:"search.check"}},e._l(e.chekcOption,(function(n){return t("el-checkbox",{key:n.value,attrs:{label:n.value}},[e._v(e._s(n.label))])})),1)],1),t("el-form-item",{staticStyle:{float:"right","margin-right":"20px"}},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.initTable}},[e._v(e._s(e.$t("common_button_search")))])],1)],1)],1),t("div",{staticClass:"table-con"},[t("el-table",{staticClass:"tableStyle",staticStyle:{width:"100"},attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{label:e.$t("index_main_profile_Activity_tableCol1"),align:"center",prop:"resvId"}}),t("el-table-column",{attrs:{label:e.$t("index_main_profile_Activity_tableCol2"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("p",[e._v(e._s(n.row.roomName))])]}}])}),t("el-table-column",{attrs:{label:e.$t("index_main_profile_Activity_tableCol3"),align:"center",prop:"reserveInfo.applyName"}}),t("el-table-column",{attrs:{label:e.$t("index_main_profile_Activity_tableCol4"),align:"center","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("p",[e._v(e._s(e.$t("index_main_profile_common_tableStart"))+": "+e._s(e.$moment(n.row.reserveInfo.resvBeginTime).format("MM-DD HH:mm")))]),t("p",[e._v(e._s(e.$t("index_main_profile_common_tableEnd"))+": "+e._s(e.$moment(n.row.reserveInfo.resvEndTime).format("MM-DD HH:mm")))])]}}])}),t("el-table-column",{attrs:{label:e.$t("index_main_profile_Activity_tableCol5"),align:"center",prop:"resvStatus",formatter:e.handleStatus}}),t("el-table-column",{attrs:{label:e.$t("index_main_profile_Activity_tableCol6"),align:"center",prop:"gmtCreate","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.$moment(t.row.gmtCreate).format("YYYY-MM-DD HH:mm:ss")))]}}])}),t("el-table-column",{attrs:{label:e.$t("index_main_profile_PerAppoint_tableCol9"),align:"center","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("el-dropdown",{directives:[{name:"show",rawName:"v-show",value:e.isShowReserveCancel(n.row)||e.isShowUnpassReason(n.row),expression:"isShowReserveCancel(scope.row) || isShowUnpassReason(scope.row)"}]},[t("el-button",{attrs:{type:"primary",size:"mini"}},[e._v(e._s(e.$t("commont_button_moreFun"))),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",[e.isShowReserveCancel(n.row)?t("el-button",{staticStyle:{color:"red"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.handleDelete(n.row)}}},[e._v(e._s(e.$t("common_button_reserveCancel")))]):e._e()],1),t("el-dropdown-item",[e.isShowUnpassReason(n.row)?t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleWhyBreak(n.row)}}},[e._v(e._s(e.$t("common_button_unpassReason")))]):e._e()],1)],1)],1)]}}])})],1)],1),t("div",{staticClass:"page"},[t("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[5,10,20,25,100],"current-page":e.pageDate.page,"page-size":e.pageDate.pageNum,total:e.pageDate.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{title:e.$t("index_main_profile_dialogTitle_failureReason"),width:"30%",visible:e.showBreakReason},on:{"update:visible":function(t){e.showBreakReason=t}}},[t("span",[e._v(e._s(e.breakReason))]),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.showBreakReason=!1}}},[e._v(e._s(e.$t("common_dialogButton_close")))])],1)])],1)},fe=[];function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){Object(l["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ve={data:function(){return{search:{date:[this.$moment().startOf("week").format("YYYY-MM-DD"),this.$moment().endOf("week").format("YYYY-MM-DD")],check:[2,4,256]},tableList:[],pageDate:{page:1,pageNum:10,count:null},tableData:[],showBreakReason:!1,breakReason:""}},methods:{isShowReserveCancel:function(e){return(4&e.resvStatus)<=0&&(128&e.resvStatus)<=0},isShowUnpassReason:function(e){return(512&e.resvStatus)>0},handleWhyBreak:function(e){e.reserveInfo.checkInfo?this.breakReason=e.reserveInfo.checkInfo:this.breakReason=this.$t("index_main_profile_dialogTitle_noFailureReason"),this.showBreakReason=!0},initTable:function(){var e=this;Object(u["e"])({params:this.searchDate}).then((function(t){0===t.code?(e.tableData=t.data,e.pageDate.count=t.count):e.$message.error(t.message)}))},handleSizeChange:function(e){this.pageDate.pageNum=e,this.initTable()},handleCurrentChange:function(e){this.pageDate.page=e,this.initTable()},handleStatus:function(e){var t=this.statusOption.filter((function(t){return(t.value&e.resvStatus)>0}));return t.map((function(e){return e.label})).join(",")},handleDelete:function(e){var t=this;this.$confirm(this.$t("index_main_profile_confirmBox_text"),this.$t("common_confirm_title"),{confirmButtonText:this.$t("common_confirm_cfmBtnTxt"),cancelButtonText:this.$t("common_confirm_cancelBtnTxt"),type:"warning"}).then((function(){Object(u["b"])({params:{uuid:e.uuid}}).then((function(e){0===e.code?(t.$message.success(e.message),t.initTable()):t.$message.info(e.message)}))})).catch((function(){}))}},created:function(){this.initTable()},computed:he(he({},Object(d["e"])({userInfo:function(e){return e.userInfo}})),{},{chekcOption:function(){return[{label:this.$t("common_reserveStatus_notEffect"),value:2},{label:this.$t("common_reserveStatus_effective"),value:4},{label:this.$t("common_reserveStatus_breakedPromise"),value:16},{label:this.$t("common_reserveStatus_finished"),value:128},{label:this.$t("common_reserveStatus_checking"),value:256},{label:this.$t("common_reserveStatus_auditFailed"),value:512},{label:this.$t("common_reserveStatus_auditPass"),value:1024}]},statusOption:function(){return[{label:this.$t("common_reserveStatus_success"),value:1},{label:this.$t("common_reserveStatus_notEffect"),value:2},{label:this.$t("common_reserveStatus_effective"),value:4},{label:this.$t("common_reserveStatus_unPaid"),value:8},{label:this.$t("common_reserveStatus_breakedPromise"),value:16},{label:this.$t("common_reserveStatus_paid"),value:32},{label:this.$t("common_reserveStatus_signedIn"),value:64},{label:this.$t("common_reserveStatus_finished"),value:128},{label:this.$t("common_reserveStatus_checking"),value:256},{label:this.$t("common_reserveStatus_auditFailed"),value:512},{label:this.$t("common_reserveStatus_auditPass"),value:1024}]},searchDate:function(){var e=this.search.date[0]||"",t=this.search.date[1]||"",n=0===this.search.check.length?"":this.search.check.reduce((function(e,t){return e+t})),a=this.pageDate,r=a.page,o=a.pageNum;return{sysKind:16,beginTime:e,endTime:t,resvStatus:n,page:r,pageNum:o,orderKey:"resv_begin_time",orderModel:"desc"}}})},_e=ve,be=(n("8c97"),Object($["a"])(_e,de,fe,!1,null,"1d7d8490",null)),ge=be.exports,we=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"search"},[t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.search,"label-width":"auto"}},[t("el-form-item",{attrs:{label:e.$t("index_main_profile_common_dateRange")}},[t("el-date-picker",{attrs:{type:"daterange","range-separator":e.$t("index_main_profile_common_sep"),"start-placeholder":e.$t("index_main_profile_common_start"),"end-placeholder":e.$t("index_main_profile_common_end"),size:"small",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.search.date,callback:function(t){e.$set(e.search,"date",t)},expression:"search.date"}})],1),t("el-form-item",[t("el-checkbox-group",{model:{value:e.search.check,callback:function(t){e.$set(e.search,"check",t)},expression:"search.check"}},e._l(e.chekcOption,(function(n){return t("el-checkbox",{key:n.value,attrs:{label:n.value}},[e._v(e._s(n.label))])})),1)],1),t("el-form-item",{staticStyle:{float:"right","margin-right":"20px"}},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.initTable}},[e._v(e._s(e.$t("common_button_search")))])],1)],1)],1),t("div",{staticClass:"table-con"},[t("el-table",{staticClass:"tableStyle",staticStyle:{width:"100"},attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{label:e.$t("index_main_profile_Activity_tableCol1"),align:"center",prop:"resvId"}}),t("el-table-column",{attrs:{label:e.$t("index_main_profile_Activity_tableCol2"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("p",[e._v(e._s(n.row.devInfo[0].roomName))])]}}])}),t("el-table-column",{attrs:{label:e.$t("index_main_profile_Activity_tableCol3"),align:"center",prop:"applyName",width:"140"}}),t("el-table-column",{attrs:{label:e.$t("index_main_profile_Activity_tableCol4"),align:"center","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("p",[e._v(e._s(e.$t("index_main_profile_common_tableStart"))+": "+e._s(e.$moment(n.row.resvBeginTime).format("MM-DD HH:mm")))]),t("p",[e._v(e._s(e.$t("index_main_profile_common_tableEnd"))+": "+e._s(e.$moment(n.row.resvEndTime).format("MM-DD HH:mm")))])]}}])}),t("el-table-column",{attrs:{label:e.$t("index_main_profile_Activity_tableCol5"),align:"center",prop:"resvStatus",formatter:e.handleStatus}}),t("el-table-column",{attrs:{label:e.$t("index_main_profile_Activity_tableCol6"),align:"center",prop:"gmtCreate","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.$moment(t.row.gmtCreate).format("YYYY-MM-DD HH:mm:ss")))]}}])}),t("el-table-column",{attrs:{label:e.$t("index_main_profile_PerAppoint_tableCol9"),align:"center","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(n){return[n.row.latestCheckInTime?t("div",[t("p",{staticStyle:{"font-size":"12px"}},[e._v("最晚签到时间")]),t("p",{staticStyle:{"font-size":"12px"}},[e._v(e._s(e.$moment(n.row.latestCheckInTime).format("YYYY-MM-DD HH:mm")))])]):e._e(),t("el-dropdown",{directives:[{name:"show",rawName:"v-show",value:e.isShowDropMenu(n.row),expression:"isShowDropMenu(scope.row)"}]},[t("el-button",{attrs:{type:"primary",size:"mini"}},[e._v(e._s(e.$t("commont_button_moreFun"))),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",[e.isShowReserveCancel(n.row)?t("el-button",{staticStyle:{color:"red"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.handleDelete(n.row)}}},[e._v(e._s(e.$t("common_button_reserveCancel")))]):e._e()],1),t("el-dropdown-item",[e.showDelResv(n.row)?t("el-button",{attrs:{type:"text",icon:"el-icon-time"},on:{click:function(t){return e.handleover(n.row.resvUUID)}}},[e._v(e._s(e.$t("common_button_endEarly")))]):e._e()],1),t("el-dropdown-item",[e.isShowUnpassReason(n.row)?t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleWhyBreak(n.row)}}},[e._v(e._s(e.$t("common_button_unpassReason")))]):e._e()],1),t("el-dropdown-item",[e.isShowAddReview(n.row)?t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleAddReview(n.row)}}},[t("i",{staticClass:"el-icon-plus"}),e._v("活动回顾")]):e._e()],1)],1)],1)]}}])})],1)],1),t("div",{staticClass:"page"},[t("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[5,10,20,25,100],"current-page":e.pageDate.page,"page-size":e.pageDate.pageNum,total:e.pageDate.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("el-dialog",{attrs:{title:e.$t("index_main_profile_dialogTitle_failureReason"),width:"30%",visible:e.showBreakReason},on:{"update:visible":function(t){e.showBreakReason=t}}},[t("span",[e._v(e._s(e.breakReason))]),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.showBreakReason=!1}}},[e._v(e._s(e.$t("common_dialogButton_close")))])],1)]),t("ReviewCardDia",{ref:"reviewCardRef",attrs:{review:e.cardActReview},on:{open:e.onReviewCardOpen,confirm:e.handleReviewCardCfm}})],1)},ye=[],De=n("ea27");function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(n),!0).forEach((function(t){Object(l["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xe={data:function(){return{search:{date:[this.$moment().startOf("week").format("YYYY-MM-DD"),this.$moment().endOf("week").format("YYYY-MM-DD")],check:[2,4,256]},tableList:[],pageDate:{page:1,pageNum:10,count:null},tableData:[],showBreakReason:!1,breakReason:"",currentRow:null,cardActReview:null}},components:{ReviewCardDia:De["a"]},methods:{isShowDropMenu:function(e){return this.showDelResv(e)||this.isShowReserveCancel(e)||this.isShowUnpassReason(e)||this.isShowAddReview(e)},isShowReserveCancel:function(e){return(4&e.resvStatus)<=0&&(128&e.resvStatus)<=0&&this.userInfo.accNo===e.appAccNo},showDelResv:function(e){return e&&e.endEarly&&this.userInfo.accNo===e.appAccNo},handleover:function(e){var t=this;Object(u["u"])({params:{uuid:e}}).then((function(e){0===e.code?(t.$message({type:"success",message:e.message}),t.initTable()):t.$message({type:"error",message:e.message})}))},isShowUnpassReason:function(e){return(512&e.resvStatus)>0},handleWhyBreak:function(e){e.reserveInfo.checkInfo?this.breakReason=e.reserveInfo.checkInfo:this.breakReason=this.$t("index_main_profile_dialogTitle_noFailureReason"),this.showBreakReason=!0},isShowAddReview:function(e){return(128&e.resvStatus)>0&&this.userInfo.accNo===e.appAccNo},handleAddReview:function(e){this.currentRow=e,this.$refs.reviewCardRef.showDialog()},handleReviewCardCfm:function(e){var t=this.currentRow.resvUUID,n=e.reviewTitle,a=e.coverImage,r=e.content,o={resvUUID:t,reviewTitle:n,coverImage:a,content:r};this.saveActivityCard(o)},onReviewCardOpen:function(){this.getCardActivityReview(this.currentRow.resvUUID)},initTable:function(){var e=this;Object(u["k"])({params:this.searchDate}).then((function(t){0===t.code?(e.tableData=t.data,e.pageDate.count=t.count):e.$message.error(t.message)}))},handleSizeChange:function(e){this.pageDate.pageNum=e,this.initTable()},handleCurrentChange:function(e){this.pageDate.page=e,this.initTable()},handleStatus:function(e){var t=this.statusOption.filter((function(t){return(t.value&e.resvStatus)>0}));return t.map((function(e){return e.label})).join(",")},handleDelete:function(e){var t=this;this.$confirm(this.$t("index_main_profile_confirmBox_text"),this.$t("common_confirm_title"),{confirmButtonText:this.$t("common_confirm_cfmBtnTxt"),cancelButtonText:this.$t("common_confirm_cancelBtnTxt"),type:"warning"}).then((function(){Object(u["b"])({params:{uuid:e.resvUUID}}).then((function(e){0===e.code?(t.$message.success(e.message),t.initTable()):t.$message.info(e.message)}))})).catch((function(){}))},saveActivityCard:function(e){var t=this;Object(u["y"])(e).then((function(e){0===e.code?(t.$message({type:"success",message:e.message}),t.$refs.reviewCardRef.hideDialog()):t.$message({type:"error",message:e.message})}))},getCardActivityReview:function(e){var t=this,n={resvUUID:e};Object(u["g"])({params:n}).then((function(e){0===e.code&&e.data?t.cardActReview=e.data:t.cardActReview=null}))}},created:function(){this.initTable()},computed:Se(Se({},Object(d["e"])({userInfo:function(e){return e.userInfo}})),{},{chekcOption:function(){return[{label:this.$t("common_reserveStatus_notEffect"),value:2},{label:this.$t("common_reserveStatus_effective"),value:4},{label:this.$t("common_reserveStatus_breakedPromise"),value:16},{label:this.$t("common_reserveStatus_finished"),value:128},{label:this.$t("common_reserveStatus_checking"),value:256},{label:this.$t("common_reserveStatus_auditFailed"),value:512},{label:this.$t("common_reserveStatus_auditPass"),value:1024}]},statusOption:function(){return[{label:this.$t("common_reserveStatus_success"),value:1},{label:this.$t("common_reserveStatus_notEffect"),value:2},{label:this.$t("common_reserveStatus_effective"),value:4},{label:this.$t("common_reserveStatus_unPaid"),value:8},{label:this.$t("common_reserveStatus_paid"),value:32},{label:this.$t("common_reserveStatus_checking"),value:256},{label:this.$t("common_reserveStatus_auditFailed"),value:512},{label:this.$t("common_reserveStatus_auditPass"),value:1024},{label:this.$t("common_reserveStatus_signedIn"),value:64},{label:this.$t("common_reserveStatus_finished"),value:128},{label:this.$t("common_reserveStatus_breakedPromise"),value:16}]},searchDate:function(){var e=this.search.date[0]||"",t=this.search.date[1]||"",n=0===this.search.check.length?"":this.search.check.reduce((function(e,t){return e+t})),a=this.pageDate,r=a.page,o=a.pageNum;return{sysKind:16,beginTime:e,endTime:t,resvStatus:n,page:r,pageNum:o,orderKey:"resv_begin_time",orderModel:"desc"}}})},Re=xe,ke=(n("9d94"),Object($["a"])(Re,we,ye,!1,null,"c869c7b0",null)),Oe=ke.exports,Ce=function(){var e=this,t=e._self._c;return t("div",{staticClass:"exam-seat"},[e.isExamCanLeave?t("el-tabs",{attrs:{type:"border-card","tab-position":e.tabPosition},model:{value:e.curTab,callback:function(t){e.curTab=t},expression:"curTab"}},[t("el-tab-pane",{attrs:{name:"0",label:e.$t("index_main_profile_examOrder_reserve"),lazy:""}},["0"===e.curTab?t("ExamSeatRes"):e._e()],1),t("el-tab-pane",{attrs:{name:"1",label:e.$t("index_main_profile_examOrder_leave"),lazy:""}},["1"===e.curTab?t("ExamSeatLeave"):e._e()],1)],1):t("ExamSeatRes")],1)},Ie=[],Te=function(){var e=this,t=e._self._c;return t("div",[t("SearchForm",{ref:"searchForm",attrs:{checkOption:e.checkOption},on:{search:e.handleSearch}}),t("div",{staticClass:"table-container"},[t("MTable",{attrs:{tableCols:e.tableCols,total:e.pageData.count,tableData:e.tableData,lastColWidth:160},on:{sortChange:e.onSortChange,pageChange:e.onPageChange},scopedSlots:e._u([{key:"col",fn:function(n){var a=n.col;return["resvStatus"===a.col.prop?[e._v(e._s(e._f("filteredStatus")(a.row["resvStatus"],e.statusOption)))]:"string"===typeof a.col.prop?t("span",[e._v(e._s(a.row[a.col.prop]))]):Array.isArray(a.col.prop)&&a.col.prop.length>0&&e.isObject(a.col.prop[0])?t("div",e._l(a.col.prop,(function(n){return t("p",{key:n.key},[e._v(e._s("".concat(n.prefix).concat(a.row[n.key])))])})),0):Array.isArray(a.col.prop)&&a.col.prop.length>0?t("div",[e._v("\r\n            "+e._s(a.col.prop.map((function(e){return a.row[e]})).join(a.col.sep))+"\r\n          ")]):e._e()]}},{key:"default",fn:function(n){var a=n.row;return[t("div",[t("p",{staticStyle:{"font-size":"12px"}},[e._v("最晚签到时间")]),t("p",{staticStyle:{"font-size":"12px"}},[e._v(e._s(e.$moment(a.latestCheckInTime).format("YYYY-MM-DD HH:mm")))])]),e.isShowLeave(a)?t("el-button",{attrs:{type:"text",icon:"el-icon-odometer"},on:{click:function(t){return e.handleLeave(a)}}},[e._v("请假")]):e._e(),e.showDelResv(a)?t("el-button",{staticStyle:{color:"#67c23a"},attrs:{type:"text",icon:"el-icon-time"},on:{click:function(t){return e.handleover(a)}}},[e._v(e._s(e.$t("common_button_endEarly")))]):e._e(),e.isShowCancel(a)?t("el-button",{staticStyle:{color:"red"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.handleDelete(a)}}},[e._v(e._s(e.$t("common_button_reserveCancel")))]):e._e(),e.isShowCopyReserveBtn?t("el-button",{staticStyle:{width:"100%"},attrs:{type:"text"},on:{click:function(t){return e.handleCopy(a)}}},[e._v("复制预约")]):e._e()]}}])})],1),t("el-dialog",{attrs:{visible:e.isShowLeaveDia,title:"请假申请","close-on-click-modal":!1,width:"40%"},on:{"update:visible":function(t){e.isShowLeaveDia=t},close:e.onLeaveDiaClose},scopedSlots:e._u([{key:"footer",fn:function(){return[t("el-button",{attrs:{size:"small"},on:{click:function(t){e.isShowLeaveDia=!1}}},[e._v(e._s(e.$t("common_dialogButton_cancel")))]),t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleConfirm}},[e._v(e._s(e.$t("common_dialogButton_confirm")))])]},proxy:!0}])},[t("el-form",{ref:"leaveForm",attrs:{model:e.formModel,rules:e.formRules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"请假时间",prop:"date"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"small",type:"daterange","picker-options":e.leaveDatePickerOptions,"range-separator":e.$t("index_main_profile_common_sep"),"start-placeholder":e.$t("index_main_profile_common_start"),"end-placeholder":e.$t("index_main_profile_common_end")},model:{value:e.formModel.date,callback:function(t){e.$set(e.formModel,"date",t)},expression:"formModel.date"}})],1),t("el-form-item",{attrs:{label:"请假原因",prop:"reason"}},[t("el-input",{attrs:{type:"textarea",rows:8,maxlength:1e3,"show-word-limit":"",placeholder:"请输入请假原因"},model:{value:e.formModel.reason,callback:function(t){e.$set(e.formModel,"reason",t)},expression:"formModel.reason"}})],1)],1)],1),e.reserveInfo?t("CopyResvDialog",{attrs:{type:"date",visible:e.isShowCopyDialog,reserveInfo:e.reserveInfo},on:{"update:visible":function(t){e.isShowCopyDialog=t},reset:e.getPsgSeatRv}}):e._e()],1)},Me=[],Ee=(n("6b54"),function(){var e=this,t=e._self._c;return t("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchModel,"label-width":"80px"}},[t("el-form-item",{staticClass:"oneline",attrs:{label:e.$t("index_main_profile_common_dateRange")}},[t("el-date-picker",{attrs:{type:"daterange","range-separator":e.$t("index_main_profile_common_sep"),"start-placeholder":e.$t("index_main_profile_common_start"),"end-placeholder":e.$t("index_main_profile_common_end"),size:"small",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.searchModel.date,callback:function(t){e.$set(e.searchModel,"date",t)},expression:"searchModel.date"}})],1),e.isShowCheckBox?t("el-form-item",[t("el-checkbox-group",{model:{value:e.searchModel.check,callback:function(t){e.$set(e.searchModel,"check",t)},expression:"searchModel.check"}},e._l(e.checkOption,(function(n){return t("el-checkbox",{key:n.value,attrs:{label:n.value}},[e._v(e._s(n.label))])})),1)],1):e._e(),t("el-form-item",{staticStyle:{float:"right","margin-right":"20px"}},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleSearch}},[e._v(e._s(e.$t("common_button_search")))])],1)],1)}),je=[],Ye={name:"SearchForm",props:{checkOption:{type:Array,default:[]},isShowCheckBox:{type:Boolean,default:!0}},data:function(){return{searchModel:{date:[this.$moment().startOf("week").format("YYYY-MM-DD"),this.$moment().endOf("week").format("YYYY-MM-DD")],check:[]}}},watch:{checkOption:{handler:function(e){var t=this;Array.isArray(e)&&e.forEach((function(e){e.default&&t.searchModel.check.push(e.value)}))},immediate:!0}},methods:{handleSearch:function(){for(var e={},t=0,n=Object.keys(this.searchModel);t<n.length;t++){var a=n[t];(this.isShowCheckBox||"check"!=a)&&(e[a]=this.searchModel[a])}this.$emit("search",e)}}},Ne=Ye,Pe=(n("bbbb"),Object($["a"])(Ne,Ee,je,!1,null,"e023d8fe",null)),Ae=Pe.exports,Be=function(){var e=this,t=e._self._c;return t("div",{staticClass:"mtable"},[t("el-table",{staticClass:"tableStyle",staticStyle:{width:"100%"},attrs:{border:"",stripe:"",data:e.tableData},on:{"sort-change":e.onSortChange}},[e.showNo?t("el-table-column",{attrs:{label:"编号",type:"index",width:"50",index:e.indexMethod}}):e._e(),e._l(e.tableCols,(function(n){return t("el-table-column",{key:n.label,attrs:{sortable:n.sortable,label:n.label,prop:n.colProp||n.prop,width:n.width,"show-overflow-tooltip":n.showOverflowToolTip},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._t("col",null,{col:{row:a,col:n}})]}}],null,!0)})})),e.showOperationCol?t("el-table-column",{attrs:{label:e.$t("index_main_profile_PerAppoint_tableCol9"),width:e.lastColWidth>0?e.lastColWidth:"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._t("default",null,{row:n})]}}],null,!0)}):e._e()],2),t("div",{staticClass:"page"},[t("el-pagination",{attrs:{"pager-count":5,background:"",layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,30,50],"current-page":e.pageData.pageNum,"page-size":e.pageData.pageSize,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},Le=[],ze=(n("c5f6"),function(){return[]}),He={name:"MTable",props:{tableCols:{type:Array,default:ze},tableData:{type:Array,default:ze},showNo:{type:Boolean,default:!0},lastColWidth:{type:Number,default:0},showOperationCol:{type:Boolean,default:!0},total:{type:Number,default:0}},data:function(){return{pageData:{pageNum:1,pageSize:10}}},methods:{indexMethod:function(e){var t=this.pageData,n=t.pageNum,a=t.pageSize;return(n-1)*a+e+1},handleSizeChange:function(e){this.pageData.pageSize=e,this.$emit("pageChange",this.pageData)},handleCurrentChange:function(e){this.pageData.pageNum=e,this.$emit("pageChange",this.pageData)},onSortChange:function(e){var t=e.column,n=e.prop,a=e.order;this.$emit("sortChange",{column:t,prop:n,order:a})}}},Ue=He,Fe=(n("2cff"),Object($["a"])(Ue,Be,Le,!1,null,"194b3718",null)),Ke=Fe.exports;function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){Object(l["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var We={name:"ExamSeatRes",components:{SearchForm:Ae,MTable:Ke,CopyResvDialog:j},data:function(){return this.statusEnum={SUCCESS:{label:this.$t("common_reserveStatus_success"),value:1},NOTEFFECT:{label:this.$t("common_reserveStatus_notEffect"),value:2},EFFECTIVE:{label:this.$t("common_reserveStatus_effective"),value:4},UNPAID:{label:this.$t("common_reserveStatus_unPaid"),value:8},BREAKED:{label:this.$t("common_reserveStatus_breakedPromise"),value:16},PAID:{label:this.$t("common_reserveStatus_paid"),value:32},SIGNEDIN:{label:this.$t("common_reserveStatus_signedIn"),value:64},FINISHED:{label:this.$t("common_reserveStatus_finished"),value:128},CHECKING:{label:this.$t("common_reserveStatus_checking"),value:256},AUDITFAILED:{label:this.$t("common_reserveStatus_auditFailed"),value:512},AUDITPASS:{label:this.$t("common_reserveStatus_auditPass"),value:1024},TEMPORARILY:{label:this.$t("common_reserveStatus_temporarily"),value:2048}},this.checkOption=[{label:this.statusEnum.CHECKING.label,value:this.statusEnum.CHECKING.value,default:!0},{label:this.statusEnum.NOTEFFECT.label,value:this.statusEnum.NOTEFFECT.value,default:!0},{label:this.statusEnum.EFFECTIVE.label,value:this.statusEnum.EFFECTIVE.value,default:!0},{label:this.statusEnum.FINISHED.label,value:this.statusEnum.FINISHED.value},{label:this.statusEnum.BREAKED.label,value:this.statusEnum.BREAKED.value}],this.tableCols=[{label:"申请人",prop:"trueName"},{label:"申请时间",width:160,sortable:!0,colProp:"resvBeginTime",prop:[{prefix:"开始日: ",key:"resvBeginTime"},{prefix:"结束日: ",key:"resvEndTime"}]},{label:"预约对象",sep:" / ",colProp:"devName",prop:["labName","roomName","devName"]},{label:"状态",prop:"resvStatus",align:"center"}],{searchModel:{date:[this.$moment().startOf("week").format("YYYY-MM-DD"),this.$moment().endOf("week").format("YYYY-MM-DD")],check:[2,4,256]},pageData:{pageNum:1,pageSize:10,count:0},orderModel:{orderKey:"",orderMode:""},tableData:[],isShowLeaveDia:!1,leavingRow:null,formModel:{date:[],reason:""},formRules:{date:[{required:!0,message:"必须选择请假开始日期和结束日期",trigger:"blur"}]},leaveCfmLoading:!1,leaveDatePickerOptions:{},reserveInfo:null,isShowCopyDialog:!1}},created:function(){this.getPsgSeatRv()},computed:Ve(Ve({},Object(d["e"])({userInfo:function(e){return e.userInfo}})),{},{isExamCanLeave:function(){return window.g.isExamCanLeave},statusOption:function(){return[{label:this.statusEnum.SUCCESS.label,value:this.statusEnum.SUCCESS.value},{label:this.statusEnum.CHECKING.label,value:this.statusEnum.CHECKING.value},{label:this.statusEnum.AUDITPASS.label,value:this.statusEnum.AUDITPASS.value},{label:this.statusEnum.NOTEFFECT.label,value:this.statusEnum.NOTEFFECT.value},{label:this.statusEnum.EFFECTIVE.label,value:this.statusEnum.EFFECTIVE.value},{label:this.statusEnum.UNPAID.label,value:this.statusEnum.UNPAID.value},{label:this.statusEnum.PAID.label,value:this.statusEnum.PAID.value},{label:this.statusEnum.SIGNEDIN.label,value:this.statusEnum.SIGNEDIN.value},{label:this.statusEnum.TEMPORARILY.label,value:this.statusEnum.TEMPORARILY.value},{label:this.statusEnum.AUDITFAILED.label,value:this.statusEnum.AUDITFAILED.value},{label:this.statusEnum.FINISHED.label,value:this.statusEnum.FINISHED.value},{label:this.statusEnum.BREAKED.label,value:this.statusEnum.BREAKED.value}]},isShowCopyReserveBtn:function(){return window.g.isShowCopyReserveBtn}}),methods:{showDelResv:function(e){return e&&e.endEarly&&this.userInfo.accNo===e.appAccNo},isShowCancel:function(e){return e&&this.userInfo.accNo==e.appAccNo&&(e.resvStatus&this.statusEnum.EFFECTIVE.value)<=0&&(e.resvStatus&this.statusEnum.FINISHED.value)<=0},isShowLeave:function(e){return this.isExamCanLeave&&e&&(e.resvStatus&this.statusEnum.FINISHED.value)<=0&&this.userInfo.accNo==e.appAccNo},handleCopy:function(e){this.reserveInfo={testName:e.testName,resvBeginTime:e.resvBeginTime,resvEndTime:e.resvEndTime,labName:e.labName,roomName:e.roomName,devName:e.devName,devId:e.devId,memo:e.memo,classKind:32},this.isShowCopyDialog=!0},handleSearch:function(e){var t=e.check,n=e.date;this.searchModel.check=t,this.searchModel.date=n,this.getPsgSeatRv()},handleLeave:function(e){this.leavingRow=e,this.leaveDatePickerOptions={disabledDate:function(t){var n=new Date("".concat(e.resvBeginTime," 00:00:00")),a=new Date("".concat(e.resvEndTime," 00:00:00"));return t-n<0||t-a>0}},this.isShowLeaveDia=!0},handleover:function(e){var t=this;this.$confirm(this.$t("index_main_profile_confirmBox_text"),this.$t("common_confirm_title"),{confirmButtonText:this.$t("common_confirm_cfmBtnTxt"),cancelButtonText:this.$t("common_confirm_cancelBtnTxt"),type:"warning"}).then((function(){t.overReserve(e.uuid)})).catch((function(){}))},handleDelete:function(e){var t=this;this.$confirm(this.$t("index_main_profile_confirmBox_text"),this.$t("common_confirm_title"),{confirmButtonText:this.$t("common_confirm_cfmBtnTxt"),cancelButtonText:this.$t("common_confirm_cancelBtnTxt"),type:"warning"}).then((function(){t.delReserve(e.uuid)})).catch((function(){}))},handleConfirm:function(){var e=this;this.$refs.leaveForm.validate((function(t){t&&e.postPsgLeave()}))},onLeaveDiaClose:function(){this.$refs.leaveForm.resetFields()},onSortChange:function(e){e.column;var t=e.prop,n=e.order;this.orderModel.orderKey=t,this.orderModel.orderMode="ascending"===n?"asc":"descending"===n?"desc":"",this.getPsgSeatRv()},onPageChange:function(e){var t=e.pageNum,n=e.pageSize;this.pageData.pageNum=t,this.pageData.pageSize=n,this.getPsgSeatRv()},overReserve:function(e){var t=this,n={uuid:e};Object(u["u"])({params:n}).then((function(e){0===e.code?(t.$message({type:"success",message:e.message}),t.getPsgSeatRv()):t.$message({type:"error",message:e.message})}))},delReserve:function(e){var t=this,n={uuid:e};Object(u["a"])({params:n}).then((function(e){0===e.code?(t.$message({type:"success",message:e.message}),t.getPsgSeatRv()):t.$message({type:"error",message:e.message})}))},postPsgLeave:function(){var e=this,t=this.formModel,n=t.date,a=t.reason,r=this.leavingRow.uuid,o={uuid:r,leaveReason:a};Array.isArray(n)&&n.length>1&&(o["leaveBeginTime"]=this.$moment(n[0]).format("YYYY-MM-DD"),o["leaveEndTime"]=this.$moment(n[1]).format("YYYY-MM-DD")),this.leaveCfmLoading=!0,Object(u["w"])(o).then((function(t){0===t.code?(e.$message({type:"success",message:t.message}),e.getPsgSeatRv(),e.isShowLeaveDia=!1):e.$message({type:"error",message:t.message}),e.leaveCfmLoading=!1})).catch((function(t){e.leaveCfmLoading=!1}))},getPsgSeatRv:function(){var e=this,t=this.searchModel,n=t.date,a=t.check,r=this.pageData,o=r.pageNum,s=r.pageSize,i=this.orderModel,l=i.orderKey,c=i.orderMode,m={page:o,pageSize:s,resvBeginTime:n[0],resvEndTime:n[1]};a.length>0&&(m["resvStatus"]=a.reduce((function(e,t){return e+t}),0)),l&&c&&(m["orderKey"]=l,m["orderModel"]=c),Object(u["o"])({params:m}).then((function(t){0===t.code?t.data?(e.tableData=t.data,e.pageData.count=t.count):(e.tableData=[],e.pageData.count=0):e.$message({type:"error",message:t.message})}))},isObject:function(e){return"Object"===Object.prototype.toString.call(e).slice(8,-1)}},filters:{filteredStatus:function(e,t){if(!Array.isArray(t))return"";var n=t.filter((function(t){return e&t.value}));return n.reduce((function(e,t){return e+", "+t.label}),"").slice(1)}}},Ze=We,Ge=(n("6ccc"),Object($["a"])(Ze,Te,Me,!1,null,"7836d626",null)),Je=Ge.exports,Qe=function(){var e=this,t=e._self._c;return t("div",[t("SearchForm",{attrs:{checkOption:e.statusOption},on:{search:e.handleSearch}}),t("div",{staticClass:"btn-container"},[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleApplyLeave}},[e._v("请假申请")])],1),t("div",{staticClass:"table-container"},[t("MTable",{attrs:{tableCols:e.tableCols,tableData:e.tableData,total:e.pageData.count,lastColWidth:100},on:{sortChange:e.onSortChange,pageChange:e.onPageChange},scopedSlots:e._u([{key:"col",fn:function(n){var a=n.col;return["status"===a.col.prop?[e._v(e._s(e._f("filteredStatus")(a.row["status"],e.statusOption)))]:"string"===typeof a.col.prop?t("span",[e._v(e._s(a.row[a.col.prop]))]):Array.isArray(a.col.prop)&&a.col.prop.length>0&&e.isObject(a.col.prop[0])?t("div",e._l(a.col.prop,(function(n){return t("p",{key:n.key},[e._v(e._s("".concat(n.prefix).concat(a.row[n.key])))])})),0):Array.isArray(a.col.prop)&&a.col.prop.length>0?t("div",[e._v("\r\n            "+e._s(a.col.prop.map((function(e){return a.row[e]})).join(a.col.sep))+"\r\n          ")]):e._e()]}},{key:"default",fn:function(n){var a=n.row;return[t("el-dropdown",{directives:[{name:"show",rawName:"v-show",value:e.isShowDropdown(a),expression:"isShowDropdown(row)"}],on:{command:e.handleCommand}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("展开"),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e.isShowWhyReason(a)?t("el-dropdown-item",{attrs:{command:e.beforeCommand(1,a)}},[e._v(e._s(e.$t("common_button_unpassReason")))]):e._e(),e.isShowCancelLeave(a)?t("el-dropdown-item",{attrs:{command:e.beforeCommand(2,a)}},[e._v(e._s(e.$t("common_button_ccleave")))]):e._e()],1)],1)]}}])})],1),t("el-dialog",{attrs:{title:e.$t("index_main_profile_dialogTitle_failureReason"),width:"30%",visible:e.showBreakReason},on:{"update:visible":function(t){e.showBreakReason=t}}},[t("span",[e._v(e._s(e.breakReason))]),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"small"},on:{click:function(t){e.showBreakReason=!1}}},[e._v(e._s(e.$t("common_dialogButton_close")))])],1)]),t("el-dialog",{attrs:{visible:e.isShowLeaveDia,title:"请假申请","close-on-click-modal":!1,width:"40%"},on:{"update:visible":function(t){e.isShowLeaveDia=t},close:e.onLeaveDiaClose,open:e.onLeaveDiaOpen},scopedSlots:e._u([{key:"footer",fn:function(){return[t("el-button",{attrs:{size:"small"},on:{click:function(t){e.isShowLeaveDia=!1}}},[e._v(e._s(e.$t("common_dialogButton_cancel")))]),t("el-button",{attrs:{size:"small",loading:e.leaveCfmLoading,type:"primary"},on:{click:e.handleConfirm}},[e._v(e._s(e.$t("common_dialogButton_confirm")))])]},proxy:!0}])},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:"leaveForm",attrs:{model:e.formModel,rules:e.formRules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"选择预约",prop:"uuid"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",placeholder:"请选择要申请请假的预约",size:"small"},on:{change:e.onReserveChange},model:{value:e.formModel.uuid,callback:function(t){e.$set(e.formModel,"uuid",t)},expression:"formModel.uuid"}},e._l(e.reserveList,(function(e){return t("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)],1),t("el-form-item",{attrs:{label:"请假时间",prop:"date"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"small",type:"daterange","picker-options":e.leaveDatePickerOptions,"range-separator":e.$t("index_main_profile_common_sep"),"start-placeholder":e.$t("index_main_profile_common_start"),"end-placeholder":e.$t("index_main_profile_common_end")},model:{value:e.formModel.date,callback:function(t){e.$set(e.formModel,"date",t)},expression:"formModel.date"}})],1),t("el-form-item",{attrs:{label:"请假原因",prop:"reason"}},[t("el-input",{attrs:{type:"textarea",rows:8,maxlength:1e3,"show-word-limit":"",placeholder:"请输入请假原因"},model:{value:e.formModel.reason,callback:function(t){e.$set(e.formModel,"reason",t)},expression:"formModel.reason"}})],1)],1)],1)],1)},Xe=[],et={name:"ExamSeatLeave",components:{SearchForm:Ae,MTable:Ke},data:function(){return this.statusOption=[{label:this.$t("common_reserveStatus_checking"),value:1,default:!0},{label:this.$t("common_reserveStatus_auditPass"),value:2},{label:this.$t("common_reserveStatus_auditFailed"),value:4}],this.tableCols=[{label:"申请人",prop:"trueName"},{label:"请假时间",width:160,sortable:!0,colProp:"leaveBeginTime",prop:[{prefix:"开始日: ",key:"leaveBeginTime"},{prefix:"结束日: ",key:"leaveEndTime"}]},{label:"预约对象",sep:" / ",colProp:"devName",prop:["labName","roomName","devName"]},{label:"请假原因",prop:"leaveReason",showOverflowToolTip:!0},{label:"状态",prop:"status"}],{searchModel:{date:[this.$moment().startOf("week").format("YYYY-MM-DD"),this.$moment().endOf("week").format("YYYY-MM-DD")],check:[1]},pageData:{pageNum:1,pageSize:10,count:0},orderModel:{orderKey:"",orderMode:""},tableData:[],showBreakReason:!1,breakReason:"",formModel:{date:[],uuid:"",uiReserve:"",reason:""},formRules:{uuid:[{required:!0,message:"必须选择要请假的预约",trigger:"blur"}],date:[{required:!0,validator:function(e,t,n){Array.isArray(t)&&t.length>1?n():n(new Error("必须选择请假时间"))},trigger:"blur"}]},formLoading:!1,leaveCfmLoading:!1,leaveDatePickerOptions:{},isShowLeaveDia:!1,reserveList:[]}},created:function(){this.getPsgRec()},methods:{isShowDropdown:function(e){return this.isShowWhyReason(e)||this.isShowCancelLeave(e)},isShowWhyReason:function(e){return(4&e.status)>0},isShowCancelLeave:function(e){return(1&e.status)>0},handleSearch:function(e){var t=e.check,n=e.date;this.searchModel.check=t,this.searchModel.date=n,this.getPsgRec()},onSortChange:function(e){e.column;var t=e.prop,n=e.order;this.orderModel.orderKey=t,this.orderModel.orderMode="ascending"===n?"asc":"descending"===n?"desc":"",this.getPsgRec()},onPageChange:function(e){var t=e.pageNum,n=e.pageSize;this.pageData.pageNum=t,this.pageData.pageSize=n,this.getPsgRec()},getPsgRec:function(){var e=this,t=this.searchModel,n=t.date,a=t.check,r=this.pageData,o=r.pageNum,s=r.pageSize,i=this.orderModel,l=i.orderKey,c=i.orderMode,m={page:o,pageSize:s,leaveBeginDate:n[0],leaveEndDate:n[1]};a.length>0&&(m["leaveStatus"]=a.reduce((function(e,t){return e+t}),0)),l&&c&&(m["orderKey"]=l,m["orderModel"]=c),Object(u["n"])({params:m}).then((function(t){0===t.code?t.data?(e.tableData=t.data,e.pageData.count=t.count):(e.tableData=[],e.pageData.count=0):e.$message({type:"error",message:t.message})}))},beforeCommand:function(e,t){return{type:e,row:t}},handleCommand:function(e){switch(e.type){case 1:this.breakReason=e.row.memo||"",this.showBreakReason=!0;break;case 2:this.cancelLeave(e.row);break}},isObject:function(e){return"Object"===Object.prototype.toString.call(e).slice(8,-1)},handleApplyLeave:function(){this.isShowLeaveDia=!0},handleConfirm:function(){var e=this;this.$refs.leaveForm.validate((function(t){t&&e.postPsgLeave()}))},cancelLeave:function(e){var t=this;this.$confirm("确定取消该请假么?","".concat(this.$t("com_txt_confirm2")),{confirmButtonText:this.$t("com_btn_confirm"),cancelButtonText:this.$t("com_btn_cancel"),type:"warning"}).then((function(n){t.psgCancelLeave(e.sid)})).catch((function(e){}))},postPsgLeave:function(){var e=this,t=this.formModel,n=t.uuid,a=t.date,r=t.reason,o={uuid:n,leaveReason:r};Array.isArray(a)&&a.length>1&&(o["leaveBeginTime"]=this.$moment(a[0]).format("YYYY-MM-DD"),o["leaveEndTime"]=this.$moment(a[1]).format("YYYY-MM-DD")),this.leaveCfmLoading=!0,Object(u["w"])(o).then((function(t){0===t.code?(e.$message({type:"success",message:t.message}),e.getPsgRec(),e.isShowLeaveDia=!1):e.$message({type:"error",message:t.message}),e.leaveCfmLoading=!1})).catch((function(t){e.leaveCfmLoading=!1}))},psgCancelLeave:function(e){var t=this,n={leaveId:e};Object(u["x"])(n).then((function(e){0===e.code?(t.$message({type:"success",message:e.message}),t.getPsgRec()):t.$message({type:"error",message:e.message})}))},onLeaveDiaClose:function(){var e=this;this.$nextTick((function(){e.$refs.leaveForm.resetFields()}))},onLeaveDiaOpen:function(){var e=this;this.formLoading=!0,Object(u["m"])().then((function(t){0===t.code?t.data&&Array.isArray(t.data)?e.reserveList=t.data.map((function(e){return e.label="".concat(e.name,"(").concat(e.resvBegin,"至").concat(e.resvEnd,")"),e.value=e.uuid,e})):e.reserveList=[]:(e.$message({type:"error",message:t.message}),e.reserveList=[]),e.formLoading=!1}))},onReserveChange:function(e){if(e){var t=this.reserveList.find((function(t){return t.uuid=e}));this.leaveDatePickerOptions={disabledDate:function(e){var n=new Date("".concat(t.resvBegin," 00:00:00")),a=new Date("".concat(t.resvEnd," 00:00:00"));return e-n<0||e-a>0}}}else this.leaveDatePickerOptions={disabledDate:function(){return!1}};this.formModel.date=""}},filters:{filteredStatus:function(e,t){if(!Array.isArray(t))return"";var n=t.filter((function(t){return e&t.value}));return n.reduce((function(e,t){return e+", "+t.label}),"").slice(1)}}},tt=et,nt=Object($["a"])(tt,Qe,Xe,!1,null,"fcea8c02",null),at=nt.exports,rt={name:"ExamSeat",components:{ExamSeatRes:Je,ExamSeatLeave:at},data:function(){return{tabPosition:"left",curTab:"0"}},computed:{isExamCanLeave:function(){return window.g.isExamCanLeave}}},ot=rt,st=(n("5ce8"),Object($["a"])(ot,Ce,Ie,!1,null,"582a09d4",null)),it=st.exports,lt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"borrow"},[t("SearchForm",{attrs:{checkOption:e.checkOptions},on:{search:e.handleSearch}}),t("MTable",{attrs:{tableCols:e.tableCols,total:e.pageData.count,tableData:e.tableData,lastColWidth:160},on:{sortChange:e.onSortChange,pageChange:e.onPageChange},scopedSlots:e._u([{key:"col",fn:function(n){var a=n.col;return["resvEndRealTime"==a.col.prop?[e._v(e._s(e._f("filterEndRealTime")(a.row.resvEndRealTime,e.$moment)))]:"resvBeginTime"==a.col.colProp?[32&a.row.resvProperty?[t("p",[e._v(e._s("".concat(e.$t("index_main_profile_common_tableStart"),": ").concat(e.$moment(a.row.resvBeginTime).format("YYYY-MM-DD"))))]),t("p",[e._v(e._s("".concat(e.$t("index_main_profile_common_tableEnd"),": ").concat(e.$moment(a.row.resvEndTime).format("YYYY-MM-DD"))))])]:[t("p",[e._v(e._s(e.$t("index_main_profile_common_tableStart"))+": "+e._s(e.$moment(a.row.resvBeginTime).format("YYYY-MM-DD HH:mm")))]),t("p",[e._v(e._s(e.$t("index_main_profile_common_tableEnd"))+": "+e._s(e.$moment(a.row.resvEndTime).format("YYYY-MM-DD HH:mm")))])]]:"resvStatus"==a.col.prop?e._l(e.getTableStatus(a.row),(function(n){return t("p",{key:n.value},[t("span",{class:["cl--".concat(e.getColor(n))]},[e._v(e._s(n.label))])])})):[e._v(e._s(a.row[a.col.prop]))]]}},{key:"default",fn:function(n){var a=n.row;return[e.scope.row.latestCheckInTime?t("div",[t("p",{staticStyle:{"font-size":"12px"}},[e._v("最晚签到时间")]),t("p",{staticStyle:{"font-size":"12px"}},[e._v(e._s(e.$moment(a.latestCheckInTime).format("YYYY-MM-DD HH:mm")))])]):e._e(),t("el-button",{attrs:{type:"text",icon:"el-icon-odometer"},on:{click:function(t){return e.handleDevices(a)}}},[e._v("设备信息")]),e.showBreakRea(a)?t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleWhyBreak(a)}}},[e._v(e._s(e.$t("common_button_unpassReason")))]):e._e(),e.isShowCancel(a)?t("el-button",{staticStyle:{color:"red"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(t){return e.handleDelete(a)}}},[e._v(e._s(e.$t("common_button_reserveCancel")))]):e._e()]}}])}),t("el-dialog",{attrs:{title:e.$t("index_main_profile_dialogTitle_failureReason"),width:"30%",visible:e.showBreakReason},on:{"update:visible":function(t){e.showBreakReason=t}}},[t("span",[e._v(e._s(e.breakReason))]),t("span",{attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.showBreakReason=!1}}},[e._v(e._s(e.$t("common_dialogButton_close")))])],1)]),t("DeviceDialog",{attrs:{title:"设备信息",isLoading:e.isLoading,data:e.resvDevInfo},model:{value:e.isVisible,callback:function(t){e.isVisible=t},expression:"isVisible"}})],1)},ct=[],ut=n("46c3");function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(n),!0).forEach((function(t){Object(l["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ft={name:"BorrowDevice",components:{SearchForm:Ae,MTable:Ke,DeviceDialog:ut["a"]},computed:dt({},Object(d["e"])(["userInfo"])),data:function(){return this.statusOption=[{label:this.$t("common_reserveStatus_success"),value:1},{label:this.$t("common_reserveStatus_notEffect"),value:2},{label:this.$t("common_reserveStatus_effective"),value:4},{label:this.$t("common_reserveStatus_unPaid"),value:8},{label:this.$t("common_reserveStatus_paid"),value:32},{label:this.$t("common_reserveStatus_checking"),value:256},{label:this.$t("common_reserveStatus_auditFailed"),value:512},{label:this.$t("common_reserveStatus_auditPass"),value:1024},{label:this.$t("common_reserveStatus_signedIn"),value:64},{label:this.$t("common_reserveStatus_temporarily"),value:2048},{label:this.$t("common_reserveStatus_finished"),value:128},{label:this.$t("common_reserveStatus_breakedPromise"),value:16}],this.checkOptions=[{label:this.$t("common_reserveStatus_notEffect"),value:2,default:!0},{label:this.$t("common_reserveStatus_effective"),value:4,default:!0},{label:this.$t("common_reserveStatus_breakedPromise"),value:16},{label:this.$t("common_reserveStatus_finished"),value:128},{label:this.$t("common_reserveStatus_checking"),value:256,default:!0},{label:this.$t("common_reserveStatus_auditFailed"),value:512},{label:this.$t("common_reserveStatus_auditPass"),value:1024}],this.tableCols=[{label:this.$t("index_main_profile_PerAppoint_tableCol1"),prop:"resvId"},{label:this.$t("index_main_profile_PerAppoint_tableCol4"),prop:"resvName"},{label:this.$t("index_main_profile_PerAppoint_tableCol5"),width:180,sortable:!0,colProp:"resvBeginTime",prop:[{prefix:this.$t("index_main_profile_common_tableStart"),key:"resvBeginTime"},{prefix:this.$t("index_main_profile_common_tableEnd"),key:"resvEndTime"}]},{label:"实际结束时间",width:160,align:"center",prop:"resvEndRealTime"},{label:this.$t("index_main_profile_PerAppoint_tableCol7"),prop:"resvStatus",align:"center",width:100}],{searchModel:{date:[this.$moment().startOf("week").format("YYYY-MM-DD"),this.$moment().endOf("week").format("YYYY-MM-DD")],check:[2,4,256]},pageData:{pageNum:1,pageSize:10,count:0},orderModel:{orderKey:"",orderModel:""},tableData:[],breakReason:"",showBreakReason:!1,isVisible:!1,isLoading:!1,resvDevInfo:[]}},created:function(){if(this.getBorrowRv(),4&this.sysConfig.resvTheme){var e={label:this.$t("index_main_profile_PerAppoint_tableCol2"),prop:"testName"};this.tableCols.splice(1,0,e)}},methods:{isShowDelResv:function(e){return e&&e.endEarly&&this.userInfo.accNo===e.appAccNo},isShowCancel:function(e){return e&&this.userInfo.accNo==e.appAccNo&&(4&e.resvStatus)<=0&&(128&e.resvStatus)<=0},showBreakRea:function(e){return(512&e.resvStatus)>0},handleSearch:function(e){var t=e.check,n=e.date;this.searchModel.check=t,this.searchModel.date=n,this.getBorrowRv()},onSortChange:function(e){e.column;var t=e.prop,n=e.order;this.orderModel.orderKey=t,this.orderModel.orderModel="ascending"===n?"asc":"descending"===n?"desc":"",this.getBorrowRv()},onPageChange:function(e){var t=e.pageNum,n=e.pageSize;this.pageData.pageNum=t,this.pageData.pageSize=n,this.getBorrowRv()},getTableStatus:function(e){var t=Object(m["b"])(e.resvStatus,this.statusOption),n=this.statusOption.filter((function(e){return t.includes(e.value)}));return n},getColor:function(e){var t=e.value,n="";switch(t){case 2:n="primary";break;case 4:n="info";break;case 256:n="warning";break;case 128:n="finish";break;case 16:n="danger";break}return n},handleWhyBreak:function(e){this.getCheckInfo(e.resvId),this.showBreakReason=!0},handleover:function(e){var t=this;this.$confirm(this.$t("index_main_profile_confirmBox_text"),this.$t("common_confirm_title"),{confirmButtonText:this.$t("common_confirm_cfmBtnTxt"),cancelButtonText:this.$t("common_confirm_cancelBtnTxt"),type:"warning"}).then((function(){t.overReserve(e.uuid)})).catch((function(){}))},handleDelete:function(e){var t=this;this.$confirm(this.$t("index_main_profile_confirmBox_text"),this.$t("common_confirm_title"),{confirmButtonText:this.$t("common_confirm_cfmBtnTxt"),cancelButtonText:this.$t("common_confirm_cancelBtnTxt"),type:"warning"}).then((function(){t.delReserve(e.uuid)})).catch((function(){}))},handleDevices:function(e){this.getResvDevInfo(e.resvId),this.isVisible=!0},overReserve:function(e){var t=this,n={uuid:e};Object(u["u"])({params:n}).then((function(e){0===e.code?(t.$message({type:"success",message:e.message}),t.getBorrowRv()):t.$message({type:"error",message:e.message})}))},delReserve:function(e){var t=this,n={uuid:e};Object(u["a"])({params:n}).then((function(e){0===e.code?(t.$message({type:"success",message:e.message}),t.getBorrowRv()):t.$message({type:"error",message:e.message})}))},getCheckInfo:function(e){var t=this,n={resvId:e};Object(u["h"])({params:n}).then((function(e){0==e.code?e.data?t.breakReason=data:t.breakReason=t.$t("index_main_profile_dialogTitle_noFailureReason"):t.$message({type:"error",message:e.message})}))},getBorrowRv:function(){var e=this,t=this.searchModel,n=t.date,a=t.check,r=this.orderModel,o=r.orderKey,s=r.orderModel,i=this.pageData,l=i.pageNum,c=i.pageSize,m={beginDate:n[0],endDate:n[1],page:l,pageSize:c};a.length>0&&(m["needStatus"]=a.reduce((function(e,t){return e|t}),0)),o&&s&&(m["orderKey"]=o,m["orderModel"]=s),Object(u["f"])({params:m}).then((function(t){0==t.code?t.data?(e.tableData=t.data,e.pageData.count=t.count):(e.tableData=[],e.pageData.count=0):e.$message({type:"error",message:t.message})}))},getResvDevInfo:function(e){var t=this,n={resvId:e};this.isLoading=!0,Object(u["q"])({params:n}).then((function(e){0==e.code?e.data?t.resvDevInfo=e.data:t.resvDevInfo=[]:t.$message({type:"error",message:e.message}),t.isLoading=!1}))}},filters:{filterEndRealTime:function(e,t){return e?t(e).format("YYYY-MM-DD HH:mm"):"未结束"},filteredTrueName:function(e){return e&&Array.isArray(e.resvMemberInfoList)?e.resvMemberInfoList.map((function(e){return"".concat(e.trueName,"(").concat(e.logonName,")")})).join(","):""}}},pt=ft,ht=Object($["a"])(pt,lt,ct,!1,null,"3af4c6ee",null),vt=ht.exports,_t={data:function(){return this.valEnum={USERORDER:0,ACTIVITY:1,CREDIT:2,USERINFO:3,EXAMSEAT:4,BORROWDEVICE:5},{currentIndex:this.valEnum.USERORDER,tabs:[{index:this.valEnum.USERORDER,title:this.$t("index_main_profile_tabUserOrder")},{index:this.valEnum.ACTIVITY,title:this.$t("index_main_profile_tabActivityorder")},{index:this.valEnum.EXAMSEAT,title:this.$t("index_main_profile_examOrder")},{index:this.valEnum.BORROWDEVICE,title:this.$t("index_main_profile_borrowDevice")},{index:this.valEnum.CREDIT,title:this.$t("index_main_profile_tabCreditDetail")},{index:this.valEnum.USERINFO,title:this.$t("index_main_profile_tabUserInfo")}]}},beforeUpdate:function(){this.updateTabsTitle()},methods:{changeTab:function(e){this.currentIndex=e.index},updateTabsTitle:function(){this.tabs[0].title=this.$t("index_main_profile_tabUserOrder"),this.tabs[1].title=this.$t("index_main_profile_tabActivityorder"),this.tabs[2].title=this.$t("index_main_profile_examOrder"),this.tabs[3].title=this.$t("index_main_profile_borrowDevice"),this.tabs[4].title=this.$t("index_main_profile_tabCreditDetail"),this.tabs[5].title=this.$t("index_main_profile_tabUserInfo")}},computed:{tabList:function(){var e=this,t=[];this.sysConfig.userCredit===this.valEnum.CREDIT&&t.push(this.valEnum.CREDIT),this.hasSeatMdu()||this.hasRoomMdu()||t.push(this.valEnum.USERORDER);parseInt(this.$store.getters.sysConfig.syskind);this.hasActivityMdu()||t.push(this.valEnum.ACTIVITY),this.hasExamSeat()||t.push(this.valEnum.EXAMSEAT),this.hasBorrowMdu()||t.push(this.valEnum.BORROWDEVICE);var n=this.tabs.filter((function(e){return!t.includes(e.index)}));return n.some((function(t){return t.index==e.defaultIndex}))?this.currentIndex=this.defaultIndex:this.currentIndex=0,n},defaultIndex:function(){var e=this.$route.params,t=this.$route.query,n=0;return Object.keys(e).length>0?n=e.id:Object.keys(t).length>0&&(n=t.id),n}},components:{MyTabs:o["a"],UserOrder:z,CreditDetails:V,UserInfo:me,ActivityOrder:ge,ActivityCustomOrder:Oe,ExamSeat:it,BorrowDevice:vt}},bt=_t,gt=(n("f1c1"),Object($["a"])(bt,a,r,!1,null,"63be7792",null));t["default"]=gt.exports},ea1e:function(e,t,n){"use strict";n("5883")},ea27:function(e,t,n){"use strict";var a=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{visible:e.isShowReviewCard,title:e.title,width:e.width,"append-to-body":"","modal-append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.isShowReviewCard=t},close:e.onDialogClose,open:e.onDialogOpen},scopedSlots:e._u([{key:"footer",fn:function(){return[t("el-button",{attrs:{size:"small"},on:{click:function(t){e.isShowReviewCard=!1}}},[e._v(e._s(e.$t("com_btn_cancel")))]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleConfirm}},[e._v(e._s(e.$t("com_btn_confirm")))])]},proxy:!0}])},[t("el-form",{ref:"formRef",attrs:{model:e.formModel,rules:e.formRules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"回顾主题",prop:"reviewTitle"}},[t("el-input",{attrs:{size:"small",clearable:"",placeholder:"请输入活动主题"},model:{value:e.formModel.reviewTitle,callback:function(t){e.$set(e.formModel,"reviewTitle",t)},expression:"formModel.reviewTitle"}})],1),t("el-form-item",{attrs:{label:"活动内容",prop:"content"}},[t("quill-editor",{ref:"editor",staticClass:"ql-editor-class",attrs:{options:e.editorOption},on:{blur:e.handleBlur,focus:function(t){return e.handleBlur(t)}},model:{value:e.formModel.content,callback:function(t){e.$set(e.formModel,"content",t)},expression:"formModel.content"}}),t("el-upload",{ref:"uniqueId",staticStyle:{display:"none"},attrs:{action:e.uploadUrl,"show-file-list":!1,"before-upload":e.newEditorBeforeUpload,"on-success":e.newEditroSuccess,id:"reviewCardUniqueId","http-request":e.handleRequest}})],1),t("el-form-item",{attrs:{label:"封面图片",prop:"coverImage"}},[t("ImgList",{attrs:{fileListProp:e.fileList},on:{success:e.handleSuccess,remove:e.handleRemove}})],1),e.showStatus?t("el-form-item",{attrs:{label:"状态",prop:"reviewStatus"}},[t("el-radio-group",{model:{value:e.formModel.reviewStatus,callback:function(t){e.$set(e.formModel,"reviewStatus",t)},expression:"formModel.reviewStatus"}},e._l(e.statusOptions,(function(n){return t("el-radio",{key:n.value,attrs:{label:n.value}},[e._v(e._s(n.label))])})),1)],1):e._e()],1)],1)},r=[],o=(n("96cf"),n("1da1")),s=(n("28a5"),function(){var e=this,t=e._self._c;return t("div",{class:{hidden:e.fileList.length>=e.limit}},[t("el-upload",{attrs:{action:"/activityReview/upload",accept:"image/*","file-list":e.fileListProp,"before-upload":e.beforeAvatarUpload,"on-exceed":e.handleExceed,"on-success":e.handleSuccess,"on-error":e.handleError,"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"http-request":e.handleCustomUpload}},[t("i",{staticClass:"el-icon-plus"}),t("div",{staticStyle:{"font-size":"12px"},attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传一张")])]),t("el-dialog",{attrs:{"append-to-body":!0,"modal-append-to-body":!0,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)}),i=[],l=(n("ac6a"),n("c5f6"),{props:{limit:{type:Number,default:1},fileListProp:{type:Array,default:[]}},data:function(){return{dialogImageUrl:"",dialogVisible:!1,fileList:this.fileListProp}},watch:{fileListProp:function(e){e&&Array.isArray(e)&&(this.fileList=e)}},methods:{handleRemove:function(e,t){var n=this;this.fileList=[],t.forEach((function(e){n.fileList.push(e.response.data)})),this.$emit("remove",e)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleExceed:function(e,t){this.$message.warning(this.$t("index_main_activity_form_approval_tip"))},handleSuccess:function(e,t){this.uploadFlag=!1,this.uploadPercent=0,0===e.code?(this.fileList.push(t),this.$message.success(e.message),this.$emit("success",e)):this.$message.error(e.message)},handleError:function(e,t,n){this.$message.error(this.$t("index_main_activity_form_approval_tip5"))},beforeAvatarUpload:function(e){var t=e.size/1024/1024<40;return t||this.$message.error(this.$t("index_main_activity_form_approval_tip")),t},handleCustomUpload:function(e){if(e.file){var t=e.file,n={onUploadProgress:function(e){},headers:{"Content-Type":"multipart-formdata",Accept:"*/*"}},a=new FormData;a.append("file",t),this.$axios.post(e.action,a,n).then((function(n){e.onSuccess(n.data,t)}))}}}}),c=l,u=(n("00b1"),n("2877")),m=Object(u["a"])(c,s,i,!1,null,"39f5e3a0",null),d=m.exports,f={name:"ReviewCardDia",components:{ImgList:d},props:{title:{type:String,default:"默认标题"},width:{type:String,default:"80%"},showStatus:{type:Boolean,default:!1},review:{type:Object,default:null}},data:function(){var e=[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["link","image"]];return this.statusOptions=[{label:"草稿",value:1},{label:"发布",value:2}],{editorOption:{modules:{toolbar:e}},isShowReviewCard:!1,formModel:{reviewTitle:"",coverImage:"",content:"",reviewStatus:1},formRules:{reviewTitle:[{required:!0,message:"必须填写活动主题",trigger:"blur"}]},fileList:[],uploadUrl:"/activityReview/upload"}},watch:{review:{handler:function(e){e&&(this.formModel.reviewTitle=this.review.reviewTitle,this.formModel.content=this.review.reviewContent,this.review.coverImage&&(this.formModel.coverImage=this.review.coverImage,this.fileList=[],this.fileList.push({url:window.g.ApiUrl+"/"+this.review.coverImage,name:this.review.coverImage.split("-")[1]})),this.showStatus&&(this.review.reviewStatus=this.review.reviewStatus||1,this.formModel.reviewStatus=this.review.reviewStatus))},immediate:!0}},methods:{showDialog:function(){this.isShowReviewCard=!0},hideDialog:function(){this.isShowReviewCard=!1},toggleDialog:function(){this.isShowReviewCard=!this.isShowReviewCard},onDialogOpen:function(){this.$nextTick((function(){var e=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t&&(n=document.querySelector("#reviewCardUniqueId input"),n.click());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();this.$refs.editor.quill.getModule("toolbar").addHandler("image",e)})),this.$emit("open")},onDialogClose:function(){var e=this;this.$nextTick((function(){e.$refs.formRef.resetFields(),e.fileList=[],e.$emit("close")}))},handleConfirm:function(){var e=null;e=this.showStatus?JSON.parse(JSON.stringify(this.formModel)):JSON.parse(JSON.stringify(this.formModel),(function(e,t){if("reviewStatus"!==e)return t})),this.$emit("confirm",e)},handleSuccess:function(e){this.formModel.coverImage=e.data},handleRemove:function(){this.formModel.coverImage=""},handleBlur:function(){this.action||(this.action=this.$refs.editor.$el.querySelector(".ql-editing a.ql-action"),this.action&&this.action.addEventListener("click",(function(e){var t=document.querySelector(".ql-tooltip,.ql-editing"),n=t.style.left,a=t.style.top;0===n.indexOf("-")?t.style.left=0:t.style.left=n,0===a.indexOf("-")?t.style.top="50px":t.style.top=a})));var e=this.$refs.editor.$el.querySelector(".ql-tooltip,.ql-editing");if(e){var t=e.style.left,n=e.style.top;0===t.indexOf("-")?e.style.left=0:e.style.left=t,0===n.indexOf("-")?e.style.top="50px":e.style.top=n}},handleRequest:function(e){var t=e.file,n=new FormData;n.append("file",t);var a={headers:{"Content-Type":"multipart/form-data",Accept:"*/*"}};this.$axios.post(this.uploadUrl,n,a).then((function(t){e.onSuccess(t.data)}))},newEditorBeforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,n=e.size/1024/1024<2;return t||this.$message.error("上传图片只能是 JPG或PNG 格式!"),n||this.$message.error("上传图片大小不能超过 2MB!"),t&&n&&(this.imageLoading=!0),t&&n},newEditroSuccess:function(e,t,n){if(this.imageLoading=!0,0===e.code){var a=this.$refs.editor.quill.getSelection(),r=null!=a?a.index:0;this.$refs.editor.quill.insertEmbed(r,"image","".concat(window.g.ApiUrl,"/").concat(e.data)),this.imageLoading=!1}else this.$message.error(res.message),this.imageLoading=!1}}},p=f,h=(n("20f5"),Object(u["a"])(p,a,r,!1,null,"2c4015db",null));t["a"]=h.exports},f1c1:function(e,t,n){"use strict";n("ac52")},ffe4:function(e,t,n){}}]);