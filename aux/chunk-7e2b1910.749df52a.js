(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e2b1910"],{"06b6":function(e,t,a){"use strict";a("1404")},"06c5":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var r=a("6b75");function n(e,t){if(e){if("string"===typeof e)return Object(r["a"])(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Object(r["a"])(e,t):void 0}}},1404:function(e,t,a){},2909:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a("6b75");function n(e){if(Array.isArray(e))return Object(r["a"])(e)}function i(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var o=a("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e){return n(e)||i(e)||Object(o["a"])(e)||s()}},"3e01":function(e,t,a){"use strict";a("8720")},"6b75":function(e,t,a){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}a.d(t,"a",(function(){return r}))},"6f96":function(e,t,a){"use strict";a.d(t,"j",(function(){return i})),a.d(t,"g",(function(){return s})),a.d(t,"i",(function(){return m})),a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return p})),a.d(t,"f",(function(){return v})),a.d(t,"k",(function(){return g})),a.d(t,"c",(function(){return _})),a.d(t,"d",(function(){return y})),a.d(t,"e",(function(){return x})),a.d(t,"h",(function(){return $}));a("96cf");var r=a("1da1"),n=a("b480");a("4be7");function i(e){return o.apply(this,arguments)}function o(){return o=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(n["a"])({method:"post",url:"activity",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function s(e){return l.apply(this,arguments)}function l(){return l=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(n["a"])({method:"get",url:"codingTable/getAll",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function m(e){return c.apply(this,arguments)}function c(){return c=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(n["a"])({method:"post",url:"/activity/custom/join",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function u(e){return f.apply(this,arguments)}function f(){return f=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(n["a"])({method:"post",url:"/activity/custom/exit",params:t.params});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function p(e){return d.apply(this,arguments)}function d(){return d=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(n["a"])({method:"get",url:"/customTables/columns",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function v(e){return h.apply(this,arguments)}function h(){return h=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(n["a"])({method:"get",url:"codingTable/getAll",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function g(e){return D.apply(this,arguments)}function D(){return D=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(n["a"])({method:"post",url:"activity/custom/save",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function _(e){return b.apply(this,arguments)}function b(){return b=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(n["a"])({method:"get",url:"/activity/custom/advance",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function y(e){return T.apply(this,arguments)}function T(){return T=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(n["a"])({method:"get",url:"/activity/custom/review",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function x(e){return w.apply(this,arguments)}function w(){return w=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(n["a"])({url:"/activityReview/all",method:"get",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function $(e){return C.apply(this,arguments)}function C(){return C=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(n["a"])({url:"/activityReview/content",method:"get",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}},7505:function(e,t,a){},7514:function(e,t,a){"use strict";var r=a("5ca1"),n=a("0a49")(5),i="find",o=!0;i in[]&&Array(1)[i]((function(){o=!1})),r(r.P+r.F*o,"Array",{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(i)},"7dfd":function(e,t,a){"use strict";a("7505")},"7e07":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"innerwrapp"},[t("span",{staticClass:"back-button",on:{click:function(t){return e.$router.go(-1)}}},[e._v(e._s(e.$t("common_button_back")))]),t("div",{staticClass:"title"},[t("h3",[e._v(e._s(e.$t("index_main_activity_form_title")))])]),e.isZju?[t("ActivityMustKnowZJU",{attrs:{config:e.roomConfig}}),t("ActivityFormZJU")]:[t("ActivityMustKnow",{attrs:{config:e.roomConfig}}),t("ActivityCustomForm")]],2)},n=[],i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"infoList"},[t("el-form",{ref:"form",staticStyle:{},attrs:{model:e.formData,"label-width":"180px",rules:e.rules}},[t("div",{staticClass:"info-item"},[t("div",{staticClass:"itemTitle"},[e._v("基本信息")]),t("div",{staticClass:"itemCon"},[(16&e.sysConfig.resvTheme)>0?t("el-form-item",{attrs:{label:"活动名称:",prop:"testName"}},[(16&e.sysConfig.resvthemefix)>0?t("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:e.formData.testName,callback:function(t){e.$set(e.formData,"testName",t)},expression:"formData.testName"}}):t("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择"},model:{value:e.formData.testName,callback:function(t){e.$set(e.formData,"testName",t)},expression:"formData.testName"}},e._l(e.titleArr,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),t("el-form-item",{attrs:{label:"主办单位:",prop:"organizer"}},[t("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:e.formData.organizer,callback:function(t){e.$set(e.formData,"organizer",t)},expression:"formData.organizer"}})],1),t("el-form-item",{attrs:{label:"承办单位:"}},[t("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:e.formData.realOrganizer,callback:function(t){e.$set(e.formData,"realOrganizer",t)},expression:"formData.realOrganizer"}})],1),t("el-form-item",{attrs:{label:"活动级别"}},[t("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.formData.activityLevel,callback:function(t){e.$set(e.formData,"activityLevel",t)},expression:"formData.activityLevel"}},e._l(e.levelOption,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"活动形式类型"}},[t("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.formData.activeFormType,callback:function(t){e.$set(e.formData,"activeFormType",t)},expression:"formData.activeFormType"}},e._l(e.formTypeOption,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"活动内容类型"}},[t("el-cascader",{attrs:{options:e.typeOption,"show-all-levels":!1,size:"small",props:e.typeProps},model:{value:e.activeContentTypeArr,callback:function(t){e.activeContentTypeArr=t},expression:"activeContentTypeArr"}})],1),t("el-form-item",{attrs:{label:"主持人"}},[t("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:e.formData.president,callback:function(t){e.$set(e.formData,"president",t)},expression:"formData.president"}})],1),t("el-form-item",{attrs:{label:"主讲人"}},[t("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:e.formData.presenter,callback:function(t){e.$set(e.formData,"presenter",t)},expression:"formData.presenter"}})],1),t("el-form-item",{attrs:{label:"组织形式"}},[t("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.formData.organizationalForm,callback:function(t){e.$set(e.formData,"organizationalForm",t)},expression:"formData.organizationalForm"}},e._l(e.organization,(function(e){return t("el-option",{key:e.vlaue,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"需要设备"}},[t("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:e.formData.needDevice,callback:function(t){e.$set(e.formData,"needDevice",t)},expression:"formData.needDevice"}})],1),t("el-form-item",{attrs:{label:"参与者要求"}},[t("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.formData.requirement,callback:function(t){e.$set(e.formData,"requirement",t)},expression:"formData.requirement"}})],1)],1)]),t("div",{staticClass:"info-item"},[t("div",{staticClass:"itemTitle"},[e._v("联系信息")]),t("div",{staticClass:"itemCon"},[t("el-form-item",{attrs:{label:"联系人",prop:"contactPerson"}},[t("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:e.formData.contactPerson,callback:function(t){e.$set(e.formData,"contactPerson",t)},expression:"formData.contactPerson"}})],1),t("el-form-item",{attrs:{label:"联系电话",prop:"contactPhone"}},[t("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:e.formData.contactPhone,callback:function(t){e.$set(e.formData,"contactPhone",e._n(t))},expression:"formData.contactPhone"}})],1)],1)]),t("div",{staticClass:"info-item"},[t("div",{staticClass:"itemTitle"},[e._v("活动人数限制")]),t("div",{staticClass:"itemCon"},[t("el-form-item",{attrs:{label:"参与人数上限:",prop:"limitNum"}},[t("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:e.formData.limitNum,callback:function(t){e.$set(e.formData,"limitNum",e._n(t))},expression:"formData.limitNum"}})],1),t("el-form-item",{attrs:{label:"校外参与人数",prop:"outsideNum"}},[t("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:e.formData.outsideNum,callback:function(t){e.$set(e.formData,"outsideNum",e._n(t))},expression:"formData.outsideNum"}})],1),t("el-form-item",{attrs:{label:"校友参与人数",prop:"alumniNum"}},[t("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:e.formData.alumniNum,callback:function(t){e.$set(e.formData,"alumniNum",e._n(t))},expression:"formData.alumniNum"}})],1)],1)]),t("div",{staticClass:"info-item"},[t("div",{staticClass:"itemTitle"},[e._v("活动时间安排")]),t("div",{staticClass:"itemCon"},[t("el-form-item",{attrs:{label:"发布日期",prop:"releaseDate"}},[t("el-date-picker",{attrs:{type:"date",size:"small",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.formData.releaseDate,callback:function(t){e.$set(e.formData,"releaseDate",t)},expression:"formData.releaseDate"}})],1),t("el-form-item",{attrs:{label:"申请加入截止日期",prop:"joinDeadline"}},[t("el-date-picker",{attrs:{type:"date",size:"small",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.formData.joinDeadline,callback:function(t){e.$set(e.formData,"joinDeadline",t)},expression:"formData.joinDeadline"}}),t("span",{staticClass:"tips"},[e._v("提示: (不包含当日)")])],1),t("el-form-item",{attrs:{label:"活动日期",prop:"reserveDate"}},[t("el-date-picker",{attrs:{type:"date",size:"small",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.formData.reserveDate,callback:function(t){e.$set(e.formData,"reserveDate",t)},expression:"formData.reserveDate"}})],1),t("el-form-item",{attrs:{label:"开始时间",prop:"startTime"}},[t("el-time-picker",{attrs:{size:"small",format:"HH:mm","value-format":"HH:mm",placeholder:"任意时间点"},model:{value:e.formData.startTime,callback:function(t){e.$set(e.formData,"startTime",t)},expression:"formData.startTime"}})],1),t("el-form-item",{attrs:{label:"结束时间",prop:"endTime"}},[t("el-time-picker",{attrs:{size:"small",format:"HH:mm","value-format":"HH:mm",placeholder:"任意时间点"},model:{value:e.formData.endTime,callback:function(t){e.$set(e.formData,"endTime",t)},expression:"formData.endTime"}})],1)],1)]),t("div",{staticClass:"info-item"},[t("div",{staticClass:"itemTitle"},[e._v("活动配置")]),t("div",{staticClass:"itemCon",staticStyle:{"text-align":"center","padding-bottom":"20px"}},[t("el-checkbox-group",{model:{value:e.activityPropArr,callback:function(t){e.activityPropArr=t},expression:"activityPropArr"}},e._l(e.propOption,(function(a){return t("el-checkbox",{key:a.value,attrs:{label:a.value}},[e._v(e._s(a.label))])})),1)],1)]),t("div",{staticClass:"info-item"},[t("div",{staticClass:"itemTitle"},[e._v("其他信息")]),t("div",{staticClass:"itemCon"},[16&e.sysConfig.resvmemo?t("el-form-item",{attrs:{label:"活动简介"}},[t("el-input",{attrs:{type:"textarea",placeholder:e.sysConfig.resvmemotip,maxlength:parseInt(e.sysConfig.resvmemolen),"show-word-limit":""},model:{value:e.formData.activityIntroduction,callback:function(t){e.$set(e.formData,"activityIntroduction",t)},expression:"formData.activityIntroduction"}})],1):e._e(),t("el-form-item",{attrs:{label:"上传相关资料:"}},[t("ManualUpload",{attrs:{action:"/activity/upload","auto-upload":!0},on:{success:e.handleDataUrl,handleCustomUpload:e.handleCustomUpload}})],1),t("el-form-item",{attrs:{label:"描述文件:"}},[t("ManualUpload",{attrs:{action:"/activity/upload","auto-upload":!0},on:{success:e.handleDescription,handleCustomUpload:e.handleCustomUpload}})],1),t("el-form-item",{attrs:{label:"活动海报:"}},[t("imgList",{on:{success:e.handlePoster}})],1),"1"===e.sysConfig.resvCode?t("el-form-item",{attrs:{label:"验证码",prop:"captcha"}},[t("div",{staticClass:"code-wrapper"},[t("el-input",{staticStyle:{width:"30%"},attrs:{size:"small"},model:{value:e.formData.captcha,callback:function(t){e.$set(e.formData,"captcha",t)},expression:"formData.captcha"}}),t("img",{attrs:{src:e.srcData,alt:""},on:{click:e.handleImgSrc}})],1)]):e._e(),t("el-form-item")],1)]),t("el-form-item",{staticClass:"submitBtn"},[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleSubmitBtn}},[e._v("提交")]),t("el-button",{attrs:{size:"small"}},[e._v("取消")])],1)],1)],1)},o=[],s=(a("7f7f"),a("96cf"),a("1da1")),l=function(){var e=this,t=e._self._c;return t("div",[t("el-upload",{ref:"manualUpload",attrs:{action:e.action,"before-upload":e.beforeAvatarUpload,limit:e.limit,"file-list":e.fileList,"auto-upload":e.autoUpload,"on-exceed":e.handleExceed,"on-success":e.handleSuccess,"on-error":e.handleError,"on-change":e.handleChange,"http-request":e.handleCustomUpload}},[t("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v(e._s(e.$t("common_button_selectFile")))]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(e.tip))])],1)],1)},m=[],c=(a("c5f6"),{name:"ManualUpload",props:{action:{type:String,default:""},autoUpload:{type:Boolean,default:!1},limit:{type:Number,default:1},tip:{type:String,default:"只能上传1个文件,文件大小不超过40M"},beforeAvatarUpload:{type:Function,default:function(e){if(!e)return this.$message({type:"warning",message:this.$t("index_main_activity_form_approval_tip1")}),!1;if(e.size<=0)return this.$message({type:"warning",message:this.$t("index_main_activity_form_approval_tip2")}),!1;var t=/(json|md|exe)$/.test(e.name);if(t)return this.$message.error(this.$t("index_main_activity_form_approval_tip3")),!1;var a=e.size/1024/1024<40;return a||this.$message.error(this.$t("index_main_activity_form_approval_tip4")),a}},column:{type:Object,default:function(){}}},data:function(){return{fileList:[]}},methods:{submitUpload:function(){this.$refs.manualUpload.submit()},handleExceed:function(e,t){this.$message.warning("只能上传".concat(this.limit,"个文件"))},handleSuccess:function(e,t,a){0===e.code?(this.$message.success(e.message),this.$emit("success",e,this.column)):this.$message.error(e.message)},handleError:function(e,t,a){this.$message.error(this.$t("index_main_activity_form_approval_tip5"))},handleChange:function(e,t){this.fileList=t},handleCustomUpload:function(e){this.$emit("handleCustomUpload",e)}}}),u=c,f=a("2877"),p=Object(f["a"])(u,l,m,!1,null,"a6eca63a",null),d=p.exports,v=a("6f96"),h=a("9e17"),g=function(){var e=this,t=e._self._c;return t("div",[t("el-upload",{attrs:{action:"/activity/upload","list-type":"picture-card",accept:"image/*","file-list":e.fileList,"before-upload":e.beforeAvatarUpload,"on-exceed":e.handleExceed,"on-success":e.handleSuccess,"on-error":e.handleError,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"http-request":e.handleCustomUpload}},[t("i",{staticClass:"el-icon-plus"})]),t("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},D=[],_=(a("ac6a"),{props:{column:{type:Object,default:function(){}}},data:function(){return{dialogImageUrl:"",dialogVisible:!1,fileList:[]}},methods:{handleRemove:function(e,t){var a=[];t.forEach((function(e){a.push(e.response.data)})),this.$emit("remove",a)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleExceed:function(e,t){this.$message.warning(this.$t("index_main_activity_form_approval_tip"))},handleSuccess:function(e,t,a){0===e.code?(this.$message.success(e.message),this.$emit("success",e,this.column)):this.$message.error(e.message)},handleError:function(e,t,a){this.$message.error(this.$t("index_main_activity_form_approval_tip5"))},beforeAvatarUpload:function(e){var t=e.size/1024/1024<40;return t||this.$message.error(this.$t("index_main_activity_form_approval_tip")),t},handleCustomUpload:function(e){if(e.file){var t=e.file,a={"Content-Type":"multipart-formdata",Accept:"*/*"},r=new FormData;r.append("file",t),this.$axios.post(e.action,r,a).then((function(a){e.onSuccess(a.data,t)}))}}}}),b=_,y=Object(f["a"])(b,g,D,!1,null,"67be6033",null),T=y.exports,x={name:"AcitvityForm",data:function(){return{titleArr:[],activityPropArr:[],activeContentTypeArr:[],reserveInfo:{sysKind:16,appAccNo:"",resvProperty:0,testName:"",resvBeginTime:"",resvEndTime:"",resvDev:[],resvKind:2,memberKind:1},formData:{reserveDate:this.$store.state.newResearch.resvDates,startTime:this.$store.state.newResearch.roomConfig.startTime,endTime:this.$store.state.newResearch.roomConfig.endTime,testName:"",organizer:"",requirement:"",realOrganizer:"",totalNum:"",limitNum:"",outsideNum:"",alumniNum:"",activityLevel:"",activeFormType:"",activeContentType:"",president:"",presenter:"",contactPerson:"",contactPhone:"",organizationalForm:"",needDevice:"",releaseDate:"",joinDeadline:"",activityProp:"",dataUrl:"",sportsPoster:"",descriptionUrl:"",captcha:"",activityIntroduction:""},srcData:"".concat(window.g.ApiUrl,"/captcha?id=").concat(Date.now()),levelOption:[{label:"国际级",value:1},{label:"国家级",value:2},{label:"校级",value:3},{label:"管级",value:4}],formTypeOption:[{label:"展览",value:1},{label:"学术(学习)竞赛",value:2},{label:"教学课程",value:3},{label:"学术会议",value:4},{label:"学术讲座",value:5},{label:"学术(学习)沙龙",value:6},{label:"影视观摩",value:7},{label:"多媒体制作",value:8},{label:"其他",value:9}],propOption:[{label:"对出席人员考勤",value:2},{label:"发布活动",value:4},{label:"开放报名",value:8}],organization:[],typeOption:[],typeProps:{label:"name",value:"id",children:"children"},posterTip:"只能上传 jpg,png,JPEG格式, 40M以内"}},methods:{handleImgSrc:function(){this.srcData="".concat(window.g.ApiUrl,"/captcha?id=").concat(Date.now())},handleDataUrl:function(e){this.formData.dataUrl=e.data},handleDescription:function(e){this.formData.descriptionUrl=e.data},handlePoster:function(e){this.formData.sportsPoster=e.data},handleBefore:function(e){var t=e.size/1024/1024<40;t||this.$message.error("上传文件不能超过40M!");var a=/^image\/(jpeg|png|jpg)$/.test(e.type);return a||this.$message.error("上传图片格式不对!"),t&&a},handleSubmitBtn:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return e.$message.warning("请完善数据后再提交"),!1;e.formData.activeContentType=e.activeContentTypeArr.join(","),e.reserveInfo.resvBeginTime="".concat(e.formData.reserveDate," ").concat(e.formData.startTime,":00"),e.reserveInfo.resvEndTime="".concat(e.formData.reserveDate," ").concat(e.formData.endTime,":00"),e.reserveInfo.memberKind=e.formData.limitNum>1?2:1,e.reserveInfo.testName=e.formData.testName,e.reserveInfo.captcha=e.formData.captcha,e.activityPropArr.length&&(e.formData.activityProp=e.activityPropArr.reduce((function(e,t){return e+t}))),e.formData.reserveInfo=e.reserveInfo,Object(v["j"])(e.formData).then((function(t){0===t.code?(e.$message.success(t.message),e.$router.push({name:"userinfo",params:{id:1}})):(e.handleImgSrc(),e.$message.error(t.message))}))}))},getDict:function(e){return Object(v["g"])({params:{codeType:e}}).then((function(e){return e}))},handleCustomUpload:function(e){if(e.file){var t=e.file,a={"Content-Type":"multipart-formdata",Accept:"*/*"},r=new FormData;r.append("file",t),this.$axios.post(e.action,r,a).then((function(a){e.onSuccess(a.data,t)}))}},initDict:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getDict(1001);case 2:return t=e.sent,0===t.code&&(this.typeOption=t.data),e.next=6,this.getDict(1002);case 6:return a=e.sent,0===a.code&&(this.levelOption=a.data.map((function(e){return{label:e.name,value:e.id}}))),e.next=10,this.getDict(1003);case 10:return r=e.sent,0===r.code&&(this.formTypeOption=r.data.map((function(e){return{label:e.name,value:e.id}}))),e.next=14,this.getDict(1004);case 14:n=e.sent,0===n.code&&(this.organization=n.data.map((function(e){return{label:e.name,value:e.id}})));case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},components:{ManualUpload:d,imgList:T},computed:{newResearch:function(){return this.$store.state.newResearch},userInfo:function(){return this.$store.state.userInfo},rules:function(){var e={testName:[{required:!0,message:"该项不能为空",trigger:"change"}],reserveDate:[{required:!0,message:"该项不能为空",trigger:"change"}],startTime:[{required:!0,message:"该项不能为空",trigger:"change"}],endTime:[{required:!0,message:"该项不能为空",trigger:"change"}],releaseDate:[{required:!0,message:"请选择日期",trigger:"change"}],joinDeadline:[{required:!0,message:"请选择日期",trigger:"change"}],organizer:[{required:!0,message:"该项不能为空",trigger:"blur"}],contactPerson:[{required:!0,message:"该项不能为空",trigger:"blur"}],contactPhone:[{required:!0,message:"该项不能为空",trigger:"blur"},{type:"number",message:"请输入数字"}],limitNum:[{required:!0,message:"该项不能为空",trigger:"blur"},{type:"number",message:"请输入数字"}],outsideNum:[{required:!0,message:"该项不能为空",trigger:"blur"},{type:"number",message:"请输入数字"}],alumniNum:[{required:!0,message:"该项不能为空",trigger:"blur"},{type:"number",message:"请输入数字"}],captcha:[{required:!0,message:"该项不能为空",trigger:"blur"}]};return(16&this.sysConfig.resvthememust)>0&&(e.testName=[{required:!0,message:"该项不能为空",trigger:"blur"}]),e}},created:function(){var e=this;Object(h["h"])({params:{codeType:1005}}).then((function(t){0===t.code&&(e.titleArr=t.data.map((function(e){return{label:e.name,value:e.name}})))})),this.initDict(),this.reserveInfo.appAccNo=this.userInfo.accNo,this.reserveInfo.resvMember=[this.userInfo.accNo],this.reserveInfo.resvDev=[this.newResearch.roomConfig.devId]}},w=x,$=(a("7dfd"),Object(f["a"])(w,i,o,!1,null,"125a1fee",null)),C=$.exports,R=function(){var e=this,t=e._self._c;return t("div",{staticClass:"apply-info"},[t("div",{staticClass:"info-title"},[e._v(e._s(e.config.roomName))]),t("div",{staticClass:"info-content"},[t("div",{staticClass:"con-left"},[e._v("申请须知:")]),t("div",{staticClass:"con-right"},[t("p",[e._v("\r\n          "+e._s(e.$t("PcServe_ReserStatus_text2"))+":\r\n          "),t("span",[e._v(e._s(e.config.openTime))]),e._v(" ;\r\n          "+e._s(e.$t("PcServe_ReserStatus_text3"))+":\r\n          "),0!==e.config.latestResvTime?t("span",[e.latestResvTime.d?t("span",[e._v(e._s(e.latestResvTime.d)+e._s(e.$t("const_PcServe_text15d")))]):e._e(),e.latestResvTime.h?t("span",[e._v(e._s(e.latestResvTime.h)+e._s(e.$t("const_PcServe_text15h")))]):e._e(),e.latestResvTime.m?t("span",[e._v(e._s(e.latestResvTime.m)+e._s(e.$t("const_PcServe_text15")))]):e._e()]):t("span",[e._v("0")]),e._v("\r\n          -\r\n          "),e.earliestResvTime.d?t("span",[e._v(e._s(e.earliestResvTime.d)+e._s(e.$t("const_PcServe_text15d")))]):e._e(),e.earliestResvTime.h?t("span",[e._v(e._s(e.earliestResvTime.h)+e._s(e.$t("const_PcServe_text15h")))]):e._e(),e.earliestResvTime.m?t("span",[e._v(e._s(e.earliestResvTime.m)+e._s(e.$t("const_PcServe_text15")))]):e._e()]),t("p",[e._v("\r\n          "+e._s(e.$t("PcServe_ReserStatus_text5"))+" :\r\n          "),t("span",[e._v(e._s(e.config.minResvTime))]),e._v(e._s(e.$t("const_PcServe_text15"))+" -\r\n          "),t("span",[e._v(e._s(e.config.maxResvTime))]),e._v(e._s(e.$t("const_PcServe_text15"))+" ;\r\n\r\n          "),e.config.cancelTime?[e._v("\r\n            "+e._s(e.$t("PcServe_ReserStatus_text6"))+"\r\n            "),t("span",[e._v(e._s(e.config.cancelTime)+e._s(e.$t("const_PcServe_text15")))]),e._v("\r\n            "+e._s(e.$t("PcServe_ReserStatus_text7"))+".\r\n          ")]:e._e()],2),t("p",[e._v("\r\n          "+e._s(e.$t("PcServe_ReserStatus_text8"))+" :\r\n          "),t("span",[e._v(e._s(e.config.minUser)+" - "+e._s(e.config.maxUser))]),e._v(";\r\n        ")]),t("p",[e._v("\r\n          "+e._s(e.$t("PcServe_ReserStatus_text9"))+" :\r\n          "),t("span",[e._v(e._s(e.config.labName))])])])])])},k=[],A={name:"ActivityMustKnow",props:{config:{type:Object,required:!0}},computed:{earliestResvTime:function(){var e={d:"",h:"",m:""};return e.d=Math.floor(this.config.earliestResvTime/1440),e.h=Math.floor(this.config.earliestResvTime%1440/60),e.m=Math.floor(this.config.earliestResvTime%1440%60),e},latestResvTime:function(){var e={d:"",h:"",m:""};return e.d=Math.floor(this.config.latestResvTime/1440),e.h=Math.floor(this.config.latestResvTime%1440/60),e.m=Math.floor(this.config.latestResvTime%1440%60),e}}},M=A,O=(a("06b6"),Object(f["a"])(M,R,k,!1,null,"518a3645",null)),Y=O.exports,N=function(){var e=this,t=e._self._c;return t("div",{staticClass:"infoList"},[t("el-form",{ref:"form",staticStyle:{},attrs:{model:e.formData,"label-width":"180px",rules:e.rules}},[t("div",{staticClass:"info-item"},[t("div",{staticClass:"itemTitle"},[e._v(e._s(e.$t("index_main_activity_form_label1")))]),t("div",{staticClass:"itemCon"},[(16&e.sysConfig.resvTheme)>0?t("el-form-item",{attrs:{label:e.$t("index_main_activity_form_theme"),prop:"testName"}},[e.isInputTheme?t("el-input",{attrs:{size:"small",placeholder:"请输入活动主题",clearable:""},model:{value:e.formData.testName,callback:function(t){e.$set(e.formData,"testName",t)},expression:"formData.testName"}}):t("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择"},model:{value:e.formData.testName,callback:function(t){e.$set(e.formData,"testName",t)},expression:"formData.testName"}},e._l(e.titleArr,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),t("el-form-item",{attrs:{label:e.$t("index_main_activity_form_date"),prop:"reserveDate"}},[t("el-date-picker",{attrs:{type:"date",size:"small",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期","picker-options":e.resvDatePickerOptions},model:{value:e.formData.reserveDate,callback:function(t){e.$set(e.formData,"reserveDate",t)},expression:"formData.reserveDate"}})],1),t("el-form-item",{attrs:{label:e.$t("index_main_activity_form_time"),prop:"startTime"}},[t("el-row",[t("el-col",{attrs:{xs:11,sm:11,md:11,lg:11,xl:11}},[t("el-form-item",{attrs:{prop:"startTime"}},[t("el-select",{attrs:{size:"small",placeholder:e.$t("common_select_placeholder")},model:{value:e.formData.startTime,callback:function(t){e.$set(e.formData,"startTime",t)},expression:"formData.startTime"}},e._l(e.checkStartTime,(function(e,a){return t("el-option",{key:a,attrs:{label:e.value,value:e.value}})})),1)],1)],1),t("el-col",{staticClass:"txtcenter",attrs:{xs:2,sm:2,md:2,lg:2,xl:2}},[e._v("~")]),t("el-col",{attrs:{xs:11,sm:11,md:11,lg:11,xl:11}},[t("el-form-item",{attrs:{prop:"endTime"}},[t("el-select",{attrs:{size:"small",placeholder:e.$t("common_select_placeholder")},model:{value:e.formData.endTime,callback:function(t){e.$set(e.formData,"endTime",t)},expression:"formData.endTime"}},e._l(e.checkEndTime,(function(e,a){return t("el-option",{key:a,attrs:{label:e.value,value:e.value}})})),1)],1)],1)],1)],1),t("el-form-item",{attrs:{label:e.$t("index_main_activity_form_number"),prop:"maxUser"}},[t("el-input",{attrs:{size:"small",placeholder:"请输入参加人数"},model:{value:e.formData.maxUser,callback:function(t){e.$set(e.formData,"maxUser",e._n("string"===typeof t?t.trim():t))},expression:"formData.maxUser"}})],1),t("el-form-item",{attrs:{label:e.$t("index_main_activity_form_type")}},[t("el-row",[t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{prop:"activeFormType"}},[t("el-select",{attrs:{size:"small",placeholder:"请选择活动类型"},model:{value:e.formData.activeFormType,callback:function(t){e.$set(e.formData,"activeFormType",t)},expression:"formData.activeFormType"}},e._l(e.formTypeOption,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:12}},[t("el-form-item",{attrs:{prop:"inputActiveFormType"}},["_other"===e.formData.activeFormType?t("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入活动类型",maxlength:10},model:{value:e.inputActiveFormType,callback:function(t){e.inputActiveFormType=t},expression:"inputActiveFormType"}}):e._e()],1)],1)],1)],1),t("el-form-item",{attrs:{label:e.$t("index_main_activity_form_organizer"),prop:"organizer"}},[t("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:e.formData.organizer,callback:function(t){e.$set(e.formData,"organizer",t)},expression:"formData.organizer"}})],1),t("el-form-item",{attrs:{label:e.$t("index_main_activity_form_coorganizer"),prop:"realOrganizer"}},[t("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:e.formData.realOrganizer,callback:function(t){e.$set(e.formData,"realOrganizer",t)},expression:"formData.realOrganizer"}})],1),t("el-form-item",{attrs:{label:e.$t("index_main_activity_form_arrangement"),prop:"activityIntroduction"}},[t("el-input",{attrs:{type:"textarea",rows:4,size:"small",placeholder:"请输入活动具体内容及安排"},model:{value:e.formData.activityIntroduction,callback:function(t){e.$set(e.formData,"activityIntroduction",t)},expression:"formData.activityIntroduction"}})],1)],1)]),t("div",{staticClass:"info-item"},[t("div",{staticClass:"itemTitle"},[e._v(e._s(e.$t("index_main_activity_form_label2")))]),t("div",{staticClass:"itemCon"},[t("el-row",[t("el-col",{attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[t("el-form-item",{attrs:{label:e.$t("index_main_activity_form_speaker_name"),"label-width":"80px",prop:"presenter"}},[t("el-input",{attrs:{size:"small",clearable:"",placeholder:"请输入主讲人姓名"},model:{value:e.formData.presenter,callback:function(t){e.$set(e.formData,"presenter",t)},expression:"formData.presenter"}})],1)],1),t("el-col",{attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[t("el-form-item",{attrs:{label:e.$t("index_main_activity_form_speaker_position"),"label-width":"80px",prop:"presenterOfficialCapacity"}},[t("el-input",{attrs:{size:"small",clearable:"",placeholder:"请输入主讲人职称职位"},model:{value:e.formData.presenterOfficialCapacity,callback:function(t){e.$set(e.formData,"presenterOfficialCapacity",t)},expression:"formData.presenterOfficialCapacity"}})],1)],1)],1),t("el-form-item",{attrs:{label:e.$t("index_main_activity_form_speaker_unit"),"label-width":"80px",prop:"presenterCompany"}},[t("el-input",{attrs:{size:"small",clearable:"",placeholder:"请输入主讲人单位"},model:{value:e.formData.presenterCompany,callback:function(t){e.$set(e.formData,"presenterCompany",t)},expression:"formData.presenterCompany"}})],1)],1)]),t("div",{staticClass:"info-item"},[t("div",{staticClass:"itemTitle"},[e._v(e._s(e.$t("index_main_activity_form_label3")))]),t("div",{staticClass:"itemCon"},[t("el-row",[t("el-col",{attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[t("el-form-item",{attrs:{label:e.$t("index_main_activity_form_contact_name"),prop:"contactPerson","label-width":"80px"}},[t("el-input",{attrs:{clearable:"",autocomplete:"off",size:"small",placeholder:"请输入联系人姓名"},model:{value:e.formData.contactPerson,callback:function(t){e.$set(e.formData,"contactPerson",t)},expression:"formData.contactPerson"}})],1)],1),t("el-col",{attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[t("el-form-item",{attrs:{label:e.$t("index_main_activity_form_contact_logonname"),prop:"contactLogonName","label-width":"100px"}},[t("el-input",{attrs:{clearable:"",autocomplete:"off",size:"small",placeholder:"请输入联系人学工号"},model:{value:e.formData.contactLogonName,callback:function(t){e.$set(e.formData,"contactLogonName",t)},expression:"formData.contactLogonName"}})],1)],1)],1),t("el-row",[t("el-col",{attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[t("el-form-item",{attrs:{label:e.$t("index_main_activity_form_contact_email"),prop:"contactMail","label-width":"80px"}},[t("el-input",{attrs:{clearable:"",size:"small",placeholder:"请输入联系人电子邮箱"},model:{value:e.formData.contactMail,callback:function(t){e.$set(e.formData,"contactMail",t)},expression:"formData.contactMail"}})],1)],1),t("el-col",{attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[t("el-form-item",{attrs:{label:e.$t("index_main_activity_form_contact_phone"),prop:"contactNumber","label-width":"100px"}},[t("el-input",{attrs:{clearable:"",autocomplete:"off",size:"small",placeholder:"请输入联系电话"},model:{value:e.formData.contactNumber,callback:function(t){e.$set(e.formData,"contactNumber",e._n(t))},expression:"formData.contactNumber"}})],1)],1)],1),t("el-form-item",{attrs:{label:e.$t("index_main_activity_form_contact_unit"),"label-width":"80px",prop:"contactCompany"}},[t("el-input",{attrs:{size:"small",clearable:"",placeholder:"请输入联系人单位"},model:{value:e.formData.contactCompany,callback:function(t){e.$set(e.formData,"contactCompany",t)},expression:"formData.contactCompany"}})],1)],1)]),t("div",{staticClass:"info-item"},[t("div",{staticClass:"itemTitle"},[e._v(e._s(e.$t("index_main_activity_form_label4")))]),t("div",{staticClass:"itemCon"},[t("el-form-item",{attrs:{label:e.$t("index_main_activity_form_approval"),prop:"dataUrl"}},[t("ManualUpload",{attrs:{action:"/activity/upload","auto-upload":!0,tip:e.$t("index_main_activity_form_approval_tip")},on:{success:e.handleDataUrl,handleCustomUpload:e.handleCustomUpload}})],1),t("el-form-item",{attrs:{label:e.$t("index_main_activity_form_poster"),prop:"sportsPoster"}},[t("imgList",{on:{success:e.handlePoster,remove:e.handleRemovePoster}})],1),"1"===e.sysConfig.resvCode?t("el-form-item",{attrs:{label:e.$t("common_placeholder_captcha"),prop:"captcha"}},[t("div",{staticClass:"code-wrapper"},[t("el-input",{staticStyle:{width:"30%"},attrs:{size:"small"},model:{value:e.formData.captcha,callback:function(t){e.$set(e.formData,"captcha",t)},expression:"formData.captcha"}}),t("img",{attrs:{src:e.srcData,alt:""},on:{click:e.handleImgSrc}})],1)]):e._e()],1)]),t("el-form-item",{staticClass:"submitBtn"},[t("el-button",{staticStyle:{width:"30%"},attrs:{size:"small",type:"primary"},on:{click:e.handleSubmitBtn}},[e._v(e._s(e.$t("common_dialogButton_submit")))])],1)],1)],1)},I=[],P=(a("55dd"),a("7514"),a("2909")),S={name:"AcitvityForm",data:function(){return{titleArr:[],reserveInfo:{sysKind:16,appAccNo:"",resvProperty:0,testName:"",resvBeginTime:"",resvEndTime:"",resvDev:[],resvKind:2,memberKind:1},inputActiveFormType:"",formData:{testName:"",reserveDate:this.$store.state.newResearch.resvDates,startTime:this.$store.state.newResearch.roomConfig.startTime,endTime:this.$store.state.newResearch.roomConfig.endTime,minUser:0,maxUser:"",activityIntroduction:"",activeFormType:"",organizer:"",realOrganizer:"",presenter:"",presenterOfficialCapacity:"",presenterCompany:"",contactPerson:"",contactLogonName:"",contactMail:"",contactNumber:"",contactCompany:"",dataUrl:"",sportsPoster:""},srcData:"".concat(window.g.ApiUrl,"/captcha?id=").concat(Date.now()),formTypeOption:[],posterTip:"只能上传 jpg,png,JPEG格式, 40M以内",resvDatePickerOptions:{disabledDate:function(e){return e.getTime()+864e5<Date.now()}}}},methods:{handleImgSrc:function(){this.srcData="".concat(window.g.ApiUrl,"/captcha?id=").concat(Date.now())},handleDataUrl:function(e){this.formData.dataUrl=e.data},handlePoster:function(e){Array.isArray(this.formData.sportsPoster)||(this.formData.sportsPoster=[]),this.formData.sportsPoster.push(e.data)},handleRemovePoster:function(e){this.formData.sportsPoster=Object(P["a"])(e)},handleBefore:function(e){var t=e.size/1024/1024<40;t||this.$message.error("上传文件不能超过40M!");var a=/^image\/(jpeg|png|jpg)$/.test(e.type);return a||this.$message.error("上传图片格式不对!"),t&&a},handleSubmitBtn:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return e.$message.warning("请完善表单后再提交"),!1;e.reserveInfo.appAccNo=e.userInfo.accNo,e.reserveInfo.resvMember=[e.userInfo.accNo],e.reserveInfo.resvDev=[e.newResearch.roomConfig.devId],e.reserveInfo.resvBeginTime="".concat(e.formData.reserveDate," ").concat(e.formData.startTime,":00"),e.reserveInfo.resvEndTime="".concat(e.formData.reserveDate," ").concat(e.formData.endTime,":00"),e.reserveInfo.testName=e.formData.testName,e.reserveInfo.captcha=e.formData.captcha,e.formData.reserveInfo=e.reserveInfo,e.formData.sportsPoster=e.formData.sportsPoster&&Array.isArray(e.formData.sportsPoster)?e.formData.sportsPoster.join(","):e.formData.sportsPoster,e.formData.limitNum=e.formData.maxUser,e.formData.activityProp=4,e.formTypeOption.forEach((function(t){"_other"===e.formData.activeFormType?e.formData.activeFormType=e.inputActiveFormType:t.value===e.formData.activeFormType&&(e.formData.activeFormType=t.label)})),Object(v["j"])(e.formData).then((function(t){0===t.code?(e.$message.success(t.message),e.$router.push({name:"userinfo",params:{id:1}})):(e.handleImgSrc(),e.$message.error(t.message))}))}))},getDict:function(e){return Object(v["g"])({params:{codeType:e}}).then((function(e){return e}))},handleCustomUpload:function(e){var t=e.file,a={"Content-Type":"multipart-formdata",Accept:"*/*"},r=new FormData;r.append("file",t),this.$axios.post(e.action,r,a).then((function(a){e.onSuccess(a.data,t)}))},initDict:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getDict(1003);case 2:t=e.sent,0===t.code&&(this.formTypeOption=t.data.map((function(e){return{label:e.name,value:e.id}})),a=this.formTypeOption.find((function(e){return"其他"===e.label})),a?a.value="_other":this.formTypeOption.push({label:"其他",value:"_other"}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getThemeTitle:function(){var e=this,t={codeType:1005};Object(h["h"])({params:t}).then((function(t){0===t.code&&(e.titleArr=t.data.map((function(e){return{label:e.name,value:e.name}})))}))}},components:{ManualUpload:d,imgList:T},computed:{newResearch:function(){return this.$store.state.newResearch},userInfo:function(){return this.$store.state.userInfo},isInputTheme:function(){return(16&this.sysConfig.resvthemefix)>0},rules:function(){var e={testName:[{required:!0,message:"活动主题不能为空",trigger:"blur"}],reserveDate:[{required:!0,message:"活动日期不能为空",trigger:"blur"}],startTime:[{required:!0,message:"开始时间不能为空",trigger:"blur"}],endTime:[{required:!0,message:"结束时间不能为空",trigger:"blur"}],maxUser:[{required:!0,message:"最大参加人数不能为空",trigger:"blur"},{type:"number",message:"最大参加人数必须为数字",trigger:"blur"}],activityIntroduction:[{required:!0,message:"活动具体内容及安排不能为空",trigger:"blur"}],organizer:[{required:!0,message:"主办单位不能为空",trigger:"blur"}],presenter:[{required:!0,message:"主讲人姓名不能为空",trigger:"blur"}],contactPerson:[{required:!0,message:"联系人姓名不能为空",trigger:"blur"}],contactLogonName:[{required:!0,message:"联系人学工号不能为空",trigger:"blur"}],contactNumber:[{required:!0,message:"联系电话不能为空",trigger:"blur"},{type:"number",message:"联系电话必须为数字"}],captcha:[{required:!0,message:"该项不能为空",trigger:"blur"}]};return(16&this.sysConfig.resvthememust)>0&&(e.testName=[{required:!0,message:"主题不能为空",trigger:"blur"}]),e},checkTimes:function(){var e=this.newResearch,t=e.roomConfig?e.roomConfig.resvInfo.filter((function(e){return!((128&e.resvStatus)>0)})):[],a=[].concat(Object(P["a"])(e.roomConfig.cls),Object(P["a"])(t));if(0===a.length)return[{startTime:"2019/07/23 ".concat(e.roomConfig.openStart),endTime:"2019/07/23 ".concat(e.roomConfig.openEnd)}];for(var r=0;r<a.length;r++){var n=a[r];n.startTime=n.startTime||n.start,n.endTime=n.endTime||n.end,n.startTime=this.$moment(n.startTime).format("2019/07/23 HH:mm"),n.endTime=this.$moment(n.endTime).format("2019/07/23 HH:mm")}a.sort((function(e,t){return new Date(e.startTime)-new Date(t.startTime)}));var i=e.roomConfig.openStart,o=e.roomConfig.openEnd,s=[];a.length>0&&new Date("".concat(a[0].startTime))-new Date("2019/07/23 ".concat(i))>0&&s.push({startTime:"2019/07/23 ".concat(i),endTime:a[0].startTime});for(var l=0;l<a.length-1;l++)new Date(a[l].endTime)-new Date(a[l+1].startTime)!=0&&s.push({startTime:a[l].endTime,endTime:a[l+1].startTime});return a.length>=1&&new Date(a[a.length-1].endTime)-new Date("2019/07/23 ".concat(o))<0&&s.push({startTime:a[a.length-1].endTime,endTime:"2019/07/23 ".concat(o)}),s},checkStartTime:function(){var e=this;if(this.checkTimes.length>0){var t=this.newResearch,a=[],r=t.roomConfig.resvRule.timeInterval<=1?1:parseInt(t.roomConfig.resvRule.timeInterval);return this.checkTimes.forEach((function(n){var i=n.startTime,o=n.endTime,s=new Date(i),l=t.roomConfig.resvRule,m=l.latestResvTime,c=l.earliestResvTime,u=e.$moment().add(m,"minutes").format("YYYY/MM/DD HH:mm:ss"),f=e.$moment().add(c,"minutes").format("YYYY/MM/DD HH:mm:ss");while(s-new Date(o)<=0)e.$moment("".concat(t.resvDates)).format("YYYY/MM/DD")===e.$moment().format("YYYY/MM/DD")||m%1440!==0&&e.$moment(u).format("YYYY/MM/DD")===e.$moment(e.$store.state.newResearch.resvDates).format("YYYY/MM/DD")?e.$moment(u).isSameOrBefore("".concat(e.$moment(u).format("YYYY/MM/DD")," ").concat(e.$moment(s).format("HH:mm")))&&a.push({value:e.$moment(s).format("HH:mm"),max:e.$moment(new Date(o)).format("HH:mm")}):c%1440!==0&&e.$moment(f).format("YYYY/MM/DD")===e.$moment(e.$store.state.newResearch.resvDates).format("YYYY/MM/DD")?e.$moment(f).isAfter("".concat(e.$moment(f).format("YYYY/MM/DD")," ").concat(e.$moment(s).format("HH:mm")))&&a.push({value:e.$moment(s).format("HH:mm"),max:e.$moment(f).format("HH:mm")}):a.push({value:e.$moment(s).format("HH:mm"),max:e.$moment(new Date(o)).format("HH:mm")}),s=+new Date(s)+60*r*1e3})),a}},checkEndTime:function(){var e=this.formData.startTime,t={};this.checkTimes.forEach((function(a){new Date("2019/07/23 ".concat(e))>=new Date(a.startTime)&&new Date("2019/07/23 ".concat(e))<new Date(a.endTime)&&(t=a)}));var a=this.$store.state.newResearch,r=[],n=t.startTime,i=t.endTime,o=a.roomConfig.resvRule.timeInterval<=1?1:parseInt(a.roomConfig.resvRule.timeInterval),s=new Date(n),l=a.roomConfig.resvRule.minResvTime,m=a.roomConfig.resvRule.maxResvTime,c=this.$moment().add(a.roomConfig.resvRule.earliestResvTime,"minutes").format("YYYY-MM-DD HH:mm:ss");while(s-new Date(i)<=0){if(a.roomConfig.resvRule.earliestResvTime%1440!==0&&this.$moment(c).format("YYYY/MM/DD")===this.$moment(this.$store.state.newResearch.resvDates).format("YYYY/MM/DD")&&this.$moment("".concat(this.$moment(c).format("YYYY/MM/DD")," ").concat(this.$moment(s).format("HH:mm"))).isAfter(this.$moment(c).add(m,"minutes")))break;s-new Date(+new Date("2019/07/23 ".concat(this.formData.startTime))+60*l*1e3)<0?s=+new Date(s)+60*o*1e3:(s-new Date(+new Date("2019/07/23 ".concat(this.formData.startTime))+60*m*1e3)>0||r.push({value:this.$moment(s).format("HH:mm")}),s=+new Date(s)+60*o*1e3)}return r}},watch:{"formData.startTime":{handler:function(e,t){var a=this.checkEndTime,r=this.newResearch.roomConfig.resvRule.minResvTime,n=this.newResearch.roomConfig.resvRule.maxResvTime;0!==a.length?(new Date("2019/07/26 ".concat(this.formData.endTime))-new Date("2019/07/26 ".concat(e))<60*r*1e3&&(this.formData.endTime=a[a.length-1].value),(new Date("2019/07/26 ".concat(this.formData.endTime))-new Date("2019/07/26 ".concat(e))>60*n*1e3||new Date("2019/07/26 ".concat(this.formData.endTime))-new Date("2019/07/26 ".concat(a[a.length-1].value))>0)&&(this.formData.endTime=a[a.length-1].value)):this.formData.endTime=""},deep:!0}},created:function(){this.isInputTheme||this.getThemeTitle(),this.initDict()}},j=S,z=(a("ee8b"),Object(f["a"])(j,N,I,!1,null,"1a8ad154",null)),U=z.exports,H=function(){var e=this,t=e._self._c;return t("div",{staticClass:"apply-info"},[t("div",{staticClass:"info-title"},[e._v(e._s(e.config.roomName))]),t("div",{staticClass:"info-content"},[t("div",{staticClass:"con-left"},[e._v("申请须知:")]),t("ul",{staticClass:"con-right"},[t("li",{staticClass:"info-item"},[e._v("空间面向校内师生开放，可举办专题讲座、学术交流报告会等主题活动使用。")]),e._m(0),t("li",{staticClass:"info-item"},[e._v("\r\n          当日开放时段: "),t("span",[e._v(e._s(e.config.openTime))]),e._v("，需提前\r\n          "),0!==e.config.latestResvTime?t("span",[e.latestResvTime.d?t("span",[e._v(e._s(e.latestResvTime.d)+e._s(e.$t("const_PcServe_text15d")))]):e._e(),e.latestResvTime.h?t("span",[e._v(e._s(e.latestResvTime.h)+e._s(e.$t("const_PcServe_text15h")))]):e._e(),e.latestResvTime.m?t("span",[e._v(e._s(e.latestResvTime.m)+e._s(e.$t("const_PcServe_text15")))]):e._e()]):t("span",[e._v("0")]),e._v("\r\n          -\r\n          "),e.earliestResvTime.d?t("span",[e._v(e._s(e.earliestResvTime.d)+e._s(e.$t("const_PcServe_text15d")))]):e._e(),e.earliestResvTime.h?t("span",[e._v(e._s(e.earliestResvTime.h)+e._s(e.$t("const_PcServe_text15h")))]):e._e(),e.earliestResvTime.m?t("span",[e._v(e._s(e.earliestResvTime.m)+e._s(e.$t("const_PcServe_text15")))]):e._e(),e._v("\r\n          提交预约申请。\r\n        ")]),t("li",{staticClass:"info-item"},[e._v("请规范使用空间内设施。若发现设备故障或有其他疑问，请立即与工作人员联系，不得擅自处理；否则由此造成的设备损坏须做相应赔偿。")]),t("li",{staticClass:"info-item"},[e._v("请勿移动空间内桌椅。 请保持环境整洁，禁止在空间内饮食。")])])])])},E=[function(){var e=this,t=e._self._c;return t("li",{staticClass:"info-item"},[e._v("空间内举办活动需经学校审批，务必先在校务服务网中提交《报告会、研讨会、讲座、论坛等活动申报与审批》（详见"),t("a",{attrs:{href:"http://xwfw.zju.edu.cn/fwzn.php?cmd=sx_content&blsxm=1034"}},[e._v("http://xwfw.zju.edu.cn/fwzn.php?cmd=sx_content&blsxm=1034")]),e._v(" ），并将审批通过结果以PDF形式在本页面提交。")])}],F={name:"ActivityMustKnow",props:{config:{type:Object,required:!0}},computed:{earliestResvTime:function(){var e={d:"",h:"",m:""};return e.d=Math.floor(this.config.earliestResvTime/1440),e.h=Math.floor(this.config.earliestResvTime%1440/60),e.m=Math.floor(this.config.earliestResvTime%1440%60),e},latestResvTime:function(){var e={d:"",h:"",m:""};return e.d=Math.floor(this.config.latestResvTime/1440),e.h=Math.floor(this.config.latestResvTime%1440/60),e.m=Math.floor(this.config.latestResvTime%1440%60),e}}},q=F,K=(a("9d7a"),Object(f["a"])(q,H,E,!1,null,"54777ca6",null)),L=K.exports,B=function(){var e=this,t=e._self._c;return t("div",{staticClass:"custom-form"},[t("el-form",{ref:"form",staticStyle:{},attrs:{model:e.formData,rules:e.rules,"label-width":"180px"}},[t("div",{staticClass:"info-item"},[e.isShowTheme?t("el-form-item",{attrs:{label:e.$t("index_main_activity_theme"),prop:"testName"}},[e.isInputTheme?t("el-input",{attrs:{size:"small",placeholder:e.$t("index_main_activity_theme_inputPlaceholder")},model:{value:e.formData.testName,callback:function(t){e.$set(e.formData,"testName",t)},expression:"formData.testName"}}):t("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:e.$t("index_main_activity_theme_selectPlaceholder")},model:{value:e.formData.testName,callback:function(t){e.$set(e.formData,"testName",t)},expression:"formData.testName"}},e._l(e.themeOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):t("div"),t("el-form-item",{attrs:{label:e.$t("index_main_activity_form_date"),prop:"reserveDate"}},[t("el-date-picker",{attrs:{type:"date",size:"small",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期","picker-options":e.resvDatePickerOptions},model:{value:e.formData.reserveDate,callback:function(t){e.$set(e.formData,"reserveDate",t)},expression:"formData.reserveDate"}})],1),t("el-form-item",{attrs:{label:e.$t("index_main_activity_form_time"),prop:"startTime"}},[t("el-row",[t("el-col",{attrs:{xs:11,sm:11,md:11,lg:11,xl:11}},[t("el-form-item",{attrs:{prop:"startTime"}},[t("el-select",{attrs:{size:"small",placeholder:e.$t("common_select_placeholder")},model:{value:e.formData.startTime,callback:function(t){e.$set(e.formData,"startTime",t)},expression:"formData.startTime"}},e._l(e.checkStartTime,(function(e,a){return t("el-option",{key:a,attrs:{label:e.value,value:e.value}})})),1)],1)],1),t("el-col",{staticClass:"txtcenter",attrs:{xs:2,sm:2,md:2,lg:2,xl:2}},[e._v("~")]),t("el-col",{attrs:{xs:11,sm:11,md:11,lg:11,xl:11}},[t("el-form-item",{attrs:{prop:"endTime"}},[t("el-select",{attrs:{size:"small",placeholder:e.$t("common_select_placeholder")},model:{value:e.formData.endTime,callback:function(t){e.$set(e.formData,"endTime",t)},expression:"formData.endTime"}},e._l(e.checkEndTime,(function(e,a){return t("el-option",{key:a,attrs:{label:e.value,value:e.value}})})),1)],1)],1)],1)],1),e._l(e.columns,(function(a){return t("el-form-item",{key:a.uuid,attrs:{label:a.ColumnShow,prop:a.columnAlias},on:{"hook:mounted":function(t){return e.formItemMounted(a)}}},["1001"==a.columnKind?t("el-input",{attrs:{size:"small",placeholder:"请输入".concat(a["ColumnShow"]),clearable:""},model:{value:e.formData[a.columnAlias],callback:function(t){e.$set(e.formData,a.columnAlias,t)},expression:"formData[col.columnAlias]"}}):e._e(),"1002"==a.columnKind?t("el-input",{attrs:{type:"textarea",rows:3,maxlength:a["columnLength"],placeholder:"请输入".concat(a["ColumnShow"]),"show-word-limit":""},model:{value:e.formData[a.columnAlias],callback:function(t){e.$set(e.formData,a.columnAlias,t)},expression:"formData[col.columnAlias]"}}):e._e(),"1003"==a.columnKind?t("el-select",{attrs:{size:"small",clearable:!a.columnRequired,placeholder:"请选择".concat(a["ColumnShow"])},model:{value:e.formData[a.columnAlias],callback:function(t){e.$set(e.formData,a.columnAlias,t)},expression:"formData[col.columnAlias]"}},e._l(e.options[a.columnAlias],(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),"1008"==a.columnKind?t("div",[t("el-date-picker",{attrs:{type:"date",size:"small",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.formData[a.columnAlias],callback:function(t){e.$set(e.formData,a.columnAlias,t)},expression:"formData[col.columnAlias]"}}),"joinDeadline"===a.columnAlias?t("span",{staticClass:"tips"},[e._v("提示: (不包含当日)")]):e._e()],1):e._e(),"1005"==a.columnKind?t("el-checkbox-group",{model:{value:e.checkboxFormData["__check__".concat(a["columnAlias"])],callback:function(t){e.$set(e.checkboxFormData,"__check__".concat(a["columnAlias"]),t)},expression:"checkboxFormData[`__check__${col['columnAlias']}`]"}},e._l(e.options[a.columnAlias],(function(a){return t("el-checkbox",{key:a.value,attrs:{label:a.value}},[e._v(e._s(a.label))])})),1):e._e(),"1011"==a.columnKind?t("ManualUpload",{attrs:{action:"/activity/upload","auto-upload":!0,column:a},on:{success:e.handleUploadSuccess,handleCustomUpload:e.handleCustomUpload}}):e._e(),"1012"==a.columnKind?t("imgList",{attrs:{column:a},on:{success:e.handlePoster}}):e._e()],1)})),"1"===e.sysConfig.resvCode?t("el-form-item",{attrs:{label:"验证码",prop:"captcha"}},[t("div",{staticClass:"code-wrapper"},[t("el-input",{staticStyle:{width:"30%"},attrs:{size:"small"},model:{value:e.formData.captcha,callback:function(t){e.$set(e.formData,"captcha",t)},expression:"formData.captcha"}}),t("img",{attrs:{src:e.srcData,alt:""},on:{click:e.handleImgSrc}})],1)]):e._e()],2)]),t("div",{staticClass:"submitBtn"},[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleSubmitBtn}},[e._v("提交")])],1)],1)},V=[],J=(a("8e6e"),a("ade3")),G=(a("a481"),a("456d"),a("3b2b"),a("2f62"));function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function X(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(a),!0).forEach((function(t){Object(J["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Q={data:function(){return{columns:[],themeOptions:[],propOption:[{label:"对出席人员考勤",value:2},{label:"发布活动",value:4},{label:"开放报名",value:8}],options:{},checkboxFormData:{},formData:{testName:"",reserveDate:"",startTime:"",endTime:""},rules:{reserveDate:[{required:!0,message:"活动日期不能为空",trigger:"blur"}],startTime:[{required:!0,message:"开始时间不能为空",trigger:"blur"}],endTime:[{required:!0,message:"结束时间不能为空",trigger:"blur"}]},resvDatePickerOptions:{disabledDate:function(e){return e.getTime()+864e5<Date.now()}},srcData:"".concat(window.g.ApiUrl,"/captcha?id=").concat(Date.now())}},created:function(){this.getColumns(),this.isInputTheme||this.getTitle()},methods:{initFormData:function(){var e=this;Array.isArray(this.columns)&&this.columns.forEach((function(t){e.$set(e.formData,t.columnAlias,""),"1005"===t.columnKind&&e.$set(e.checkboxFormData,"__check__".concat(t.columnAlias),[])}))},initRules:function(){var e=this;if(Array.isArray(this.columns)){this.isThemeRequired&&(this.rules.testName=[{required:!0,message:"活动主题不能为空",trigger:"blur"}]);var t=this.columns.filter((function(e){return void 0!==e["columnRequired"]&&e["columnRequired"]||void 0!==e["columnValid"]&&""!==e["columnValid"]}));t.forEach((function(t){e.rules[t.columnAlias]=[],void 0!==t["columnRequired"]&&e.rules[t.columnAlias].push({required:!0,message:"".concat(t["ColumnShow"],"不能为空"),trigger:"blur"}),void 0!==t["columnValid"]&&e.rules[t.columnAlias].push({validator:function(e,a,r){var n=new RegExp(t.columnValid);n.test(a)||r(new Error("".concat(t["ColumnShow"],"验证失败"))),r()},trigger:"blur"})}))}},handleImgSrc:function(){this.srcData="".concat(window.g.ApiUrl,"/captcha?id=").concat(Date.now())},getColumns:function(){var e=this,t={customNo:1};Object(v["b"])({params:t}).then((function(t){if(0===t.code){var a;if(Array.isArray(t.data))(a=e.columns).push.apply(a,Object(P["a"])(t.data));e.initFormData(),e.initRules()}else e.$message({type:"error",message:t.message})}))},formItemMounted:function(e){var t=this;this.options[e.columnAlias]||"1003"!==e.columnKind&&"1005"!==e.columnKind||(this.$set(this.options,e.columnAlias,[]),1===e.relateKind?this.getDict(e.relateValue).then((function(a){t.options[e.columnAlias]=Object(P["a"])(a.map((function(e){return{label:e.name,value:e.codeValue}})))})):2===e.relateKind&&"activityProp"===e.columnAlias&&(this.options[e.columnAlias]=Object(P["a"])(this.propOption)))},initAllDict:function(){},handlePoster:function(e,t){t.columnAlias||(t.columnAlias="_"),this.formData[t.columnAlias]?this.formData[t.columnAlias]=this.formData[t.columnAlias]+","+e.data:this.formData[t.columnAlias]=e.data},handleUploadSuccess:function(e,t){t.columnAlias||(t.columnAlias="_"),this.formData[t.columnAlias]=e.data},handleCustomUpload:function(e){if(e.file){var t=e.file,a={"Content-Type":"multipart-formdata",Accept:"*/*"},r=new FormData;r.append("file",t),this.$axios.post(e.action,r,a).then((function(a){e.onSuccess(a.data,t)}))}},getAllType:function(){var e=this;this.getDict(1008).then((function(t){e.allType=t.map((function(e){return{label:e.name,value:e.codeValue}}))}))},getTitle:function(){var e=this;this.getDict(1005).then((function(t){e.themeOptions=t.map((function(e){return{label:e.name,value:e.name}}))}))},getDict:function(e){if(e===e||e){var t={codeType:e};return new Promise((function(e,a){Object(v["f"])({params:t}).then((function(t){0===t.code&&Array.isArray(t.data)?e(t.data):e([])}))}))}},handleSubmitBtn:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return e.$message.warning("请完善数据后再提交"),!1;var a=e,r={};r.resvBeginTime="".concat(a.formData.reserveDate," ").concat(a.formData.startTime,":00"),r.resvEndTime="".concat(a.formData.reserveDate," ").concat(a.formData.endTime,":00"),r.memberKind=a.formData.limitNum>1?2:1,r.testName=a.formData.testName,a.formData.captcha&&(r.captcha=a.formData.captcha),r.sysKind=16,r.appAccNo=e.userInfo.accNo,r.resvProperty=0,r.resvKind=2,r.resvMember=[e.userInfo.accNo],r.resvDev=[e.newResearch.roomConfig.devId];var n={};e.columns.forEach((function(e){n[e.columnAlias]={},n[e.columnAlias]["uuid"]=e.uuid,n[e.columnAlias][e.columnAlias]=a.formData[e.columnAlias]}));var i={reserveInfo:r,map:n};Object(v["k"])(i).then((function(t){0===t.code?(e.$message.success(t.message),e.$router.push({name:"userinfo",params:{id:1}})):(e.handleImgSrc(),e.$message.error(t.message))}))}))}},watch:{newResearch:{handler:function(e,t){e&&(this.formData.reserveDate=e.resvDates,this.formData.startTime=e.roomConfig.startTime,this.formData.endTime=e.roomConfig.endTime)},deep:!0,immediate:!0},"formData.startTime":{handler:function(e,t){var a=this.checkEndTime,r=this.newResearch.roomConfig.resvRule.minResvTime,n=this.newResearch.roomConfig.resvRule.maxResvTime;0!==a.length?(new Date("2019/07/26 ".concat(this.formData.endTime))-new Date("2019/07/26 ".concat(e))<60*r*1e3&&(this.formData.endTime=a[a.length-1].value),(new Date("2019/07/26 ".concat(this.formData.endTime))-new Date("2019/07/26 ".concat(e))>60*n*1e3||new Date("2019/07/26 ".concat(this.formData.endTime))-new Date("2019/07/26 ".concat(a[a.length-1].value))>0)&&(this.formData.endTime=a[a.length-1].value)):this.formData.endTime=""},deep:!0},checkboxFormData:{handler:function(e,t){for(var a=0,r=Object.keys(e);a<r.length;a++){var n=r[a],i=n.replace(/^__check__/,"");this.formData[i]="activityProp"===i?e[n].reduce((function(e,t){return parseInt(e)+parseInt(t)}),0):e[n].join(",")}},deep:!0}},computed:X(X({},Object(G["e"])(["newResearch","userInfo"])),{},{isShowTheme:function(){return(16&this.sysConfig.resvTheme)>0&&0==(1024&this.newResearch.roomConfig.resvRule.limit)},isInputTheme:function(){return(16&this.sysConfig.resvthemefix)>0},isThemeRequired:function(){return(16&this.sysConfig.resvthememust)>0&&0==(1024&this.newResearch.roomConfig.resvRule.limit)},checkTimes:function(){var e=this.newResearch,t=e.roomConfig?e.roomConfig.resvInfo.filter((function(e){return!((128&e.resvStatus)>0)})):[],a=[].concat(Object(P["a"])(e.roomConfig.cls),Object(P["a"])(t));if(0===a.length)return[{startTime:"2019/07/23 ".concat(e.roomConfig.openStart),endTime:"2019/07/23 ".concat(e.roomConfig.openEnd)}];for(var r=0;r<a.length;r++){var n=a[r];n.startTime=n.startTime||n.start,n.endTime=n.endTime||n.end,n.startTime=this.$moment(n.startTime).format("2019/07/23 HH:mm"),n.endTime=this.$moment(n.endTime).format("2019/07/23 HH:mm")}a.sort((function(e,t){return new Date(e.startTime)-new Date(t.startTime)}));var i=e.roomConfig.openStart,o=e.roomConfig.openEnd,s=[];a.length>0&&new Date("".concat(a[0].startTime))-new Date("2019/07/23 ".concat(i))>0&&s.push({startTime:"2019/07/23 ".concat(i),endTime:a[0].startTime});for(var l=0;l<a.length-1;l++)new Date(a[l].endTime)-new Date(a[l+1].startTime)!=0&&s.push({startTime:a[l].endTime,endTime:a[l+1].startTime});return a.length>=1&&new Date(a[a.length-1].endTime)-new Date("2019/07/23 ".concat(o))<0&&s.push({startTime:a[a.length-1].endTime,endTime:"2019/07/23 ".concat(o)}),s},checkStartTime:function(){var e=this;if(this.checkTimes.length>0){var t=this.newResearch,a=[],r=t.roomConfig.resvRule.timeInterval<=1?1:parseInt(t.roomConfig.resvRule.timeInterval);return this.checkTimes.forEach((function(n){var i=n.startTime,o=n.endTime,s=new Date(i),l=t.roomConfig.resvRule,m=l.latestResvTime,c=l.earliestResvTime,u=e.$moment().add(m,"minutes").format("YYYY/MM/DD HH:mm:ss"),f=e.$moment().add(c,"minutes").format("YYYY/MM/DD HH:mm:ss");while(s-new Date(o)<=0)e.$moment("".concat(t.resvDates)).format("YYYY/MM/DD")===e.$moment().format("YYYY/MM/DD")||m%1440!==0&&e.$moment(u).format("YYYY/MM/DD")===e.$moment(e.$store.state.newResearch.resvDates).format("YYYY/MM/DD")?e.$moment(u).isSameOrBefore("".concat(e.$moment(u).format("YYYY/MM/DD")," ").concat(e.$moment(s).format("HH:mm")))&&a.push({value:e.$moment(s).format("HH:mm"),max:e.$moment(new Date(o)).format("HH:mm")}):c%1440!==0&&e.$moment(f).format("YYYY/MM/DD")===e.$moment(e.$store.state.newResearch.resvDates).format("YYYY/MM/DD")?e.$moment(f).isAfter("".concat(e.$moment(f).format("YYYY/MM/DD")," ").concat(e.$moment(s).format("HH:mm")))&&a.push({value:e.$moment(s).format("HH:mm"),max:e.$moment(f).format("HH:mm")}):a.push({value:e.$moment(s).format("HH:mm"),max:e.$moment(new Date(o)).format("HH:mm")}),s=+new Date(s)+60*r*1e3})),a}},checkEndTime:function(){var e=this.formData.startTime,t={};this.checkTimes.forEach((function(a){new Date("2019/07/23 ".concat(e))>=new Date(a.startTime)&&new Date("2019/07/23 ".concat(e))<new Date(a.endTime)&&(t=a)}));var a=this.$store.state.newResearch,r=[],n=t.startTime,i=t.endTime,o=a.roomConfig.resvRule.timeInterval<=1?1:parseInt(a.roomConfig.resvRule.timeInterval),s=new Date(n),l=a.roomConfig.resvRule.minResvTime,m=a.roomConfig.resvRule.maxResvTime,c=this.$moment().add(a.roomConfig.resvRule.earliestResvTime,"minutes").format("YYYY-MM-DD HH:mm:ss");while(s-new Date(i)<=0){if(a.roomConfig.resvRule.earliestResvTime%1440!==0&&this.$moment(c).format("YYYY/MM/DD")===this.$moment(this.$store.state.newResearch.resvDates).format("YYYY/MM/DD")&&this.$moment("".concat(this.$moment(c).format("YYYY/MM/DD")," ").concat(this.$moment(s).format("HH:mm"))).isAfter(this.$moment(c).add(m,"minutes")))break;s-new Date(+new Date("2019/07/23 ".concat(this.formData.startTime))+60*l*1e3)<0?s=+new Date(s)+60*o*1e3:(s-new Date(+new Date("2019/07/23 ".concat(this.formData.startTime))+60*m*1e3)>0||r.push({value:this.$moment(s).format("HH:mm")}),s=+new Date(s)+60*o*1e3)}return r}}),components:{ManualUpload:d,imgList:T}},W=Q,ee=(a("3e01"),Object(f["a"])(W,B,V,!1,null,"4d6a3cb4",null)),te=ee.exports,ae={data:function(){return{}},methods:{},components:{ActivityForm:C,ActivityMustKnow:Y,ActivityFormZJU:U,ActivityMustKnowZJU:L,ActivityCustomForm:te},computed:{roomConfig:function(){var e=this.$store.state.newResearch.roomConfig,t=e.openTimes.map((function(e){return"".concat(e.openStartTime," - ").concat(e.openEndTime)})).join(","),a=e.roomName,r=e.resvRule.latestResvTime,n=e.resvRule.earliestResvTime,i=e.resvRule.minResvTime,o=e.resvRule.maxResvTime,s=e.resvRule.cancelTime,l=e.minUser,m=e.maxUser,c=e.labName;return{roomName:a,openTime:t,latestResvTime:r,earliestResvTime:n,minResvTime:i,maxResvTime:o,cancelTime:s,minUser:l,maxUser:m,labName:c}}}},re=ae,ne=(a("b3da"),Object(f["a"])(re,r,n,!1,null,"04cdda38",null));t["default"]=ne.exports},8720:function(e,t,a){},8995:function(e,t,a){},"9cc2":function(e,t,a){},"9d7a":function(e,t,a){"use strict";a("9cc2")},aa77:function(e,t,a){var r=a("5ca1"),n=a("be13"),i=a("79e5"),o=a("fdef"),s="["+o+"]",l="​",m=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),u=function(e,t,a){var n={},s=i((function(){return!!o[e]()||l[e]()!=l})),m=n[e]=s?t(f):o[e];a&&(n[a]=m),r(r.P+r.F*s,"String",n)},f=u.trim=function(e,t){return e=String(n(e)),1&t&&(e=e.replace(m,"")),2&t&&(e=e.replace(c,"")),e};e.exports=u},b3da:function(e,t,a){"use strict";a("8995")},b56e:function(e,t,a){},c5f6:function(e,t,a){"use strict";var r=a("7726"),n=a("69a8"),i=a("2d95"),o=a("5dbc"),s=a("6a99"),l=a("79e5"),m=a("9093").f,c=a("11e9").f,u=a("86cc").f,f=a("aa77").trim,p="Number",d=r[p],v=d,h=d.prototype,g=i(a("2aeb")(h))==p,D="trim"in String.prototype,_=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=D?t.trim():f(t,3);var a,r,n,i=t.charCodeAt(0);if(43===i||45===i){if(a=t.charCodeAt(2),88===a||120===a)return NaN}else if(48===i){switch(t.charCodeAt(1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+t}for(var o,l=t.slice(2),m=0,c=l.length;m<c;m++)if(o=l.charCodeAt(m),o<48||o>n)return NaN;return parseInt(l,r)}}return+t};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof d&&(g?l((function(){h.valueOf.call(a)})):i(a)!=p)?o(new v(_(t)),a,d):_(t)};for(var b,y=a("9e1e")?m(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),T=0;y.length>T;T++)n(v,b=y[T])&&!n(d,b)&&u(d,b,c(v,b));d.prototype=h,h.constructor=d,a("2aba")(r,p,d)}},ee8b:function(e,t,a){"use strict";a("b56e")},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);